(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{346:function(t,a,r){t.exports=r.p+"assets/img/summary.8cd1fad1.png"},605:function(t,a,r){"use strict";r.r(a);var s=r(7),e=Object(s.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"背景"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#背景"}},[t._v("#")]),t._v(" 背景")]),t._v(" "),a("p",[t._v("它是 Git flow 与 Github flow 的综合。吸取了两者的优点，既有适应不同开发环境的弹性，又有单一主分支的简单和便利。")]),t._v(" "),a("p",[t._v("Gitlab flow 和 Github flow 之间的最大区别是 Gitlab flow 支持环境分支。")]),t._v(" "),a("p",[a("img",{attrs:{src:r(346),alt:""}})]),t._v(" "),a("p",[t._v('Gitlab flow 的最大原则叫做"上游优先"（upsteam first），即只存在一个主分支 master，它是所有其他分支的"上游"。只有上游分支采纳的代码变化，才能应用到其他分支。')]),t._v(" "),a("p",[t._v("Gitlab flow 分成两种情形来应付不同的开发流程：")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("持续发布")])]),t._v(" "),a("li",[a("p",[t._v("版本发布")])])]),t._v(" "),a("h2",{attrs:{id:"持续发布"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#持续发布"}},[t._v("#")]),t._v(" 持续发布")]),t._v(" "),a("p",[t._v("对于持续发布的项目，它建议在 master 分支以外，再建立不同的环境分支，每个环境都有对应的分支。比如，开发环境的分支是 master，预发环境的分支是 pre-production，生产环境的分支是 production。")]),t._v(" "),a("p",[t._v("开发分支 master 用于发布到测试环境，该分支为受保护的分支。\n预发分支 pre-production 用于发布到预发环境，上游分支为 master。\n正式分支 production 用于发布到正式环境，上游分支为 pre-production。\n如果生产环境（production）发生错误，则要建一个新分支修改完后合并到最上游的开发分支（master）此时就是（Upstream first），且经过测试，再继续往 pre-production 合并，要经过测试没有问题了才能够再往下合并到生产环境。")]),t._v(" "),a("h2",{attrs:{id:"版本发布"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#版本发布"}},[t._v("#")]),t._v(" 版本发布")]),t._v(" "),a("p",[t._v("对于版本发布的项目，建议的做法是每一个稳定版本，都要从 master 分支拉出一个分支，比如 2-3-stable、2-4-stable 等。")]),t._v(" "),a("p",[t._v("在出现 bug 后，根据对应的 release branch 创建一个修复分支，修复工作完成后，一样要按照上游优选的原则，先合并到 master 分支，经过测试才能够合并到 release 分支，并且此时要更新小版本号。")]),t._v(" "),a("h2",{attrs:{id:"小结"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#小结"}},[t._v("#")]),t._v(" 小结")]),t._v(" "),a("p",[t._v("优点：")]),t._v(" "),a("p",[t._v("可以区分不同的环境部署。\n对持续交付和持续集成友好。\n缺点：")]),t._v(" "),a("p",[t._v("分支多，流程管理复杂。")])])}),[],!1,null,null,null);a.default=e.exports}}]);