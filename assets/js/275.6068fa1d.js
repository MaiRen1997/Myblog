(window.webpackJsonp=window.webpackJsonp||[]).push([[275],{749:function(t,s,a){"use strict";a.r(s);var n=a(7),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"使用selenium抓取网页动态内容"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用selenium抓取网页动态内容"}},[t._v("#")]),t._v(" 使用Selenium抓取网页动态内容")]),t._v(" "),s("p",[t._v("根据权威机构发布的全球互联网可访问性审计报告，全球约有四分之三的网站其内容或部分内容是通过JavaScript动态生成的，这就意味着在浏览器窗口中“查看网页源代码”时无法在HTML代码中找到这些内容，也就是说我们之前用的抓取数据的方式无法正常运转了。解决这样的问题基本上有两种方案，一是获取提供动态内容的数据接口，这种方式也适用于抓取手机 App 的数据；另一种是通过自动化测试工具 Selenium 运行浏览器获取渲染后的动态内容。对于第一种方案，我们可以使用浏览器的“开发者工具”或者更为专业的抓包工具（如：Charles、Fiddler、Wireshark等）来获取到数据接口，后续的操作跟上一个章节中讲解的获取“360图片”网站的数据是一样的，这里我们不再进行赘述。这一章我们重点讲解如何使用自动化测试工具 Selenium 来获取网站的动态内容。")]),t._v(" "),s("h3",{attrs:{id:"selenium-介绍"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#selenium-介绍"}},[t._v("#")]),t._v(" Selenium 介绍")]),t._v(" "),s("p",[t._v("Selenium 是一个自动化测试工具，利用它可以驱动浏览器执行特定的行为，最终帮助爬虫开发者获取到网页的动态内容。简单的说，只要我们在浏览器窗口中能够看到的内容，都可以使用 Selenium 获取到，对于那些使用了 JavaScript 动态渲染技术的网站，Selenium 会是一个重要的选择。下面，我们还是以 Chrome 浏览器为例，来讲解 Selenium 的用法，大家需要先安装 Chrome 浏览器并下载它的驱动。Chrome 浏览器的驱动程序可以在"),s("a",{attrs:{href:"https://chromedriver.chromium.org/downloads",target:"_blank",rel:"noopener noreferrer"}},[t._v("ChromeDriver官网"),s("OutboundLink")],1),t._v("进行下载，驱动的版本要跟浏览器的版本对应，如果没有完全对应的版本，就选择版本代号最为接近的版本。")]),t._v(" "),s("img",{staticStyle:{zoom:"35%"},attrs:{src:"https://gitee.com/jackfrued/mypic/raw/master/20220310134558.png"}}),t._v(" "),s("h3",{attrs:{id:"使用selenium"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用selenium"}},[t._v("#")]),t._v(" 使用Selenium")]),t._v(" "),s("p",[t._v("我们可以先通过"),s("code",[t._v("pip")]),t._v("来安装 Selenium，命令如下所示。")]),t._v(" "),s("div",{staticClass:"language-Shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("pip "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" selenium\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("h4",{attrs:{id:"加载页面"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#加载页面"}},[t._v("#")]),t._v(" 加载页面")]),t._v(" "),s("p",[t._v("接下来，我们通过下面的代码驱动 Chrome 浏览器打开百度。")]),t._v(" "),s("div",{staticClass:"language-Python line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" selenium "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" webdriver\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 创建Chrome浏览器对象")]),t._v("\nbrowser "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" webdriver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Chrome"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 加载指定的页面")]),t._v("\nbrowser"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("get"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'https://www.baidu.com/'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br")])]),s("p",[t._v("如果不愿意使用 Chrome 浏览器，也可以修改上面的代码操控其他浏览器，只需创建对应的浏览器对象（如 Firefox、Safari 等）即可。运行上面的程序，如果看到如下所示的错误提示，那是说明我们还没有将 Chrome 浏览器的驱动添加到 PATH 环境变量中，也没有在程序中指定 Chrome 浏览器驱动所在的位置。")]),t._v(" "),s("div",{staticClass:"language-Shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("selenium.common.exceptions.WebDriverException: Message: "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'chromedriver'")]),t._v(" executable needs to be "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token environment constant"}},[t._v("PATH")]),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v(" Please see https://sites.google.com/a/chromium.org/chromedriver/home\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("解决这个问题的办法有三种：")]),t._v(" "),s("ol",[s("li",[s("p",[t._v("将下载的 ChromeDriver 放到已有的 PATH 环境变量下，建议直接跟 Python 解释器放在同一个目录，因为之前安装 Python 的时候我们已经将 Python 解释器的路径放到 PATH 环境变量中了。")])]),t._v(" "),s("li",[s("p",[t._v("将 ChromeDriver 放到项目虚拟环境下的 "),s("code",[t._v("bin")]),t._v(" 文件夹中（Windows 系统对应的目录是 "),s("code",[t._v("Scripts")]),t._v("），这样 ChromeDriver 就跟虚拟环境下的 Python 解释器在同一个位置，肯定是能够找到的。")])]),t._v(" "),s("li",[s("p",[t._v("修改上面的代码，在创建 Chrome 对象时，通过"),s("code",[t._v("service")]),t._v("参数配置"),s("code",[t._v("Service")]),t._v("对象，并通过创建"),s("code",[t._v("Service")]),t._v("对象的"),s("code",[t._v("executable_path")]),t._v("参数指定 ChromeDriver 所在的位置，如下所示：")]),t._v(" "),s("div",{staticClass:"language-Python line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" selenium "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" webdriver\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" selenium"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("webdriver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("chrome"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("service "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Service\n\nbrowser "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" webdriver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Chrome"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("service"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("Service"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("executable_path"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'venv/bin/chromedriver'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nbrowser"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("get"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'https://www.baidu.com/'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br")])])])]),t._v(" "),s("h4",{attrs:{id:"查找元素和模拟用户行为"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#查找元素和模拟用户行为"}},[t._v("#")]),t._v(" 查找元素和模拟用户行为")]),t._v(" "),s("p",[t._v("接下来，我们可以尝试模拟用户在百度首页的文本框输入搜索关键字并点击“百度一下”按钮。在完成页面加载后，可以通过"),s("code",[t._v("Chrome")]),t._v("对象的"),s("code",[t._v("find_element")]),t._v("和"),s("code",[t._v("find_elements")]),t._v("方法来获取页面元素，Selenium 支持多种获取元素的方式，包括：CSS 选择器、XPath、元素名字（标签名）、元素 ID、类名等，前者可以获取单个页面元素（"),s("code",[t._v("WebElement")]),t._v("对象），后者可以获取多个页面元素构成的列表。获取到"),s("code",[t._v("WebElement")]),t._v("对象以后，可以通过"),s("code",[t._v("send_keys")]),t._v("来模拟用户输入行为，可以通过"),s("code",[t._v("click")]),t._v("来模拟用户点击操作，代码如下所示。")]),t._v(" "),s("div",{staticClass:"language-Python line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" selenium "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" webdriver\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" selenium"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("webdriver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("common"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("by "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" By\n\nbrowser "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" webdriver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Chrome"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nbrowser"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("get"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'https://www.baidu.com/'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 通过元素ID获取元素")]),t._v("\nkw_input "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" browser"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("find_element"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("By"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ID"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'kw'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 模拟用户输入行为")]),t._v("\nkw_input"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("send_keys"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Python'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 通过CSS选择器获取元素")]),t._v("\nsu_button "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" browser"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("find_element"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("By"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("CSS_SELECTOR"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'#su'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 模拟用户点击行为")]),t._v("\nsu_button"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("click"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br")])]),s("p",[t._v("如果要执行一个系列动作，例如模拟拖拽操作，可以创建"),s("code",[t._v("ActionChains")]),t._v("对象，有兴趣的读者可以自行研究。")]),t._v(" "),s("h4",{attrs:{id:"隐式等待和显式等待"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#隐式等待和显式等待"}},[t._v("#")]),t._v(" 隐式等待和显式等待")]),t._v(" "),s("p",[t._v("这里还有一个细节需要大家知道，网页上的元素可能是动态生成的，在我们使用"),s("code",[t._v("find_element")]),t._v("或"),s("code",[t._v("find_elements")]),t._v("方法获取的时候，可能还没有完成渲染，这时会引发"),s("code",[t._v("NoSuchElementException")]),t._v("错误。为了解决这个问题，我们可以使用隐式等待的方式，通过设置等待时间让浏览器完成对页面元素的渲染。除此之外，我们还可以使用显示等待，通过创建"),s("code",[t._v("WebDriverWait")]),t._v("对象，并设置等待时间和条件，当条件没有满足时，我们可以先等待再尝试进行后续的操作，具体的代码如下所示。")]),t._v(" "),s("div",{staticClass:"language-Python line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" selenium "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" webdriver\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" selenium"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("webdriver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("common"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("by "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" By\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" selenium"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("webdriver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("support "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" expected_conditions\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" selenium"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("webdriver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("support"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("wait "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" WebDriverWait\n\nbrowser "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" webdriver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Chrome"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 设置浏览器窗口大小")]),t._v("\nbrowser"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("set_window_size"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1200")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("800")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nbrowser"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("get"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'https://www.baidu.com/'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 设置隐式等待时间为10秒")]),t._v("\nbrowser"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("implicitly_wait"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nkw_input "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" browser"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("find_element"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("By"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ID"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'kw'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nkw_input"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("send_keys"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Python'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nsu_button "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" browser"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("find_element"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("By"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("CSS_SELECTOR"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'#su'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nsu_button"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("click"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 创建显示等待对象")]),t._v("\nwait_obj "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" WebDriverWait"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("browser"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 设置等待条件（等搜索结果的div出现）")]),t._v("\nwait_obj"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("until"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    expected_conditions"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("presence_of_element_located"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("By"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("CSS_SELECTOR"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'#content_left'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 截屏")]),t._v("\nbrowser"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("get_screenshot_as_file"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'python_result.png'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br"),s("span",{staticClass:"line-number"},[t._v("25")]),s("br")])]),s("p",[t._v("上面设置的等待条件"),s("code",[t._v("presence_of_element_located")]),t._v("表示等待指定元素出现，下面的表格列出了常用的等待条件及其含义。")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("等待条件")]),t._v(" "),s("th",[t._v("具体含义")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[s("code",[t._v("title_is / title_contains")])]),t._v(" "),s("td",[t._v("标题是指定的内容 / 标题包含指定的内容")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("visibility_of")])]),t._v(" "),s("td",[t._v("元素可见")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("presence_of_element_located")])]),t._v(" "),s("td",[t._v("定位的元素加载完成")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("visibility_of_element_located")])]),t._v(" "),s("td",[t._v("定位的元素变得可见")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("invisibility_of_element_located")])]),t._v(" "),s("td",[t._v("定位的元素变得不可见")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("presence_of_all_elements_located")])]),t._v(" "),s("td",[t._v("定位的所有元素加载完成")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("text_to_be_present_in_element")])]),t._v(" "),s("td",[t._v("元素包含指定的内容")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("text_to_be_present_in_element_value")])]),t._v(" "),s("td",[t._v("元素的"),s("code",[t._v("value")]),t._v("属性包含指定的内容")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("frame_to_be_available_and_switch_to_it")])]),t._v(" "),s("td",[t._v("载入并切换到指定的内部窗口")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("element_to_be_clickable")])]),t._v(" "),s("td",[t._v("元素可点击")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("element_to_be_selected")])]),t._v(" "),s("td",[t._v("元素被选中")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("element_located_to_be_selected")])]),t._v(" "),s("td",[t._v("定位的元素被选中")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("alert_is_present")])]),t._v(" "),s("td",[t._v("出现 Alert 弹窗")])])])]),t._v(" "),s("h4",{attrs:{id:"执行javascript代码"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#执行javascript代码"}},[t._v("#")]),t._v(" 执行JavaScript代码")]),t._v(" "),s("p",[t._v("对于使用瀑布式加载的页面，如果希望在浏览器窗口中加载更多的内容，可以通过浏览器对象的"),s("code",[t._v("execute_scripts")]),t._v("方法执行 JavaScript 代码来实现。对于一些高级的爬取操作，也很有可能会用到类似的操作，如果你的爬虫代码需要 JavaScript 的支持，建议先对 JavaScript 进行适当的了解，尤其是 JavaScript 中的 BOM 和 DOM 操作。我们在上面的代码中截屏之前加入下面的代码，这样就可以利用 JavaScript 将网页滚到最下方。")]),t._v(" "),s("div",{staticClass:"language-Python line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 执行JavaScript代码")]),t._v("\nbrowser"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("execute_script"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'document.documentElement.scrollTop = document.documentElement.scrollHeight'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br")])]),s("h4",{attrs:{id:"selenium反爬的破解"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#selenium反爬的破解"}},[t._v("#")]),t._v(" Selenium反爬的破解")]),t._v(" "),s("p",[t._v("有一些网站专门针对 Selenium 设置了反爬措施，因为使用 Selenium 驱动的浏览器，在控制台中可以看到如下所示的"),s("code",[t._v("webdriver")]),t._v("属性值为"),s("code",[t._v("true")]),t._v("，如果要绕过这项检查，可以在加载页面之前，先通过执行 JavaScript 代码将其修改为"),s("code",[t._v("undefined")]),t._v("。")]),t._v(" "),s("img",{staticStyle:{zoom:"50%"},attrs:{src:"https://gitee.com/jackfrued/mypic/raw/master/20220310154246.png"}}),t._v(" "),s("p",[t._v("另一方面，我们还可以将浏览器窗口上的“Chrome正受到自动测试软件的控制”隐藏掉，完整的代码如下所示。")]),t._v(" "),s("div",{staticClass:"language-Python line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 创建Chrome参数对象")]),t._v("\noptions "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" webdriver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ChromeOptions"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 添加试验性参数")]),t._v("\noptions"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("add_experimental_option"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'excludeSwitches'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'enable-automation'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\noptions"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("add_experimental_option"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'useAutomationExtension'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("False")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 创建Chrome浏览器对象并传入参数")]),t._v("\nbrowser "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" webdriver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Chrome"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("options"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("options"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 执行Chrome开发者协议命令（在加载页面时执行指定的JavaScript代码）")]),t._v("\nbrowser"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("execute_cdp_cmd"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Page.addScriptToEvaluateOnNewDocument'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'source'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Object.defineProperty(navigator, \"webdriver\", {get: () => undefined})'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nbrowser"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("set_window_size"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1200")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("800")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nbrowser"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("get"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'https://www.baidu.com/'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br")])]),s("h4",{attrs:{id:"无头浏览器"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#无头浏览器"}},[t._v("#")]),t._v(" 无头浏览器")]),t._v(" "),s("p",[t._v("很多时候，我们在爬取数据时并不需要看到浏览器窗口，只要有 Chrome 浏览器以及对应的驱动程序，我们的爬虫就能够运转起来。如果不想看到浏览器窗口，我们可以通过下面的方式设置使用无头浏览器。")]),t._v(" "),s("div",{staticClass:"language-Python line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[t._v("options "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" webdriver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ChromeOptions"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\noptions"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("add_argument"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'--headless'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nbrowser "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" webdriver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Chrome"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("options"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("options"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br")])]),s("h3",{attrs:{id:"api参考"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#api参考"}},[t._v("#")]),t._v(" API参考")]),t._v(" "),s("p",[t._v("Selenium 相关的知识还有很多，我们在此就不一一赘述了，下面为大家罗列一些浏览器对象和"),s("code",[t._v("WebElement")]),t._v("对象常用的属性和方法。具体的内容大家还可以参考 Selenium "),s("a",{attrs:{href:"https://selenium-python-zh.readthedocs.io/en/latest/index.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("官方文档的中文翻译"),s("OutboundLink")],1),t._v("。")]),t._v(" "),s("h4",{attrs:{id:"浏览器对象"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#浏览器对象"}},[t._v("#")]),t._v(" 浏览器对象")]),t._v(" "),s("p",[t._v("表1. 常用属性")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("属性名")]),t._v(" "),s("th",[t._v("描述")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[s("code",[t._v("current_url")])]),t._v(" "),s("td",[t._v("当前页面的URL")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("current_window_handle")])]),t._v(" "),s("td",[t._v("当前窗口的句柄（引用）")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("name")])]),t._v(" "),s("td",[t._v("浏览器的名称")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("orientation")])]),t._v(" "),s("td",[t._v("当前设备的方向（横屏、竖屏）")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("page_source")])]),t._v(" "),s("td",[t._v("当前页面的源代码（包括动态内容）")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("title")])]),t._v(" "),s("td",[t._v("当前页面的标题")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("window_handles")])]),t._v(" "),s("td",[t._v("浏览器打开的所有窗口的句柄")])])])]),t._v(" "),s("p",[t._v("表2. 常用方法")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("方法名")]),t._v(" "),s("th",[t._v("描述")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[s("code",[t._v("back")]),t._v(" / "),s("code",[t._v("forward")])]),t._v(" "),s("td",[t._v("在浏览历史记录中后退/前进")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("close")]),t._v(" / "),s("code",[t._v("quit")])]),t._v(" "),s("td",[t._v("关闭当前浏览器窗口 / 退出浏览器实例")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("get")])]),t._v(" "),s("td",[t._v("加载指定 URL 的页面到浏览器中")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("maximize_window")])]),t._v(" "),s("td",[t._v("将浏览器窗口最大化")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("refresh")])]),t._v(" "),s("td",[t._v("刷新当前页面")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("set_page_load_timeout")])]),t._v(" "),s("td",[t._v("设置页面加载超时时间")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("set_script_timeout")])]),t._v(" "),s("td",[t._v("设置 JavaScript 执行超时时间")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("implicit_wait")])]),t._v(" "),s("td",[t._v("设置等待元素被找到或目标指令完成")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("get_cookie")]),t._v(" / "),s("code",[t._v("get_cookies")])]),t._v(" "),s("td",[t._v("获取指定的Cookie / 获取所有Cookie")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("add_cookie")])]),t._v(" "),s("td",[t._v("添加 Cookie 信息")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("delete_cookie")]),t._v(" / "),s("code",[t._v("delete_all_cookies")])]),t._v(" "),s("td",[t._v("删除指定的 Cookie / 删除所有 Cookie")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("find_element")]),t._v(" / "),s("code",[t._v("find_elements")])]),t._v(" "),s("td",[t._v("查找单个元素 / 查找一系列元素")])])])]),t._v(" "),s("h4",{attrs:{id:"webelement对象"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#webelement对象"}},[t._v("#")]),t._v(" WebElement对象")]),t._v(" "),s("p",[t._v("表1. WebElement常用属性")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("属性名")]),t._v(" "),s("th",[t._v("描述")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[s("code",[t._v("location")])]),t._v(" "),s("td",[t._v("元素的位置")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("size")])]),t._v(" "),s("td",[t._v("元素的尺寸")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("text")])]),t._v(" "),s("td",[t._v("元素的文本内容")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("id")])]),t._v(" "),s("td",[t._v("元素的 ID")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("tag_name")])]),t._v(" "),s("td",[t._v("元素的标签名")])])])]),t._v(" "),s("p",[t._v("表2. 常用方法")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("方法名")]),t._v(" "),s("th",[t._v("描述")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[s("code",[t._v("clear")])]),t._v(" "),s("td",[t._v("清空文本框或文本域中的内容")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("click")])]),t._v(" "),s("td",[t._v("点击元素")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("get_attribute")])]),t._v(" "),s("td",[t._v("获取元素的属性值")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("is_displayed")])]),t._v(" "),s("td",[t._v("判断元素对于用户是否可见")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("is_enabled")])]),t._v(" "),s("td",[t._v("判断元素是否处于可用状态")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("is_selected")])]),t._v(" "),s("td",[t._v("判断元素（单选框和复选框）是否被选中")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("send_keys")])]),t._v(" "),s("td",[t._v("模拟输入文本")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("submit")])]),t._v(" "),s("td",[t._v("提交表单")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("value_of_css_property")])]),t._v(" "),s("td",[t._v("获取指定的CSS属性值")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("find_element")]),t._v(" / "),s("code",[t._v("find_elements")])]),t._v(" "),s("td",[t._v("获取单个子元素 / 获取一系列子元素")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("screenshot")])]),t._v(" "),s("td",[t._v("为元素生成快照")])])])]),t._v(" "),s("h3",{attrs:{id:"简单案例"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#简单案例"}},[t._v("#")]),t._v(" 简单案例")]),t._v(" "),s("p",[t._v("下面的例子演示了如何使用 Selenium 从“360图片”网站搜索和下载图片。")]),t._v(" "),s("div",{staticClass:"language-Python line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" os\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" time\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" concurrent"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("futures "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" ThreadPoolExecutor\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" requests\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" selenium "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" webdriver\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" selenium"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("webdriver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("common"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("by "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" By\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" selenium"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("webdriver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("common"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("keys "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Keys\n\nDOWNLOAD_PATH "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'images/'")]),t._v("\n\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("download_picture")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("picture_url"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("str")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[t._v('"""\n    下载保存图片\n    :param picture_url: 图片的URL\n    """')]),t._v("\n    filename "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" picture_url"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("picture_url"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("rfind"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    resp "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" requests"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("get"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("picture_url"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("with")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("open")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("os"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("join"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("DOWNLOAD_PATH"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" filename"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'wb'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("file")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("file")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("write"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("resp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("content"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("not")]),t._v(" os"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exists"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("DOWNLOAD_PATH"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    os"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("makedirs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("DOWNLOAD_PATH"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nbrowser "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" webdriver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Chrome"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nbrowser"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("get"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'https://image.so.com/z?ch=beauty'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nbrowser"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("implicitly_wait"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nkw_input "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" browser"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("find_element"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("By"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("CSS_SELECTOR"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'input[name=q]'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nkw_input"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("send_keys"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'苍老师'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nkw_input"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("send_keys"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Keys"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ENTER"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" _ "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("range")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    browser"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("execute_script"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'document.documentElement.scrollTop = document.documentElement.scrollHeight'")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    time"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sleep"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nimgs "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" browser"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("find_elements"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("By"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("CSS_SELECTOR"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'div.waterfall img'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("with")]),t._v(" ThreadPoolExecutor"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("max_workers"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("32")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),t._v(" pool"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" img "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" imgs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        pic_url "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" img"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("get_attribute"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'src'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        pool"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("submit"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("download_picture"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" pic_url"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br"),s("span",{staticClass:"line-number"},[t._v("25")]),s("br"),s("span",{staticClass:"line-number"},[t._v("26")]),s("br"),s("span",{staticClass:"line-number"},[t._v("27")]),s("br"),s("span",{staticClass:"line-number"},[t._v("28")]),s("br"),s("span",{staticClass:"line-number"},[t._v("29")]),s("br"),s("span",{staticClass:"line-number"},[t._v("30")]),s("br"),s("span",{staticClass:"line-number"},[t._v("31")]),s("br"),s("span",{staticClass:"line-number"},[t._v("32")]),s("br"),s("span",{staticClass:"line-number"},[t._v("33")]),s("br"),s("span",{staticClass:"line-number"},[t._v("34")]),s("br"),s("span",{staticClass:"line-number"},[t._v("35")]),s("br"),s("span",{staticClass:"line-number"},[t._v("36")]),s("br"),s("span",{staticClass:"line-number"},[t._v("37")]),s("br"),s("span",{staticClass:"line-number"},[t._v("38")]),s("br"),s("span",{staticClass:"line-number"},[t._v("39")]),s("br"),s("span",{staticClass:"line-number"},[t._v("40")]),s("br"),s("span",{staticClass:"line-number"},[t._v("41")]),s("br")])]),s("p",[t._v("运行上面的代码，检查指定的目录下是否下载了根据关键词搜索到的图片。")])])}),[],!1,null,null,null);s.default=e.exports}}]);