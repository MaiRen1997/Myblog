---
title: ReactåŸºç¡€
date: 2023-12-19 13:51:49
permalink: /pages/e04516/
author:
  name: Riverside Joy
  link: https://github.com/MaiRen1997
categories:
  - å‰ç«¯
  - Reactæ¡†æ¶
tags:
  - 
---
## åˆ›å»ºé¡¹ç›®

### å®‰è£…create-react-app

```sh
$ npm install -g create-react-app
```

###  åˆ›å»ºé¡¹ç›®

```sh
$ create-react-app your-app #æ³¨æ„å‘½åæ–¹å¼
```

:::tip

- é»˜è®¤åˆ›å»ºçš„æ˜¯jsé¡¹ç›®ï¼Œå¦‚æœéœ€è¦ä½¿ç”¨tsé¡¹ç›®ï¼Œå¯ä»¥åŠ ä¸Štemplate

  ```sh
  $ create-react-app your-app -template typescript
  ```

- å¦‚æœä¸æƒ³å…¨å±€å®‰è£…ï¼Œå¯ä»¥ä½¿ç”¨npx

  ```sh
  $ npx create-react-app your-app	ä¹Ÿå¯ä»¥å®ç°ç›¸åŒçš„æ•ˆæœ
  ```

:::

## ä½¿ç”¨yarn

- å®‰è£… npm install -g yarn
- æŸ¥çœ‹ç‰ˆæœ¬ yarn --version
- æŸ¥çœ‹é•œåƒ yarn config get registry
- è®¾ç½®æ·˜å®æº yarn config set registry https://registry.npm.taobao.org -g
- å®‰è£…ä¾èµ– yarn add åŒ…å

## Reactçš„ç‰¹ç‚¹å’Œä¼˜åŠ¿

**(1) è™šæ‹ŸDOM**

æˆ‘ä»¬ä»¥å‰æ“ä½œdomçš„æ–¹å¼æ˜¯é€šè¿‡document.getElementById()çš„æ–¹å¼ï¼Œè¿™æ ·çš„è¿‡ç¨‹å®é™…ä¸Šæ˜¯å…ˆå»è¯»å–htmlçš„domç»“æ„ï¼Œå°†ç»“æ„è½¬æ¢æˆå˜é‡ï¼Œå†è¿›è¡Œæ“ä½œã€‚è€Œreactjså®šä¹‰äº†ä¸€å¥—å˜é‡å½¢å¼çš„domæ¨¡å‹ï¼Œä¸€åˆ‡æ“ä½œå’Œæ¢ç®—ç›´æ¥åœ¨å˜é‡ä¸­ï¼Œè¿™æ ·å‡å°‘äº†æ“ä½œçœŸå®domï¼Œæ€§èƒ½çœŸå®ç›¸å½“çš„é«˜ï¼Œå’Œä¸»æµMVCæ¡†æ¶æœ‰æœ¬è´¨çš„åŒºåˆ«ï¼Œå¹¶ä¸å’Œdomæ‰“äº¤é“

**(2) ç»„ä»¶ç³»ç»Ÿ**

reactæœ€æ ¸å¿ƒçš„æ€æƒ³æ˜¯å°†é¡µé¢ä¸­ä»»ä½•ä¸€ä¸ªåŒºåŸŸæˆ–è€…å…ƒç´ éƒ½å¯ä»¥çœ‹åšä¸€ä¸ªç»„ä»¶ component

é‚£ä¹ˆä»€ä¹ˆæ˜¯ç»„ä»¶å‘¢ï¼Ÿ

ç»„ä»¶æŒ‡çš„å°±æ˜¯åŒæ—¶åŒ…å«äº†htmlã€cssã€jsã€imageå…ƒç´ çš„èšåˆä½“

ä½¿ç”¨reactå¼€å‘çš„æ ¸å¿ƒå°±æ˜¯å°†é¡µé¢æ‹†åˆ†æˆè‹¥å¹²ä¸ªç»„ä»¶ï¼Œå¹¶ä¸”reactä¸€ä¸ªç»„ä»¶ä¸­åŒæ—¶è€¦åˆäº†cssã€jsã€imageï¼Œè¿™ç§æ¨¡å¼æ•´ä¸ªé¢ è¦†äº†è¿‡å»çš„ä¼ ç»Ÿçš„æ–¹å¼

**(3) å•å‘æ•°æ®æµ**

å…¶å®reactjsçš„æ ¸å¿ƒå†…å®¹å°±æ˜¯æ•°æ®ç»‘å®šï¼Œæ‰€è°“æ•°æ®ç»‘å®šæŒ‡çš„æ˜¯åªè¦å°†ä¸€äº›æœåŠ¡ç«¯çš„æ•°æ®å’Œå‰ç«¯é¡µé¢ç»‘å®šå¥½ï¼Œå¼€å‘è€…åªå…³æ³¨å®ç°ä¸šåŠ¡å°±è¡Œäº†

**(4) JSX  è¯­æ³•**

åœ¨vueä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨renderå‡½æ•°æ¥æ„å»ºç»„ä»¶çš„domç»“æ„æ€§èƒ½è¾ƒé«˜ï¼Œå› ä¸ºçœå»äº†æŸ¥æ‰¾å’Œç¼–è¯‘æ¨¡æ¿çš„è¿‡ç¨‹ï¼Œä½†æ˜¯åœ¨renderä¸­åˆ©ç”¨createElementåˆ›å»ºç»“æ„çš„æ—¶å€™ä»£ç å¯è¯»æ€§è¾ƒä½ï¼Œè¾ƒä¸ºå¤æ‚ï¼Œæ­¤æ—¶å¯ä»¥åˆ©ç”¨jsxè¯­æ³•æ¥åœ¨renderä¸­åˆ›å»ºdomï¼Œè§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä½†æ˜¯å‰ææ˜¯éœ€è¦ä½¿ç”¨å·¥å…·æ¥ç¼–è¯‘jsx

## diffç®—æ³•

### ä»€ä¹ˆæ˜¯diffç®—æ³•

diffç®—æ³•æ˜¯`è°ƒå’Œçš„å…·ä½“å®ç°`

### ä»€ä¹ˆæ˜¯è°ƒå’Œ

å°†Virtual Dom æ ‘è½¬æ¢æˆactual DOMæ ‘çš„`æœ€å°‘æ“ä½œçš„è¿‡ç¨‹`ï¼Œç§°ä¸ºè°ƒå’Œ

### diffç®—æ³•çš„ä½œç”¨

- è®¡ç®—å‡ºVirtual DOMä¸­çœŸæ­£å˜åŒ–çš„éƒ¨åˆ†
- å¹¶åªå¯¹è¯¥éƒ¨åˆ†è¿›è¡ŒåŸç”ŸDOMæ“ä½œï¼Œè€Œéé‡æ–°æ¸²æŸ“æ•´ä¸ªé¡µé¢

### diffç­–ç•¥

1. åŒçº§æ¯”è¾ƒ

   Web UI ä¸­DOMèŠ‚ç‚¹è·¨å±‚çº§çš„ç§»åŠ¨æ“ä½œç‰¹åˆ«å°‘ï¼Œå¯ä»¥å¿½ç•¥ä¸è®¡

2. ç»„ä»¶ç­–ç•¥

   - æ‹¥æœ‰ç›¸åŒç±»çš„ä¸¤ä¸ªç»„ä»¶ï¼Œç”Ÿæˆç›¸ä¼¼çš„æ ‘å½¢ç»“æ„
   - æ‹¥æœ‰ä¸åŒç±»çš„ä¸¤ä¸ªç»„ä»¶ï¼Œç”Ÿæˆä¸åŒçš„æ ‘å½¢ç»“æ„

3. keyæ¯”è¾ƒ

   å¯¹äºåŒä¸€å±‚çº§çš„ä¸€ç»„å­èŠ‚ç‚¹ï¼Œé€šè¿‡å”¯ä¸€idåŒºåˆ†

### ä¸Šè¿°ç»„ä»¶ç­–ç•¥åˆ†ç±»

1. åŒä¸€ç±»å‹çš„ä¸¤ä¸ªç»„ä»¶ï¼ŒæŒ‰åŸç­–ç•¥(å±‚çº§æ¯”è¾ƒ)ç»§ç»­æ¯”è¾ƒVirtual DOMæ ‘å³å¯
2. åŒä¸€ç±»å‹çš„ä¸¤ä¸ªç»„ä»¶ï¼Œç»„ä»¶Aå˜åŒ–ä¸ºç»„ä»¶Bæ—¶ï¼Œå¯èƒ½Virtual Domæ²¡æœ‰ä»»ä½•å˜åŒ–ã€‚ç”¨æˆ·å¯ä»¥é€šè¿‡shouldComponentUpdate()æ¥åˆ¤æ–­æ˜¯å¦éœ€è¦ æ›´æ–°
3. ä¸åŒç±»å‹çš„ç»„ä»¶ï¼Œå°†ä¸€ä¸ª(å°†è¢«æ”¹å˜çš„)ç»„ä»¶åˆ¤æ–­ä¸ºdirty component(è„ç»„ä»¶)ï¼Œä»è€Œæ›¿æ¢æ•´ä¸ªç»„ä»¶çš„æ‰€æœ‰èŠ‚ç‚¹

## ç®€å•çš„reactä»£ç 

:::tip

ReactDOMé‡Œæœ‰ä¸€ä¸ªrenderæ–¹æ³•ï¼ŒåŠŸèƒ½å°±æ˜¯æŠŠç»„ä»¶æ¸²æŸ“å¹¶ä¸”æ„é€  DOM æ ‘ï¼Œç„¶åæ’å…¥åˆ°é¡µé¢ä¸ŠæŸä¸ªç‰¹å®šçš„å…ƒç´ ä¸Š
`renderå‡½æ•°`é‡Œé¢`æœ‰ä¸¤ä¸ªå‚æ•°`ï¼Œ`ç¬¬ä¸€ä¸ªæ˜¯è¦æ¸²æŸ“çš„å…ƒç´ `ï¼Œ`ç¬¬äºŒä¸ªæ˜¯éœ€è¦æ¸²æŸ“åœ¨å“ªä¸ªåœ°æ–¹`

:::

```tsx
// ä» react çš„åŒ…å½“ä¸­å¼•å…¥äº† Reactã€‚åªè¦ä½ è¦å†™ React.js ç»„ä»¶å°±å¿…é¡»å¼•å…¥React, å› ä¸ºreacté‡Œæœ‰ä¸€ç§è¯­æ³•å«JSXï¼Œç¨åä¼šè®²åˆ°JSXï¼Œè¦å†™JSXï¼Œå°±å¿…é¡»å¼•å…¥React
import React from 'react'
// ReactDOM å¯ä»¥å¸®åŠ©æˆ‘ä»¬æŠŠ React ç»„ä»¶æ¸²æŸ“åˆ°é¡µé¢ä¸Šå»ï¼Œæ²¡æœ‰å…¶å®ƒçš„ä½œç”¨äº†ã€‚å®ƒæ˜¯ä» react-dom ä¸­å¼•å…¥çš„ï¼Œè€Œä¸æ˜¯ä» react å¼•å…¥ã€‚
import ReactDOM from 'react-dom'

// ReactDOMé‡Œæœ‰ä¸€ä¸ªrenderæ–¹æ³•ï¼ŒåŠŸèƒ½å°±æ˜¯æŠŠç»„ä»¶æ¸²æŸ“å¹¶ä¸”æ„é€  DOM æ ‘ï¼Œç„¶åæ’å…¥åˆ°é¡µé¢ä¸ŠæŸä¸ªç‰¹å®šçš„å…ƒç´ ä¸Š
// é‡Œé¢æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªæ˜¯è¦æ¸²æŸ“çš„å…ƒç´ ï¼Œç¬¬äºŒä¸ªæ˜¯éœ€è¦æ¸²æŸ“åœ¨å“ªä¸ªåœ°æ–¹
ReactDOM.render(
// è¿™é‡Œå°±æ¯”è¾ƒå¥‡æ€ªäº†ï¼Œå®ƒå¹¶ä¸æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œçœ‹èµ·æ¥åƒæ˜¯çº¯ HTML ä»£ç å†™åœ¨ JavaScript ä»£ç é‡Œé¢ã€‚è¯­æ³•é”™è¯¯å—ï¼Ÿè¿™å¹¶ä¸æ˜¯åˆæ³•çš„ JavaScript ä»£ç , â€œåœ¨ JavaScript å†™çš„æ ‡ç­¾çš„â€è¯­æ³•å« JSX- JavaScript XMLã€‚
  <h1>æ¬¢è¿è¿›å…¥Reactçš„ä¸–ç•Œ</h1>,
// æ¸²æŸ“åˆ°å“ªé‡Œ
  document.getElementById('root')
)
```

## reactå…ƒç´ ä¸ç»„ä»¶

:::tip

react-domåœ¨æ•´ä¸ªé¡¹ç›®ä¸­ï¼Œåªéœ€è¦åœ¨index.tsxä¸­å¼•å…¥ä¸€æ¬¡å°±å¤Ÿäº†ï¼Œå…¶ä»–åœ°æ–¹ä¸éœ€è¦å¼•å…¥

:::

### jsä¸­æ’å…¥html(jsxè¯­æ³•)

#### ç›´æ¥åœ¨renderå‡½æ•°ä¸­åŠ å…¥htmlæ ‡ç­¾

```react
import React from 'react'
import ReactDOM from 'react-dom'

ReactDOM.render(
    <div>è¿™æ˜¯reacté¡¹ç›®</div>,
    document.querySelector('#root')
)
```

#### ä½¿ç”¨å˜é‡

```react
import React from 'react'
import ReactDOM from 'react-dom'

const app = <div>è¿™æ˜¯ç¬¬äºŒä¸ªreactæµ‹è¯•é¡¹ç›®</div>
ReactDOM.render(
    app,
    document.querySelector('#root')
)
```

#### ä½¿ç”¨ç±»ç»„ä»¶

```react
import React from 'react';
import ReactDOM from 'react-dom';
class App extends React.Component {
  render() {
    return (<div>my name is {this.props.name} </div>)
  }
}
ReactDOM.render(
  <App/>, // ä½¿ç”¨å¯¹è±¡ä¼ å‚
  document.getElementById('root')
);
```

#### ä½¿ç”¨å‡½æ•°ç»„ä»¶

```react
import ReactDOM from 'react-dom';
const app =() => <div>hello react!</div>
ReactDOM.render(
  app,
  document.getElementById('root')
);
```

### åŒºåˆ«

åœ¨reactä¸­ï¼Œå¤§å°å†™æ•æ„Ÿï¼Œå¤§å†™çš„ä¸ºç»„ä»¶åç§°ï¼Œå°å†™çš„ä¸ºæ ‡ç­¾å…ƒç´ 

1. ç»„ä»¶

   ```tsx
   import React from 'react';
   import ReactDOM from 'react-dom';
   const app = <div>hello react</div> // æ³¨æ„è¿™é‡Œçš„å®šä¹‰æ–¹å¼(ä»¥çº¯htmlå®šä¹‰ï¼Œæ— æ³•ä½¿ç”¨å‡½æ•°å®šä¹‰)
   ReactDOM.render(
     app,
     document.getElementById('root')
   );
   ```

   :::warning

   å¦‚æœå…ƒç´ ï¼Œè¦ä»¥å‡½æ•°çš„å½¢å¼å®šä¹‰ï¼Œåœ¨renderå‡½æ•°é‡Œé¢è¿›è¡Œè°ƒç”¨æ—¶ï¼Œéœ€è¦åŠ ä¸Šå°æ‹¬å·

   ```tsx
   import React from 'react';
   import ReactDOM from 'react-dom';
   const app = () => <div>hello react</div> // æ³¨æ„è¿™é‡Œçš„å®šä¹‰æ–¹å¼(ä»¥çº¯htmlå®šä¹‰ï¼Œæ— æ³•ä½¿ç”¨å‡½æ•°å®šä¹‰)
   ReactDOM.render(
     app(),
     document.getElementById('root')
   );
   ```

   :::

2. å…ƒç´ 

   ```tsx
   import React from 'react';
   import ReactDOM from 'react-dom';
   const App = () => <div>hello react</div> // æ³¨æ„è¿™é‡Œçš„å®šä¹‰æ–¹å¼(ä»¥å‡½æ•°çš„å½¢å¼å®šä¹‰)
   ReactDOM.render(
     <App />,
     document.getElementById('root')
   );
   ```

:::tip åŠ©è®°

å¤§å†™ç»„ä»¶åï¼Œå°å†™htmlæ ‡ç­¾å…ƒç´ 

1. ç»„ä»¶åï¼Œå¯ä»¥ä½¿ç”¨`å‡½æ•°çš„æ–¹å¼`å®šä¹‰,ä¹Ÿå¯ä»¥ä½¿ç”¨`ç±»æ–¹å¼`å®šä¹‰

2. htmlæ ‡ç­¾å…ƒç´ å¯ä»¥`ç›´æ¥è¿”å›html`ï¼Œä¹Ÿå¯ä»¥`ä½¿ç”¨å‡½æ•°ä½œä¸ºè¿”å›å€¼ï¼Œä½†æ˜¯è¿”å›å€¼å¿…é¡»æ˜¯ä¸ªhtmlæ ‡ç­¾`

   ```tsx
   // ç›´æ¥è¿”å›html
   const app = <div>hello word</div>;
   // å®šä¹‰å‡½æ•°å½¢å¼ï¼Œè¿”å›html
   const app = () =><div>hello word</div>;
   ```

   1. ç›´æ¥è¿”å›htmlï¼Œä½¿ç”¨appè¿›è¡Œè°ƒç”¨ ï¼›å¦‚æœå®šä¹‰çš„æ˜¯ä¸ªå‡½æ•°å½¢å¼ï¼Œä½¿ç”¨app()æ–¹å¼è¿›è¡Œè°ƒç”¨
   2. å¦‚æœæ˜¯ç»„ä»¶åï¼Œä½¿ç”¨`< ç»„ä»¶åç§°/>`è°ƒç”¨

> å¦‚æœè¯¥ç»„ä»¶éœ€è¦ä½¿ç”¨å¤šä¸ªæ ‡ç­¾ï¼Œå¯ä»¥åœ¨å¤–å±‚åŒ…è£¹<></>ï¼Œæˆ–è€…ä½¿ç”¨`<Fragment></Fragment>`
>
> ````tsx
> const Componet = () => (<><div>hello React</div><div>hello Word</div></>);
> ````
>
> æ³¨æ„å¦‚æœè¯¥å‡½æ•°ç»„ä»¶ä½œä¸ºå­ç»„ä»¶ï¼Œåç§°ä¸€å®šè¦å¤§å†™ï¼Œå¼•ç”¨æ—¶ï¼Œéœ€è¦æºå¸¦æ ‡ç­¾å
>
> ```tsx
> const app = () =><div><Componet/></div>;
> ```

:::


### ç»„ä»¶ä¼ å‚

#### å‡½æ•°ç»„ä»¶ä¼ å‚

> JSXä¸­ï¼Œå˜é‡ä½¿ç”¨å¤§æ‹¬å·è¿›è¡Œè¯†åˆ«ã€ä½¿ç”¨
>
> åœ¨ { } å¯ä»¥ç›´æ¥å†™jsè¯­å¥

##### ä¼ å•ä¸ªå‚æ•°

å¯ä»¥ç›´æ¥ä½¿ç”¨propæ¥æ”¶

```tsx
import ReactDOM from 'react-dom';
const app =(prop: any) => <div>hello react!{prop}</div>
ReactDOM.render(
  app('test'),
  document.getElementById('root')
);
```

##### ä¼ å¤šä¸ªå‚æ•°

å¯ä»¥ä½¿ç”¨å¯¹è±¡æˆ–è€…æ•°æ®ç­‰å¤æ‚ç±»å‹ä¼ å‚

```tsx
import React from 'react';
import ReactDOM from 'react-dom';
const app =(prop: any) => <div>my name is {prop.name}, I'm {prop.age} age</div>
ReactDOM.render(
  app({name: 'riverside joy', age: 8}), // ä½¿ç”¨å¯¹è±¡ä¼ å‚
  document.getElementById('root')
);
```

##### ä½¿ç”¨ç»„ä»¶å½¢å¼ä¼ å‚

```tsx
import React from 'react';
import ReactDOM from 'react-dom';
const App =(prop: any) => <div>my name is {prop.name}</div>
ReactDOM.render(
  <App name="reverside joy"/>, // ä½¿ç”¨å¯¹è±¡ä¼ å‚
  document.getElementById('root')
);
```

#### ç±»ç»„ä»¶ä¼ å‚

> ç±»ç»„ä»¶ä¸­ï¼Œ**`å¿…é¡»è¦æœ‰renderæ–¹æ³•`**ï¼ŒåŒæ—¶åˆæ˜¯ä¸€ä¸ªç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°

```tsx
import React from 'react';
import ReactDOM from 'react-dom';
// 2.ä½¿ç”¨interfaceå®Œå…¨å£°æ˜å®šä¹‰å±æ€§ç±»å‹
interface MyProps {
	name:string; // å¿…è¦å±æ€§
	age ?: string; //å¯é€‰å±æ€§
	readonly id ?: string; // åªè¯»å±æ€§
}
class App extends React.Component<MyProps> {
  render() {
    return (<div>my name is {this.props.name} </div>)
  }
}
ReactDOM.render(
  <App name="test"/>, // ä½¿ç”¨å¯¹è±¡ä¼ å‚
  document.getElementById('root')
);
```

:::tip åŠ©è®°

1. ä¼ å€¼æ–¹å¼
   1. ï¼Œå°†æ‰€ä¼ å€¼æ”¾åˆ°å¤§æ‹¬å·ä¸­ï¼Œå¦‚æœè¦ä¼ å¤šä¸ªï¼Œå¯ä»¥å°†å€¼ä½œä¸ºå¯¹è±¡ä¼ é€’
   2. ç±»ç»„ä»¶æ”¾åœ¨æ ‡ç­¾å±æ€§ä¸­
2. å–å€¼æ–¹å¼
   1. å‡½æ•°ç»„ä»¶å–å€¼ï¼Œé€šè¿‡prop.å±æ€§å    çš„æ–¹å¼

   2. ç±»ç»„ä»¶å–å€¼ï¼Œé€šè¿‡this.props.å±æ€§å    çš„æ–¹å¼å–å€¼

:::

### ç»„ä»¶åˆ†æ–‡ä»¶

#### ç±»ç»„ä»¶å½¢å¼

1. ç»„ä»¶å†™æ³•

   1. å…ˆå¼•å…¥react
   2. ç„¶åç±»ç»„ä»¶çš„é€šç”¨å†™æ³•(ç›´æ¥è·Ÿå¤§æ‹¬å·)
   3. é‡Œé¢è¦åŒ…å«renderæ–¹æ³•,renderåŒæ—¶ä¹Ÿæ˜¯å¯¿å‘½å‘¨æœŸé’©å­å‡½æ•°(åŒæ—¶renderæ–¹æ³•ä¸­è¦æœ‰return)
   4. `æœ€åè¦ä½¿ç”¨export defaultæš´éœ²å‡ºå»`

   ```tsx
   import React from "react";
   class App extends React.Component {
     render() {
       return(<div>è¿™æ˜¯ç»„ä»¶</div>)
     }
   }
   export default App
   ```

2. å…¥å£æ–‡ä»¶å†™æ³•

   ```tsx
   // index.tsx
   import ReactDOM from 'react-dom';
   import App from './01-get-start/component'; // å¼•å…¥ç»„ä»¶
   ReactDOM.render(
     <App />, // ä½¿ç”¨å¯¹è±¡ä¼ å‚
     document.getElementById('root')
   );
   ```

#### å‡½æ•°ç»„ä»¶å½¢å¼

æ­¤å¤„å°†ä¸¤ä¸ªç»„ä»¶å†™åœ¨ä¸€èµ·äº†ï¼Œåˆ†åˆ«æ˜¯Headerç»„ä»¶å’ŒAppç»„ä»¶

Appç»„ä»¶åˆä½œä¸ºå…¥å£æ–‡ä»¶index.tsxçš„ç»„ä»¶

```tsx
import React from "react";
const Header = () => {
    return(<header>æ˜¯å¤´éƒ¨</header>)
}
class App extends React.Component {
  render() {
    return(
      <Header/ >
    )
  }
}
export default App
```

#### ç»„ä»¶åµŒå¥—

1. æœ€é‡Œé¢çš„ç»„ä»¶

   ```tsx
   import React, {Component} from "react";
   class Header extends Component{
     render() {
       return(<header>å¤´éƒ¨</header>)
     }
   }
   export default Header
   ```

2. å€’æ•°ç¬¬äºŒå±‚ç»„ä»¶

   ```tsx
   import React from "react";
   import Header from './header'
   class App extends React.Component {
     render() {
       return(<Header />)
     }
   }
   export default App
   ```

3. æœ€å¤–å±‚indexå†™æ³•

   ```tsx
   import React from 'react';
   import ReactDOM from 'react-dom';
   import App from './01-get-start/component';
   ReactDOM.render(
     <App />, // ä½¿ç”¨å¯¹è±¡ä¼ å‚
     document.getElementById('root')
   );
   ```

### returnå‡½æ•°ä¸­åŒ…å«å¤šä¸ªdom

:::warning

ç»„ä»¶æ ¹å…ƒç´ åªå…è®¸æœ‰ä¸€ä¸ªï¼Œå¦‚æœéœ€è¦ä½¿ç”¨å¤šä¸ªï¼Œå¯ä»¥åœ¨å¤–å±‚åŒ…è£¹<></>ï¼Œæˆ–è€…ä½¿ç”¨`<Fragment></Fragment>`

Fragmentæ ‡ç­¾éœ€è¦ä»reactä¸­è§£æ„å‡ºæ¥

:::

1. ä½¿ç”¨Fragmentæ ‡ç­¾

   > Tips: Fragmentæ ‡ç­¾ï¼Œè¦ä»reactä¸­è§£æ„å‡ºæ¥

   ```tsx
   import React, {Component, Fragment} from "react";
   class App extends React.Component {
     render() {
       return(
         <Fragment>
           <Header/ >
           <Main />
         </Fragment>
       )
     }
   }
   ```

2. ä½¿ç”¨ç©ºæ ‡ç­¾

   ```tsx
   class App extends React.Component {
     render() {
       return(
         <>
           <Header/ >
           <Main />
         </>
       )
     }
   }
   ```

## Domçš„æ ·å¼

> å¦‚æœä½¿ç”¨typescripté¡¹ç›®ï¼Œå¼•å…¥cssæ–‡ä»¶ï¼Œå¯èƒ½å‡ºç°æ‰¾ä¸åˆ°cssæ–‡ä»¶çš„æƒ…å†µ
>
> è§£å†³æ–¹æ¡ˆï¼š
>
> 1. åˆ›å»º `globals.d.ts `
>
>    ```ts
>    declare module '*.css'
>    ```
>
> 2. æ‰“å¼€tsconfig.json
>
>    ```json
>    "include": ["./**/*.ts"],
>    "exclude":["node_modules/**/*"]
>    ```
>

> æ€»ç»“ï¼š
>
> 1. è¡Œå†…æ ·å¼ï¼Œä½¿ç”¨åŒå¤§æ‹¬å·
> 2. classNameå…³é”®å­—ï¼Œä½¿ç”¨csså®šä¹‰çš„å­—ç¬¦ä¸²ç±»å
> 3. cssnamesåŒ…ï¼Œä½¿ç”¨å•å¤§æ‹¬å· + åŒ…å’Œæ ·å¼ç»‘å®šçš„å®ä½“åç§°

### è¡Œå†…æ ·å¼

1. è¡Œå†…æ ·å¼è¦æ±‚CSS`å¿…é¡»æ˜¯ä¸€ä¸ªå¯¹è±¡`
2. reactå¯¹äºjsçš„è¯†åˆ«æ˜¯ä½¿ç”¨å¤§æ‹¬å·
3. å¯¹äºå¤šå•è¯çš„CSSå±æ€§ï¼Œè¦`ä½¿ç”¨å°é©¼å³°çš„å†™æ³•`ï¼Œå¦‚fontSize

æ‰€ä»¥`æœ€å¤–å±‚å¤§æ‹¬å·æ˜¯reactå¯¹jsçš„è¯†åˆ«`ï¼Œ`é‡Œå±‚çš„å¤§æ‹¬å·æ˜¯reactè¦æ±‚çš„å¯¹è±¡`

```tsx
const App = () => {
  return (
    <div style={{color: 'red', fontSize: '50px'}}>æµ‹è¯•é¡µé¢</div>
  )
}
export default App
```

ä¹Ÿå¯ä»¥ä½¿ç”¨ä¸‰ç›®è¿ç®—ç¬¦ï¼Œæˆ–è€…æ ¹æ®stateçŠ¶æ€æ¥è¿›è¡ŒåŠ¨æ€æ¸²æŸ“

```tsx
const styleObj = {
    fontSize: '16px'
}
const redObj = {
    color: 'red'
}
const App = () => {
  return (
    <div style={1 > 2 ? styleObj : redObj}>æµ‹è¯•é¡µé¢</div>
  )
}
export default App
```

:::tip

åœ¨htmlä¸­ï¼Œæ”¯æŒå¦‚ä¸‹è¡Œå†…æ ·å¼å†™æ³•

```html
<div style="color:red">
    æµ‹è¯•æ ·å¼
</div>
```

ä½†æ˜¯åœ¨jsxä¸­ï¼Œstyleåé¢éœ€è¦è·Ÿä¸€ä¸ªå¯¹è±¡

```tsx
const App = () => {
  return (
    <div style={{color: 'red', fontSize: '50px'}}>æµ‹è¯•é¡µé¢</div>
  )
}
```

> æ­¤å¤„éœ€è¦åŒå±‚å¤§æ‹¬å·
>
> 1. ç¬¬ä¸€å±‚è¡¨ç¤ºï¼Œè¿™é‡Œæ˜¯ä¸€ä¸ªjsè¯­å¥ï¼Œæ­¤å¤„ä»£ç æ˜¯jsxä¸­çš„ä¸€ä¸ªå˜é‡å±æ€§
> 2. ç¬¬äºŒå±‚è¡¨ç¤ºï¼Œè¿™æ˜¯ä¸€ä¸ªå¯¹è±¡
>
> é‡Œé¢çš„å±æ€§å€¼ï¼Œå¦‚æœæ˜¯å¤šä¸ªå•è¯ï¼Œéœ€è¦å†™æˆå°é©¼å³°

:::

### ä½¿ç”¨classNameå…³é”®å­—

1. step1: å®šä¹‰cssæ ·å¼

   ```css
   .fontStyle {
     color: green;
     font-size: 16px;
   }
   ```

2. step2: å¼•å…¥cssæ–‡ä»¶å¹¶`ä½¿ç”¨classNameå…³é”®å­—`

   ```tsx
   import './02-test.css'
   const App = () => {
     return (
       <div className="fontStyle">æµ‹è¯•é¡µé¢</div>
     )
   }
   export default App
   ```

### ä¸åŒæ¡ä»¶æ˜¾ç¤ºä¸åŒæ ·å¼ï¼šclassnamesåŒ…

æœ‰æ—¶å€™éœ€è¦æ ¹æ®ä¸åŒçš„æ¡ä»¶æ·»åŠ ä¸åŒçš„æ ·å¼ï¼Œæ¯”å¦‚ï¼šå®ŒæˆçŠ¶æ€ï¼Œå®Œæˆæ˜¯ç»¿è‰²ï¼Œæœªå®Œæˆæ˜¯çº¢è‰²ã€‚é‚£ä¹ˆè¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬æ¨èä½¿ç”¨[classnames](<https://www.npmjs.com/package/classnames>)è¿™ä¸ªåŒ…

1. å®‰è£…

   ```sh
   cnpm install -D classnames
   ```

2. ä½¿ç”¨

   1. å®šä¹‰cssæ–‡ä»¶

      ```css
      .fontStyle {
        color: red;
        font-size: 16px;
      }
      ```

   2. å¼•å…¥classNames(ç”¨äºæ ¹æ®æ¡ä»¶æ˜¾ç¤ºcssæ ·å¼)å’Œstyle

   3. å¼•å…¥å®šä¹‰å¥½çš„cssæ–‡ä»¶ï¼Œå¹¶è®¾ç½®åˆ«å

   4. 3.å°†cssæ ·å¼è¿›è¡Œç»‘å®š

   ```tsx
   // 1.å¼•å…¥npmåŒ…çš„å›ºå®šå†™æ³•
   import classNames from 'classnames/bind';
   // 2.å¼•å…¥è‡ªå·±å®šä¹‰çš„cssæ–‡ä»¶
   import styles from './02-test.css';
   const App = () => {
     // 3.å°†cssæ ·å¼è¿›è¡Œç»‘å®š
     let className = cx({
       // å·¦è¾¹çš„keyæ˜¯æ ·å¼ä¸­çš„ç±»åï¼Œvalueæ˜¯å˜é‡æˆ–è€…è¡¨è¾¾å¼
       fontStyle: false
     })
     return (
       <div className={className}>æµ‹è¯•é¡µé¢</div>
     )
   }
   export default App
   ```

### css  in js

ä»¥ç»„ä»¶çš„æ–¹å¼å»å†™css

styled-component æ˜¯é’ˆå¯¹Reactå†™çš„ä¸€å¥—css-in-jsæ¡†æ¶ï¼Œç®€å•æ¥è®²å°±æ˜¯åœ¨jsä¸­å†™cssã€‚[npmé“¾æ¥](<https://www.npmjs.com/package/styled-components>)

çˆ¶ç»„ä»¶

```tsx
import React, { Component } from 'react'
import { DivStyled } from './03-styled'
const App = () => {
  return (
    <DivStyled primary="100px">
      app3
    </DivStyled>
  )
}
export default App
```

æ ·å¼ç»„ä»¶

```tsx
import styled from 'styled-components'
// è¿™æ˜¯ä¸€ä¸ªç»„ä»¶
const DivStyled = styled.div`
  background: red;
  color: green;
  font-size:${ (props) => props.primary }
`
export { DivStyled }
```

## ç»„ä»¶çš„çŠ¶æ€(props)

`props`æ˜¯æ­£å¸¸æ˜¯å¤–éƒ¨ä¼ å…¥çš„ï¼Œç»„ä»¶å†…éƒ¨ä¹Ÿå¯ä»¥é€šè¿‡ä¸€äº›æ–¹å¼æ¥åˆå§‹åŒ–çš„è®¾ç½®ï¼Œ**å±æ€§ä¸èƒ½è¢«ç»„ä»¶è‡ªå·±æ›´æ”¹**ï¼Œä½†æ˜¯ä½ **å¯ä»¥é€šè¿‡çˆ¶ç»„ä»¶ä¸»åŠ¨é‡æ–°æ¸²æŸ“çš„æ–¹å¼æ¥ä¼ å…¥æ–°çš„** `props`

å±æ€§æ˜¯æè¿°æ€§è´¨ã€ç‰¹ç‚¹çš„ï¼Œç»„ä»¶è‡ªå·±ä¸èƒ½éšæ„æ›´æ”¹ã€‚

ä¹‹å‰çš„ç»„ä»¶ä»£ç é‡Œé¢æœ‰`props`çš„ç®€å•ä½¿ç”¨ï¼Œæ€»çš„æ¥è¯´ï¼Œåœ¨ä½¿ç”¨ä¸€ä¸ªç»„ä»¶çš„æ—¶å€™ï¼Œå¯ä»¥æŠŠå‚æ•°æ”¾åœ¨æ ‡ç­¾çš„å±æ€§å½“ä¸­ï¼Œæ‰€æœ‰çš„å±æ€§éƒ½ä¼šä½œä¸ºç»„ä»¶ `props` å¯¹è±¡çš„é”®å€¼ã€‚é€šè¿‡ç®­å¤´å‡½æ•°åˆ›å»ºçš„ç»„ä»¶ï¼Œéœ€è¦é€šè¿‡å‡½æ•°çš„å‚æ•°æ¥æ¥æ”¶`props`:

```jsx
import React, { Component, Fragment } from 'react'
import ReactDOM from 'react-dom'

class Title extends Component {
  render () {
    return (
  		<h1>æ¬¢è¿è¿›å…¥{this.props.name}çš„ä¸–ç•Œ</h1>
  	)
  }
}

const Content = (props) => {
  return (
    <p>{props.name}æ˜¯ä¸€ä¸ªæ„å»ºUIçš„åº“</p>
  )
}

class App extends Component {
  render () {
    return (
  		<Fragment>
      	<Title name="React" />
        <Content name="React.js" />
      </Fragment>
  	)
  }
}

ReactDOM.render(
	<App/>,
  document.getElementById('root')
)
```

### è®¾ç½®ç»„ä»¶çš„é»˜è®¤props

**ç±»ç»„ä»¶ï¼Œä½¿ç”¨static defaultPropsæ¥å®šä¹‰é»˜è®¤çš„props**

1. staticå®šä¹‰çš„ï¼Œå°±ç®—æœ‰å­ç±»ç»§æ‰¿ï¼Œæ— æ³•ç»§æ‰¿staticä¿®é¥°çš„ï¼Œæ˜¯å±äºè¯¥ç±»ç§æœ‰çš„
2. staticå®šä¹‰çš„ä¸œè¥¿ï¼Œæ˜¯ç›´æ¥ç»‘å®šåœ¨è¿™ä¸ªç±»ä¸Šçš„

å‡½æ•°ç»„ä»¶çš„é»˜è®¤å€¼ï¼Œç›´æ¥æŒ‚è½½åœ¨å‡½æ•°ä¸‹

**å‡½æ•°ç»„ä»¶å.defaultProps = {  }çš„æ–¹å¼å®šä¹‰**

```jsx
import React, { Component, Fragment } from 'react'
import ReactDOM from 'react-dom'

class Title extends Component {
  // ä½¿ç”¨ç±»åˆ›å»ºçš„ç»„ä»¶ï¼Œç›´æ¥åœ¨è¿™é‡Œå†™staticæ–¹æ³•ï¼Œåˆ›å»ºdefaultProps
  static defaultProps = {
    name: 'React'
  }
  render () {
    return (
  		<h1>æ¬¢è¿è¿›å…¥{this.props.name}çš„ä¸–ç•Œ</h1>
  	)
  }
}

const Content = (props) => {
  return (
    <p>{props.name}æ˜¯ä¸€ä¸ªæ„å»ºUIçš„åº“</p>
  )
}

// ä½¿ç”¨ç®­å¤´å‡½æ•°åˆ›å»ºçš„ç»„ä»¶ï¼Œéœ€è¦åœ¨è¿™ä¸ªç»„ä»¶ä¸Šç›´æ¥å†™defaultPropså±æ€§
Content.defaultProps = {
  name: 'React.js'
}

class App extends Component {
  render () {
    return (
  		<Fragment>
        {/* ç”±äºè®¾ç½®äº†defaultPropsï¼Œ ä¸ä¼ propsä¹Ÿèƒ½æ­£å¸¸è¿è¡Œï¼Œå¦‚æœä¼ é€’äº†å°±ä¼šè¦†ç›–defaultPropsçš„å€¼ */}
      	<Title />
        <Content />
      </Fragment>
  	)
  }
}

ReactDOM.render(
	<App/>,
  document.getElementById('root')
)
```

### props.children

**ç›¸å½“äºvueé‡Œé¢çš„æ’æ§½**

æˆ‘ä»¬çŸ¥é“ä½¿ç”¨ç»„ä»¶çš„æ—¶å€™ï¼Œå¯ä»¥åµŒå¥—ã€‚è¦åœ¨è‡ªå®šä¹‰ç»„ä»¶çš„ä½¿ç”¨åµŒå¥—ç»“æ„ï¼Œå°±éœ€è¦ä½¿ç”¨ `props.children` ã€‚åœ¨å®é™…çš„å·¥ä½œå½“ä¸­ï¼Œæˆ‘ä»¬å‡ ä¹æ¯å¤©éƒ½éœ€è¦ç”¨è¿™ç§æ–¹å¼æ¥ç¼–å†™ç»„ä»¶ã€‚

**ä½¿ç”¨this.props.childrenï¼Œå¯ä»¥å¸¦å‡ºå¼•ç”¨ç»„ä»¶æ—¶ï¼ŒåŒæ ‡ç­¾é‡Œé¢çš„å†…å®¹**

this.props.childrenï¼Œå€¼å¯ä»¥æ˜¯`æ–‡æœ¬`ï¼Œ`æ ‡ç­¾`ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ª`ç»„ä»¶`

```jsx
import React, { Component, Fragment } from 'react'
import ReactDOM from 'react-dom'

class Title extends Component {
  render () {
    return (
  		<h1>æ¬¢è¿è¿›å…¥{this.props.children}çš„ä¸–ç•Œ</h1>
  	)
  }
}

const Content = (props) => {
  return (
    <p>{props.children}</p>
  )
}

class App extends Component {
  render () {
    return (
  		<Fragment>
      	<Title>React</Title>
        <Content><i>React.js</i>æ˜¯ä¸€ä¸ªæ„å»ºUIçš„åº“</Content>
      </Fragment>
  	)
  }
}

ReactDOM.render(
	<App/>,
  document.getElementById('root')
)
```

### å…·åæ’æ§½

å¦‚æœè¦ä½¿ç”¨å…·åæ’æ§½ï¼Œé‚£ä¹ˆåœ¨å‚æ•°å®šä¹‰çš„æ—¶å€™ï¼Œéœ€è¦å®šä¹‰ä¸ºå¯¹è±¡å½¢å¼

åœ¨ä½¿ç”¨æ—¶ï¼Œé€šè¿‡å¯¹è±¡é‡Œçš„keyå»å–

å¯¹è±¡é‡Œçš„å€¼ï¼ŒåŒæ ·å¯ä»¥æ˜¯æ–‡æœ¬ï¼Œæ ‡ç­¾ï¼Œç»„ä»¶

```jsx
import React, { Component, Fragment } from 'react'
import ReactDOM from 'react-dom'

const Content = (props) => {
  return (
    <p>{props.children.name1}</p>
    <h2>ç»„ä»¶å…¶ä»–å†…å®¹</h2>
    <p>{props.children.name2}</p>
    <p>{props.children.name3}</p>
  )
}

class App extends Component {
  render () {
    return (
  	  <Fragment>
        <Content>
            {{
                name1: <div>ç¬¬ä¸€ä¸ªæ’æ§½</div>,
                name2: <div>ç¬¬äºŒä¸ªæ’æ§½</div>,
                //å¦‚æœå±æ€§å€¼æœ‰å¤šä¸ªæ ‡ç­¾ï¼Œå¯ä»¥åŠ ä¸ªå°æ‹¬å·è¿›å»
                name3: (
                    <div>æ ‡ç­¾1</div>,
                    <div>æ ‡ç­¾2</div>
                )
            }}
        </Content> 
      </Fragment>
  	)
  }
}

ReactDOM.render(
	<App/>,
  document.getElementById('root')
)
```

### ä½¿ç”¨prop-typesæ£€æŸ¥props

Reactå…¶å®æ˜¯ä¸ºäº†æ„å»ºå¤§å‹åº”ç”¨ç¨‹åºè€Œç”Ÿ, åœ¨ä¸€ä¸ªå¤§å‹åº”ç”¨ä¸­ï¼Œæ ¹æœ¬ä¸çŸ¥é“åˆ«äººä½¿ç”¨ä½ å†™çš„ç»„ä»¶çš„æ—¶å€™ä¼šä¼ å…¥ä»€ä¹ˆæ ·çš„å‚æ•°ï¼Œæœ‰å¯èƒ½ä¼šé€ æˆåº”ç”¨ç¨‹åºè¿è¡Œä¸äº†ï¼Œä½†æ˜¯ä¸æŠ¥é”™ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒReactæä¾›äº†ä¸€ç§æœºåˆ¶ï¼Œè®©å†™ç»„ä»¶çš„äººå¯ä»¥ç»™ç»„ä»¶çš„```props```è®¾å®šå‚æ•°æ£€æŸ¥ï¼Œéœ€è¦å®‰è£…å’Œä½¿ç”¨[prop-types](<https://www.npmjs.com/package/prop-types>):

1. å®‰è£…ä¾èµ–

   ```sh
   $ npm i prop-types -S
   ```

2. ä½¿ç”¨

   ä½¿ç”¨PropTypes.ç±»å‹ï¼Œæ¥è¿›è¡Œä½¿ç”¨ï¼Œå¦‚PropTypes.numer

   å½“ç„¶ï¼Œä¹Ÿå¯ä»¥ä»prop-typesä¸­è§£æ„å‡ºæ¥ï¼Œè¿™æ ·å°±ä¸ç”¨PropTypes.ç±»å‹çš„æ–¹å¼äº†

   ```jsx
   import React from 'react'
   // è§£æ„å†™æ³•
   import { number } from 'prop-types'
   // æ•´ä½“å¼•å…¥å†™æ³•
   import PropTypes from 'prop-types'
   class Child extends React.Component {
       render() {
           return(
           	<div>child { this.props.title }</div>
           )
       }
   }
   Child.defaultProps = {
       title: 'React'
   }
   Child.propTypes = {
       // è§£æ„å†™æ³•
       title: number
       // å¦‚æœä¸ä½¿ç”¨ç»“æ„ï¼Œå¯ä»¥è¿™æ ·å†™
       num: PropTypes.numer
       
   }
   ```

## çŠ¶æ€(state)

çŠ¶æ€å°±æ˜¯ç»„ä»¶æè¿°æŸç§æ˜¾ç¤ºæƒ…å†µçš„æ•°æ®ï¼Œç”±ç»„ä»¶è‡ªå·±è®¾ç½®å’Œæ›´æ”¹ï¼Œä¹Ÿå°±æ˜¯è¯´ç”±ç»„ä»¶è‡ªå·±ç»´æŠ¤ï¼Œä½¿ç”¨çŠ¶æ€çš„ç›®çš„å°±æ˜¯ä¸ºäº†åœ¨ä¸åŒçš„çŠ¶æ€ä¸‹ä½¿ç»„ä»¶çš„æ˜¾ç¤ºä¸åŒ(è‡ªå·±ç®¡ç†)

### å®šä¹‰state

ç¬¬ä¸€ç§æ–¹å¼(æ¨è): å£°æ˜å¼çš„å®šä¹‰state

```jsx
import React, { Component } from 'react'
import ReactDOM from 'react-dom'

class App extends Component {
  state = {
    name: 'React',
    isLiked: false
  }
  render () {
    return (
      <div>
        <h1>æ¬¢è¿æ¥åˆ°{this.state.name}çš„ä¸–ç•Œ</h1>
        <button>
          {
            this.state.isLiked ? 'â¤ï¸å–æ¶ˆ' : 'ğŸ–¤æ”¶è—'
          }
        </button>
      </div>
  	)
  }
}
ReactDOM.render(
	<App/>,
  document.getElementById('root')
)
```

å¦ä¸€ç§æ–¹å¼: ä½¿ç”¨æ„é€ å‡½æ•°çš„æ„é€ å™¨construct å®šä¹‰state

è¦æ³¨æ„ä½¿ç”¨`super`,superç”¨æ¥è°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•°ï¼Œç»§æ‰¿çˆ¶ç±»çš„æ‰€æœ‰ç§æœ‰å˜é‡

```jsx
import React, { Component } from 'react'
import ReactDOM from 'react-dom'

class App extends Component {
  constructor() {
    super()// è°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•°ï¼Œç»§æ‰¿çˆ¶ç±»çš„æ‰€æœ‰ç§æœ‰å˜é‡
    this.state = {
      name: 'React',
      isLiked: false
    }
  }
  render () {
    return (
  		<div>
        <h1>æ¬¢è¿æ¥åˆ°{this.state.name}çš„ä¸–ç•Œ</h1>
        <button>
          {
            this.state.isLiked ? 'â¤ï¸å–æ¶ˆ' : 'ğŸ–¤æ”¶è—'
          }
        </button>
      </div>
  	)
  }
}
ReactDOM.render(
  <App/>,
  document.getElementById('root')
)
```

`this.props`å’Œ`this.state`æ˜¯çº¯jså¯¹è±¡,åœ¨vueä¸­ï¼Œdataå±æ€§æ˜¯åˆ©ç”¨`Object.defineProperty`å¤„ç†è¿‡çš„ï¼Œæ›´æ”¹â€‹dataçš„æ•°æ®çš„æ—¶å€™ä¼šè§¦å‘æ•°æ®çš„`getter`å’Œ`setter`ï¼Œä½†æ˜¯Reactä¸­æ²¡æœ‰åšè¿™æ ·çš„å¤„ç†ï¼Œå¦‚æœç›´æ¥æ›´æ”¹çš„è¯ï¼Œreactæ˜¯æ— æ³•å¾—çŸ¥çš„ï¼Œæ‰€ä»¥ï¼Œéœ€è¦ä½¿ç”¨ç‰¹æ®Šçš„æ›´æ”¹çŠ¶æ€çš„æ–¹æ³•`setState`ã€‚

:::warning æ³¨æ„

1. åœ¨å®ä½“ä¸­å®šä¹‰ï¼Œä¸ç”¨this,ç›´æ¥å†™state = {}

   ```jsx
   class App extends Component {
     state = {
       name: 'React',
       isLiked: false
     }
     render () {
       return ()
     }
   }
   ```

2. åœ¨constructæ„é€ å™¨ä¸­ï¼Œéœ€è¦æ˜¯ä½¿ç”¨this.state

   ```jsx
   class App extends Component {
     constructor() {
       super()// è°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•°ï¼Œç»§æ‰¿çˆ¶ç±»çš„æ‰€æœ‰ç§æœ‰å˜é‡
       this.state = {
         name: 'React',
         isLiked: false
       }
     }
     render () {
       return ()
     }
   }
   ```

:::

## æ”¹å˜çŠ¶æ€setState

`isLiked` å­˜æ”¾åœ¨å®ä¾‹çš„ `state` å¯¹è±¡å½“ä¸­ï¼Œç»„ä»¶çš„ `render` å‡½æ•°å†…ï¼Œä¼šæ ¹æ®ç»„ä»¶çš„ `state` çš„ä¸­çš„`isLiked`ä¸åŒæ˜¾ç¤ºâ€œå–æ¶ˆâ€æˆ–â€œæ”¶è—â€å†…å®¹ã€‚ä¸‹é¢ç»™ `button` åŠ ä¸Šäº†ç‚¹å‡»çš„äº‹ä»¶ç›‘å¬(**onClick**={handleBtnClick})ã€‚

```jsx
import React, { Component } from 'react'
import ReactDOM from 'react-dom'

class App extends Component {
  constructor() {
    super()
    this.state = {
      name: 'React',
      isLiked: false
    }
  }
  handleBtnClick = () => {
    this.setState({
      isLiked: !this.state.isLiked
    })
  }
  render () {
    return (
      <div>
        <h1>æ¬¢è¿æ¥åˆ°{this.state.name}çš„ä¸–ç•Œ</h1>
        <button onClick={this.handleBtnClick}>
          {
            this.state.isLiked ? 'â¤ï¸å–æ¶ˆ' : 'ğŸ–¤æ”¶è—'
          }
        </button>
      </div>
  	)
  }
}
ReactDOM.render(
	<App/>,
  document.getElementById('root')
)
```

### `setState`çš„ä¸¤ä¸ªå‚æ•°ï¼š

#### ç¬¬ä¸€ä¸ªå‚æ•°(å¯¹è±¡æˆ–å‡½æ•°)ï¼š

ç¬¬ä¸€ä¸ªå‚æ•°å¯ä»¥æ˜¯å¯¹è±¡ï¼Œä¹Ÿå¯ä»¥æ˜¯æ–¹æ³•returnä¸€ä¸ªå¯¹è±¡ï¼Œæˆ‘ä»¬æŠŠè¿™ä¸ªå‚æ•°å«åš`updater`

- å‚æ•°æ˜¯å¯¹è±¡

  ```jsx
  this.setState({
    isLiked: !this.state.isLiked
  })
  ```

- å‚æ•°æ˜¯æ–¹æ³•

  è¿™ç§æ–¹å¼è¿˜æ˜¯å¼‚æ­¥çš„
  
  1. ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œæ˜¯å‰ä¸€æ¬¡çš„å€¼
  2. propsè¡¨ç¤ºè¿™ä¸ªç»„ä»¶çš„props(çˆ¶ç»„ä»¶ä¼ è¿‡æ¥çš„æ•°æ®)
  
  ```jsx
  this.setState((prevState, props) => {
    return {
      isLiked: !prevState.isLiked
    }
  })
  ```
  
  æ³¨æ„çš„æ˜¯è¿™ä¸ªæ–¹æ³•æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªæ˜¯ä¸Šä¸€æ¬¡çš„state, ç¬¬äºŒä¸ªæ˜¯props

#### ç¬¬äºŒä¸ªå‚æ•°æ˜¯å›è°ƒå‡½æ•°

**`setState`æ˜¯å¼‚æ­¥çš„**ï¼Œæ‰€ä»¥æƒ³è¦è·å–åˆ°æœ€æ–°çš„stateï¼Œæ²¡æœ‰åŠæ³•è·å–ï¼Œå°±æœ‰äº†**`ç¬¬äºŒä¸ªå‚æ•°ï¼Œè¿™æ˜¯ä¸€ä¸ªå¯é€‰çš„å›è°ƒå‡½æ•°`**

```jsx
this.setState((prevState, props) => {
  return {
    isLiked: !prevState.isLiked
  }
}, () => {
  console.log('å›è°ƒé‡Œçš„',this.state.isLiked) // æ­¤ç§å†™æ³•å¯ä»¥ä¿è¯æ˜¯åŒæ­¥çš„
})
console.log('setStateå¤–éƒ¨çš„',this.state.isLiked)
```

:::tip

å¯ä»¥åœ¨ç¬¬äºŒä¸ªå‡½æ•°ä¸­ï¼Œå†™æˆç®­å¤´å‡½æ•°çš„å½¢å¼ï¼Œè®©å…¶æ°¸è¿œå˜æˆåŒæ­¥çš„æ–¹æ³•

setState å¯åŒæ­¥å¯å¼‚æ­¥

1. å¼‚æ­¥æƒ…å†µï¼š

   1. åˆæˆäº‹ä»¶(ç‚¹å‡»äº‹ä»¶onClickç­‰)ï¼Œé‡Œæ˜¯å¼‚æ­¥çš„
   2. ç”Ÿå‘½å‘¨æœŸï¼Œé‡Œæ˜¯å¼‚æ­¥çš„

2. åŒæ­¥æƒ…å†µï¼š

   1. åœ¨å®šæ—¶å™¨é‡Œï¼Œæ˜¯åŒæ­¥çš„

   2. åœ¨åŸç”Ÿjsé‡Œï¼Œæ˜¯åŒæ­¥çš„

      ```js
      document.querySelect('button').addEventListener('click', this.handleClick.bind(this), false)
      const handleClick = () => {
          this.setState({
            isLiked: !this.state.isLiked
          },
          console.log(this.state.isLick)
          )
      }
      ```


:::

:::warning

```jsx
handleBtnClick = () => {
    this.setState({
        isShow: !this.state.isShow
    })
    this.setState({
        isShow: !this.state.isShow
    })
}
```

å¦‚æœæŒ‰ç…§ä¸Šè¿°å†™ä»£ç ï¼Œåˆå§‹æ—¶ï¼Œä¸¤ä¸ªsetStateéƒ½æ˜¯å–çš„ä¸€ä¸ªåœ°å€çš„isShowï¼Œ

è€Œä¸æ˜¯ç­‰ç¬¬ä¸€ä¸ªæ‰§è¡Œå®Œï¼Œç¬¬äºŒä¸ªä¼šåœ¨ç¬¬ä¸€ä¸ªåŸºç¡€ä¸Šå–å€¼å†å–å

å¦‚æœéœ€è¦å¤šä¸ªåœ°æ–¹ä½¿ç”¨isShowï¼Œå¹¶ä¸”å¸Œæœ›å€¼èƒ½å¤ŸåŒæ­¥æ”¹å˜ï¼Œä¹Ÿå°±æ˜¯ç¬¬äºŒä¸ªåœ¨ç¬¬ä¸€ä¸ªæ”¹å˜çš„åŸºç¡€ä¸Šè¿›è¡Œæ”¹å˜ï¼šå¯ä»¥ä½¿ç”¨å¦‚ä¸‹ä»£ç :

å†™ä¸€ä¸ªå‡½æ•°ï¼Œç„¶åå€¼ä½œä¸ºå¯¹è±¡returnå‡ºå»

```jsx
this.setState((prevState, props) => {
  return {
    isShow: !prevState.isShow
  }
})
```

:::

## å±æ€§(props)vsçŠ¶æ€(state)

ç›¸ä¼¼ç‚¹ï¼šéƒ½æ˜¯çº¯jså¯¹è±¡ï¼Œéƒ½ä¼šè§¦å‘renderæ›´æ–°ï¼Œéƒ½å…·æœ‰ç¡®å®šæ€§ï¼ˆçŠ¶æ€/å±æ€§ç›¸åŒï¼Œç»“æœç›¸åŒï¼‰

ä¸åŒç‚¹ï¼š 

1. å±æ€§èƒ½ä»çˆ¶ç»„ä»¶è·å–ï¼ŒçŠ¶æ€ä¸èƒ½
2. å±æ€§å¯ä»¥ç”±çˆ¶ç»„ä»¶ä¿®æ”¹ï¼ŒçŠ¶æ€ä¸èƒ½
3. å±æ€§èƒ½åœ¨å†…éƒ¨è®¾ç½®é»˜è®¤å€¼ï¼ŒçŠ¶æ€ä¹Ÿå¯ä»¥
4. å±æ€§ä¸å¯ä»¥åœ¨ç»„ä»¶å†…éƒ¨ä¿®æ”¹ï¼ŒçŠ¶æ€å¯ä»¥æ”¹
5. å±æ€§èƒ½è®¾ç½®å­ç»„ä»¶åˆå§‹å€¼ï¼ŒçŠ¶æ€ä¸å¯ä»¥
6. å±æ€§å¯ä»¥ä¿®æ”¹å­ç»„ä»¶çš„å€¼ï¼ŒçŠ¶æ€ä¸å¯ä»¥

`state` çš„ä¸»è¦ä½œç”¨æ˜¯ç”¨äºç»„ä»¶ä¿å­˜ã€æ§åˆ¶ã€ä¿®æ”¹è‡ªå·±çš„å¯å˜çŠ¶æ€ã€‚`state` åœ¨ç»„ä»¶å†…éƒ¨åˆå§‹åŒ–ï¼Œå¯ä»¥è¢«ç»„ä»¶è‡ªèº«ä¿®æ”¹ï¼Œè€Œå¤–éƒ¨ä¸èƒ½è®¿é—®ä¹Ÿä¸èƒ½ä¿®æ”¹ã€‚ä½ å¯ä»¥è®¤ä¸º `state` æ˜¯ä¸€ä¸ªå±€éƒ¨çš„ã€åªèƒ½è¢«ç»„ä»¶è‡ªèº«æ§åˆ¶çš„æ•°æ®æºã€‚`state` ä¸­çŠ¶æ€å¯ä»¥é€šè¿‡ `this.setState`æ–¹æ³•è¿›è¡Œæ›´æ–°ï¼Œ`setState` ä¼šå¯¼è‡´ç»„ä»¶çš„é‡æ–°æ¸²æŸ“ã€‚

`props` çš„ä¸»è¦ä½œç”¨æ˜¯è®©ä½¿ç”¨è¯¥ç»„ä»¶çš„çˆ¶ç»„ä»¶å¯ä»¥ä¼ å…¥å‚æ•°æ¥é…ç½®è¯¥ç»„ä»¶ã€‚å®ƒæ˜¯å¤–éƒ¨ä¼ è¿›æ¥çš„é…ç½®å‚æ•°ï¼Œç»„ä»¶å†…éƒ¨æ— æ³•æ§åˆ¶ä¹Ÿæ— æ³•ä¿®æ”¹ã€‚é™¤éå¤–éƒ¨ç»„ä»¶ä¸»åŠ¨ä¼ å…¥æ–°çš„ `props`ï¼Œå¦åˆ™ç»„ä»¶çš„ `props` æ°¸è¿œä¿æŒä¸å˜ã€‚

å¦‚æœæä¸æ¸… `state` å’Œ `props` çš„ä½¿ç”¨åœºæ™¯ï¼Œè®°ä½ä¸€ä¸ªç®€å•çš„è§„åˆ™ï¼š**å°½é‡å°‘åœ°ç”¨ `state`ï¼Œå¤šç”¨ `props`**ã€‚

æ²¡æœ‰ `state` çš„ç»„ä»¶å«æ— çŠ¶æ€ç»„ä»¶ï¼ˆstateless componentï¼‰ï¼Œè®¾ç½®äº† state çš„å«åšæœ‰çŠ¶æ€ç»„ä»¶ï¼ˆstateful componentï¼‰ã€‚å› ä¸ºçŠ¶æ€ä¼šå¸¦æ¥ç®¡ç†çš„å¤æ‚æ€§ï¼Œæˆ‘ä»¬å°½é‡å¤šåœ°å†™æ— çŠ¶æ€ç»„ä»¶ï¼Œå°½é‡å°‘åœ°å†™æœ‰çŠ¶æ€çš„ç»„ä»¶ã€‚è¿™æ ·ä¼šé™ä½ä»£ç ç»´æŠ¤çš„éš¾åº¦ï¼Œä¹Ÿä¼šåœ¨ä¸€å®šç¨‹åº¦ä¸Šå¢å¼ºç»„ä»¶çš„å¯å¤ç”¨æ€§ã€‚

## çŠ¶æ€æå‡

å¦‚æœæœ‰å¤šä¸ªç»„ä»¶å…±äº«ä¸€ä¸ªæ•°æ®ï¼ŒæŠŠè¿™ä¸ªæ•°æ®æ”¾åˆ°å…±åŒçš„çˆ¶çº§ç»„ä»¶ä¸­æ¥ç®¡ç†

```jsx
import React, { Component } from 'react'
import ReactDOM from 'react-dom'

class App extends Component {
  constructor() {
    super()
    this.state = {
      num: 0
    }
  }
  getCount(childNum) {
      // æ¥æ”¶Child1 ä¼ è¿›æ¥çš„å€¼
      this.setState({
          num: childNum
      })
  }
  render () {
    return (
      <div>
        <Child1 onGetCount={this.getCount.bind(this)} />
        <Child2 num={this.state.num}/>
      </div>
  	)
  }
}
ReactDOM.render(
	<App/>,
  document.getElementById('root')
)

// å­ç»„ä»¶1
class Child1 extends Component {
    state = {
        count: 5
    }
  render () {
    return (
      <div onClick = {this.props.onGetCount.bind(this,this.state.count)}>
       æŒ‰é’®
      </div>
  	)
  }
}
// å­ç»„ä»¶2
const Child2 = (props) => {
    return (
    	<div>{ props.num }</div>
    )
}
```

## å—æ§ç»„ä»¶ä¸éå—æ§ç»„ä»¶ 

Reactç»„ä»¶çš„æ•°æ®æ¸²æŸ“æ˜¯å¦è¢«è°ƒç”¨è€…ä¼ é€’çš„`props`å®Œå…¨æ§åˆ¶ï¼Œæ§åˆ¶åˆ™ä¸ºå—æ§ç»„ä»¶ï¼Œå¦åˆ™éå—æ§ç»„ä»¶ã€‚



## æ¸²æŸ“æ•°æ®

### æ¡ä»¶æ¸²æŸ“

```jsx
{
  condition ? 'â¤ï¸å–æ¶ˆ' : 'ğŸ–¤æ”¶è—'
}
```

### åˆ—è¡¨æ¸²æŸ“

```jsx
// æ•°æ®
const people = [{
  id: 1,
  name: 'Leo',
  age: 35
}, {
  id: 2,
  name: 'XiaoMing',
  age: 16
}]
// æ¸²æŸ“åˆ—è¡¨
{
  people.map(person => {
    return (
      <dl key={person.id}>
        <dt>{person.name}</dt>
        <dd>age: {person.age}</dd>
      </dl>
    )
  })
}
```

Reactçš„é«˜æ•ˆä¾èµ–äºæ‰€è°“çš„ Virtual-DOMï¼Œå°½é‡ä¸ç¢° DOMã€‚å¯¹äºåˆ—è¡¨å…ƒç´ æ¥è¯´ä¼šæœ‰ä¸€ä¸ªé—®é¢˜ï¼šå…ƒç´ å¯èƒ½ä¼šåœ¨ä¸€ä¸ªåˆ—è¡¨ä¸­æ”¹å˜ä½ç½®ã€‚è¦å®ç°è¿™ä¸ªæ“ä½œï¼Œåªéœ€è¦äº¤æ¢ä¸€ä¸‹ DOM ä½ç½®å°±è¡Œäº†ï¼Œä½†æ˜¯Reactå¹¶ä¸çŸ¥é“å…¶å®æˆ‘ä»¬åªæ˜¯æ”¹å˜äº†å…ƒç´ çš„ä½ç½®ï¼Œæ‰€ä»¥å®ƒä¼šé‡æ–°æ¸²æŸ“åé¢ä¸¤ä¸ªå…ƒç´ ï¼ˆå†æ‰§è¡Œ Virtual-DOM ï¼‰ï¼Œè¿™æ ·ä¼šå¤§å¤§å¢åŠ  DOM æ“ä½œã€‚ä½†å¦‚æœç»™æ¯ä¸ªå…ƒç´ åŠ ä¸Šå”¯ä¸€çš„æ ‡è¯†ï¼ŒReact å°±å¯ä»¥çŸ¥é“è¿™ä¸¤ä¸ªå…ƒç´ åªæ˜¯äº¤æ¢äº†ä½ç½®ï¼Œè¿™ä¸ªæ ‡è¯†å°±æ˜¯```key```ï¼Œè¿™ä¸ª `key` å¿…é¡»æ˜¯æ¯ä¸ªå…ƒç´ å”¯ä¸€çš„æ ‡è¯†

### dangerouslySetInnerHTML

å¯¹äºå¯Œæ–‡æœ¬åˆ›å»ºçš„å†…å®¹ï¼Œåå°æ‹¿åˆ°çš„æ•°æ®æ˜¯è¿™æ ·çš„ï¼š

```js
content = "<p>React.jsæ˜¯ä¸€ä¸ªæ„å»ºUIçš„åº“</p>"
```

å¤„äºå®‰å…¨çš„åŸå› ï¼ŒReactå½“ä¸­æ‰€æœ‰è¡¨è¾¾å¼çš„å†…å®¹ä¼šè¢«è½¬ä¹‰ï¼Œå¦‚æœç›´æ¥è¾“å…¥ï¼Œæ ‡ç­¾ä¼šè¢«å½“æˆæ–‡æœ¬ã€‚è¿™æ—¶å€™å°±éœ€è¦ä½¿ç”¨`dangerouslySetHTML`å±æ€§ï¼Œå®ƒå…è®¸æˆ‘ä»¬åŠ¨æ€è®¾ç½®`innerHTML`

```jsx
import React, { Component } from 'react'
import ReactDOM from 'react-dom'

class App extends Component {
  constructor() {
    super()
    this.state = {
      content : "<p>React.jsæ˜¯ä¸€ä¸ªæ„å»ºUIçš„åº“</p>"
    }
  }
  render () {
    return (
  		<div
        // æ³¨æ„è¿™é‡Œæ˜¯ä¸¤ä¸ªä¸‹ä¸‹åˆ’çº¿ __html
        dangerouslySetInnerHTML={{__html: this.state.content}}
      />
  	)
  }
}
ReactDOM.render(
	<App/>,
  document.getElementById('root')
)
```

## äº‹ä»¶å¤„ç†

### ç»‘å®šäº‹ä»¶

é‡‡ç”¨on+äº‹ä»¶åçš„æ–¹å¼æ¥ç»‘å®šä¸€ä¸ªäº‹ä»¶ï¼Œæ³¨æ„ï¼Œè¿™é‡Œå’ŒåŸç”Ÿçš„äº‹ä»¶æ˜¯æœ‰åŒºåˆ«çš„ï¼ŒåŸç”Ÿçš„äº‹ä»¶å…¨æ˜¯å°å†™`onclick`, Reacté‡Œçš„äº‹ä»¶æ˜¯é©¼å³°`onClick`ï¼Œ**Reactçš„äº‹ä»¶å¹¶ä¸æ˜¯åŸç”Ÿäº‹ä»¶ï¼Œè€Œæ˜¯åˆæˆäº‹ä»¶**

### äº‹ä»¶handlerçš„å†™æ³•

- ç›´æ¥åœ¨renderé‡Œå†™è¡Œå†…çš„ç®­å¤´å‡½æ•°(ä¸æ¨è)
- åœ¨ç»„ä»¶å†…ä½¿ç”¨ç®­å¤´å‡½æ•°å®šä¹‰ä¸€ä¸ªæ–¹æ³•(æ¨è)
- ç›´æ¥åœ¨ç»„ä»¶å†…å®šä¹‰ä¸€ä¸ªéç®­å¤´å‡½æ•°çš„æ–¹æ³•ï¼Œç„¶ååœ¨renderé‡Œç›´æ¥ä½¿ç”¨`onClick={this.handleClick.bind(this)}`(ä¸æ¨è)
- ç›´æ¥åœ¨ç»„ä»¶å†…å®šä¹‰ä¸€ä¸ªéç®­å¤´å‡½æ•°çš„æ–¹æ³•ï¼Œç„¶ååœ¨constructoré‡Œbind(this)(æ¨è)

### Event å¯¹è±¡

å’Œæ™®é€šæµè§ˆå™¨ä¸€æ ·ï¼Œäº‹ä»¶handlerä¼šè¢«è‡ªåŠ¨ä¼ å…¥ä¸€ä¸ª `event` å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡å’Œæ™®é€šçš„æµè§ˆå™¨ `event` å¯¹è±¡æ‰€åŒ…å«çš„æ–¹æ³•å’Œå±æ€§éƒ½åŸºæœ¬ä¸€è‡´ã€‚ä¸åŒçš„æ˜¯ Reactä¸­çš„ `event` å¯¹è±¡å¹¶ä¸æ˜¯æµè§ˆå™¨æä¾›çš„ï¼Œè€Œæ˜¯å®ƒè‡ªå·±å†…éƒ¨æ‰€æ„å»ºçš„ã€‚å®ƒåŒæ ·å…·æœ‰`event.stopPropagation`ã€`event.preventDefault` è¿™ç§å¸¸ç”¨çš„æ–¹æ³•

### äº‹ä»¶çš„å‚æ•°ä¼ é€’

- åœ¨`render`é‡Œè°ƒç”¨æ–¹æ³•çš„åœ°æ–¹å¤–é¢åŒ…ä¸€å±‚ç®­å¤´å‡½æ•° 
- åœ¨`render`é‡Œé€šè¿‡`this.handleEvent.bind(this, å‚æ•°)`è¿™æ ·çš„æ–¹å¼æ¥ä¼ é€’
- é€šè¿‡`event`ä¼ é€’
- æ¯”è¾ƒæ¨èçš„æ˜¯åšä¸€ä¸ªå­ç»„ä»¶, åœ¨çˆ¶ç»„ä»¶ä¸­å®šä¹‰æ–¹æ³•ï¼Œé€šè¿‡`props`ä¼ é€’åˆ°å­ç»„ä»¶ä¸­ï¼Œç„¶ååœ¨å­ç»„ä»¶ä»¶é€šè¿‡`this.props.method`æ¥è°ƒç”¨

### å¤„ç†ç”¨æˆ·è¾“å…¥

```jsx
import React, { Component } from 'react'
import ReactDOM from 'react-dom'

class App extends Component {
  constructor() {
    super()
    this.state = {
      xing: '',
      ming: ''
    }
  }
  handleInputChange = (e) => {
    this.setState({
      [e.target.name]: e.target.value
    })
  }
  render () {
    const {
      xing,
      ming
    } = this.state
    return (
  		<div>
        <label>
          <span>å§“:</span>
          <input
            type="text"
            name="xing"
            value={xing}
            onChange={this.handleInputChange}
          />
        </label>
        <label>
          <span>å:</span>
          <input
            type="text"
            name="ming"
            value={ming}
            onChange={this.handleInputChange}
          />
        </label>
        <p>æ¬¢è¿æ‚¨: {xing}{ming}</p>
      </div>
  	)
  }
}
ReactDOM.render(
	<App/>,
  document.getElementById('root')
)
```

## è¡¨å•

## å—æ§ç»„ä»¶

åœ¨ HTML ä¸­ï¼Œè¡¨å•å…ƒç´ ï¼ˆå¦‚`<input>ã€ <textarea> å’Œ <select>`ï¼‰é€šå¸¸è‡ªå·±ç»´æŠ¤ stateï¼Œå¹¶æ ¹æ®ç”¨æˆ·è¾“å…¥è¿›è¡Œæ›´æ–°ã€‚è€Œåœ¨ React ä¸­ï¼Œå¯å˜çŠ¶æ€ï¼ˆmutable stateï¼‰é€šå¸¸ä¿å­˜åœ¨ç»„ä»¶çš„ state å±æ€§ä¸­ï¼Œå¹¶ä¸”åªèƒ½é€šè¿‡ä½¿ç”¨`setState()`æ¥æ›´æ–°ã€‚

æˆ‘ä»¬å¯ä»¥æŠŠä¸¤è€…ç»“åˆèµ·æ¥ï¼Œä½¿ React çš„ state æˆä¸ºâ€œå”¯ä¸€æ•°æ®æºâ€ã€‚æ¸²æŸ“è¡¨å•çš„ React ç»„ä»¶è¿˜æ§åˆ¶ç€ç”¨æˆ·è¾“å…¥è¿‡ç¨‹ä¸­è¡¨å•å‘ç”Ÿçš„æ“ä½œã€‚è¢« React ä»¥è¿™ç§æ–¹å¼æ§åˆ¶å–å€¼çš„è¡¨å•è¾“å…¥å…ƒç´ å°±å«åšâ€œå—æ§ç»„ä»¶â€ã€‚

ä¾‹å¦‚ï¼Œå¦‚æœæˆ‘ä»¬æƒ³è®©å‰ä¸€ä¸ªç¤ºä¾‹åœ¨æäº¤æ—¶æ‰“å°å‡ºåç§°ï¼Œæˆ‘ä»¬å¯ä»¥å°†è¡¨å•å†™ä¸ºå—æ§ç»„ä»¶ï¼š

```javascript
class NameForm extends React.Component {
  constructor(props) {
    super(props);
    this.state = {value: ''};

    this.handleChange = this.handleChange.bind(this);
    this.handleSubmit = this.handleSubmit.bind(this);
  }

  handleChange(event) {
    this.setState({value: event.target.value});
  }

  handleSubmit(event) {
    alert('æäº¤çš„åå­—: ' + this.state.value);
    event.preventDefault();
  }

  render() {
    return (
      <form onSubmit={this.handleSubmit}>
        <label>
          åå­—:
          <input type="text" value={this.state.value} onChange={this.handleChange} />
        </label>
        <input type="submit" value="æäº¤" />
      </form>
    );
  }
}
```

ç”±äºåœ¨è¡¨å•å…ƒç´ ä¸Šè®¾ç½®äº† `value` å±æ€§ï¼Œå› æ­¤æ˜¾ç¤ºçš„å€¼å°†å§‹ç»ˆä¸º `this.state.value`ï¼Œè¿™ä½¿å¾— React çš„ state æˆä¸ºå”¯ä¸€æ•°æ®æºã€‚ç”±äº `handlechange` åœ¨æ¯æ¬¡æŒ‰é”®æ—¶éƒ½ä¼šæ‰§è¡Œå¹¶æ›´æ–° React çš„ stateï¼Œå› æ­¤æ˜¾ç¤ºçš„å€¼å°†éšç€ç”¨æˆ·è¾“å…¥è€Œæ›´æ–°ã€‚

å¯¹äºå—æ§ç»„ä»¶æ¥è¯´ï¼Œè¾“å…¥çš„å€¼å§‹ç»ˆç”± React çš„ state é©±åŠ¨ã€‚ä½ ä¹Ÿå¯ä»¥å°† value ä¼ é€’ç»™å…¶ä»– UI å…ƒç´ ï¼Œæˆ–è€…é€šè¿‡å…¶ä»–äº‹ä»¶å¤„ç†å‡½æ•°é‡ç½®ï¼Œä½†è¿™æ„å‘³ç€ä½ éœ€è¦ç¼–å†™æ›´å¤šçš„ä»£ç ã€‚

### textarea æ ‡ç­¾

åœ¨ HTML ä¸­, `<textarea>` å…ƒç´ é€šè¿‡å…¶å­å…ƒç´ å®šä¹‰å…¶æ–‡æœ¬:

```html
<textarea>
  ä½ å¥½ï¼Œ è¿™æ˜¯åœ¨ text area é‡Œçš„æ–‡æœ¬
</textarea>
```

è€Œåœ¨ React ä¸­ï¼Œ`<textarea>` ä½¿ç”¨ `value` å±æ€§ä»£æ›¿ã€‚è¿™æ ·ï¼Œå¯ä»¥ä½¿å¾—ä½¿ç”¨ `<textarea>` çš„è¡¨å•å’Œä½¿ç”¨å•è¡Œ input çš„è¡¨å•éå¸¸ç±»ä¼¼ï¼š

```javascript
class EssayForm extends React.Component {
  constructor(props) {
    super(props);
    this.state = {
      value: 'è¯·æ’°å†™ä¸€ç¯‡å…³äºä½ å–œæ¬¢çš„ DOM å…ƒç´ çš„æ–‡ç« .'
    };

    this.handleChange = this.handleChange.bind(this);
    this.handleSubmit = this.handleSubmit.bind(this);
  }

  handleChange(event) {
    this.setState({value: event.target.value});
  }

  handleSubmit(event) {
    alert('æäº¤çš„æ–‡ç« : ' + this.state.value);
    event.preventDefault();
  }

  render() {
    return (
      <form onSubmit={this.handleSubmit}>
        <label>
          æ–‡ç« :
          <textarea value={this.state.value} onChange={this.handleChange} />
        </label>
        <input type="submit" value="æäº¤" />
      </form>
    );
  }
}
```

è¯·æ³¨æ„ï¼Œ`this.state.value` åˆå§‹åŒ–äºæ„é€ å‡½æ•°ä¸­ï¼Œå› æ­¤æ–‡æœ¬åŒºåŸŸé»˜è®¤æœ‰åˆå€¼

### select æ ‡ç­¾

åœ¨ HTML ä¸­ï¼Œ`<select>` åˆ›å»ºä¸‹æ‹‰åˆ—è¡¨æ ‡ç­¾ã€‚ä¾‹å¦‚ï¼Œå¦‚ä¸‹ HTML åˆ›å»ºäº†æ°´æœç›¸å…³çš„ä¸‹æ‹‰åˆ—è¡¨ï¼š

```
<select>
  <option value="grapefruit">è‘¡è„æŸš</option>
  <option value="lime">é…¸æ©™</option>
  <option selected value="coconut">æ¤°å­</option>
  <option value="mango">èŠ’æœ</option>
</select>
```

è¯·æ³¨æ„ï¼Œç”±äº `selected` å±æ€§çš„ç¼˜æ•…ï¼Œæ¤°å­é€‰é¡¹é»˜è®¤è¢«é€‰ä¸­ã€‚React å¹¶ä¸ä¼šä½¿ç”¨ `selected` å±æ€§ï¼Œè€Œæ˜¯åœ¨æ ¹ `select` æ ‡ç­¾ä¸Šä½¿ç”¨ `value` å±æ€§ã€‚è¿™åœ¨å—æ§ç»„ä»¶ä¸­æ›´ä¾¿æ·ï¼Œå› ä¸ºæ‚¨åªéœ€è¦åœ¨æ ¹æ ‡ç­¾ä¸­æ›´æ–°å®ƒã€‚ä¾‹å¦‚ï¼š

```javascript
class FlavorForm extends React.Component {
  constructor(props) {
    super(props);
    this.state = {value: 'coconut'};

    this.handleChange = this.handleChange.bind(this);
    this.handleSubmit = this.handleSubmit.bind(this);
  }

  handleChange(event) {
    this.setState({value: event.target.value});
  }

  handleSubmit(event) {
    alert('ä½ å–œæ¬¢çš„é£å‘³æ˜¯: ' + this.state.value);
    event.preventDefault();
  }

  render() {
    return (
      <form onSubmit={this.handleSubmit}>
        <label>
          é€‰æ‹©ä½ å–œæ¬¢çš„é£å‘³:
          <select value={this.state.value} onChange={this.handleChange}>
            <option value="grapefruit">è‘¡è„æŸš</option>
            <option value="lime">é…¸æ©™</option>
            <option value="coconut">æ¤°å­</option>
            <option value="mango">èŠ’æœ</option>
          </select>
        </label>
        <input type="submit" value="æäº¤" />
      </form>
    );
  }
}
```

æ€»çš„æ¥è¯´ï¼Œè¿™ä½¿å¾—, `<input type="text">`, `<textarea>` å’Œ `<select>`ä¹‹ç±»çš„æ ‡ç­¾éƒ½éå¸¸ç›¸ä¼¼â€”å®ƒä»¬éƒ½æ¥å—ä¸€ä¸ª `value` å±æ€§ï¼Œä½ å¯ä»¥ä½¿ç”¨å®ƒæ¥å®ç°å—æ§ç»„ä»¶ã€‚

> æ³¨æ„
>
> ä½ å¯ä»¥å°†æ•°ç»„ä¼ é€’åˆ° `value` å±æ€§ä¸­ï¼Œä»¥æ”¯æŒåœ¨ `select` æ ‡ç­¾ä¸­é€‰æ‹©å¤šä¸ªé€‰é¡¹ï¼š
>
> ```
> <select multiple={true} value={['B', 'C']}>
> ```

```javascript
class MulFlavorForm extends React.Component {
  constructor(props) {
    super(props);
    this.state = {
      value: "coconut",
      arr: [],
      options: [
        { value: "grapefruit", label: "è‘¡è„æŸš" },
        { value: "lime", label: "é…¸æ©™" },
        { value: "coconut", label: "æ¤°å­" },
        { value: "mango", label: "èŠ’æœ" }
      ]
    };

    this.handleChange = this.handleChange.bind(this);
  }

  handleChange(e){
    let idx = this.state.arr.findIndex(item=>{
      return item === e.target.value
    })
    if (idx >= 0) {
      this.state.arr.splice(idx,1);
    } else {
      this.state.arr.push(e.target.value);
    }
    let arr = this.state.arr;
    this.setState({arr});
  }

  render() {
    return (
      <div>
        <select multiple={true} value={this.state.arr} onChange={this.handleChange}>
          {this.state.options.map((item,index) => {
            return <option value={item.value} key={index}>{item.label}</option>;
          })}
        </select>
      </div>
    );
  }
}

export default Test4;
```

### å¤„ç†å¤šä¸ªè¾“å…¥

å½“éœ€è¦å¤„ç†å¤šä¸ª `input` å…ƒç´ æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ç»™æ¯ä¸ªå…ƒç´ æ·»åŠ  `name` å±æ€§ï¼Œå¹¶è®©å¤„ç†å‡½æ•°æ ¹æ® `event.target.name` çš„å€¼é€‰æ‹©è¦æ‰§è¡Œçš„æ“ä½œã€‚

```javascript
class Reservation extends React.Component {
  constructor(props) {
    super(props);
    this.state = {
      isGoing: true,
      numberOfGuests: 2
    };

    this.handleInputChange = this.handleInputChange.bind(this);
  }

  handleInputChange(event) {
    const target = event.target;
    const value = target.type === 'checkbox' ? target.checked : target.value;
    const name = target.name;

    this.setState({
      [name]: value
    });
  }

  render() {
    return (
      <form>
        <label>
          å‚ä¸:
          <input
            name="isGoing"
            type="checkbox"
            checked={this.state.isGoing}
            onChange={this.handleInputChange} />
        </label>
        <br />
        <label>
          æ¥å®¾äººæ•°:
          <input
            name="numberOfGuests"
            type="number"
            value={this.state.numberOfGuests}
            onChange={this.handleInputChange} />
        </label>
      </form>
    );
  }
}
```

### æ–‡ä»¶ input æ ‡ç­¾

åœ¨ HTML ä¸­ï¼Œ`<input type="file">` å…è®¸ç”¨æˆ·ä»å­˜å‚¨è®¾å¤‡ä¸­é€‰æ‹©ä¸€ä¸ªæˆ–å¤šä¸ªæ–‡ä»¶ï¼Œå°†å…¶ä¸Šä¼ åˆ°æœåŠ¡å™¨ï¼Œæˆ–é€šè¿‡ä½¿ç”¨ JavaScript çš„ File API è¿›è¡Œæ§åˆ¶ã€‚

```html
<input type="file" />
```

å› ä¸ºå®ƒçš„ value åªè¯»ï¼Œæ‰€ä»¥å®ƒæ˜¯ React ä¸­çš„ä¸€ä¸ªéå—æ§ç»„ä»¶ã€‚å°†ä¸å…¶ä»–éå—æ§ç»„ä»¶åœ¨åç»­æ–‡æ¡£ä¸­ä¸€èµ·è®¨è®ºã€‚

### å—æ§è¾“å…¥ç©ºå€¼

åœ¨å—æ§ç»„ä»¶ä¸ŠæŒ‡å®š value çš„ prop ä¼šé˜»æ­¢ç”¨æˆ·æ›´æ”¹è¾“å…¥ã€‚å¦‚æœä½ æŒ‡å®šäº† valueï¼Œä½†è¾“å…¥ä»å¯ç¼–è¾‘ï¼Œåˆ™å¯èƒ½æ˜¯ä½ æ„å¤–åœ°å°†value è®¾ç½®ä¸º undefined æˆ– nullã€‚

ä¸‹é¢çš„ä»£ç æ¼”ç¤ºäº†è¿™ä¸€ç‚¹ã€‚ï¼ˆè¾“å…¥æœ€åˆè¢«é”å®šï¼Œä½†åœ¨çŸ­æ—¶é—´å»¶è¿Ÿåå˜ä¸ºå¯ç¼–è¾‘ã€‚ï¼‰

```javascript
ReactDOM.render(<input value="hi" />, mountNode);

setTimeout(function() {
  ReactDOM.render(<input value={null} />, mountNode);
}, 1000);
```

### éå—æ§ç»„ä»¶

åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬æ¨èä½¿ç”¨ [å—æ§ç»„ä»¶](https://zh-hans.reactjs.org/docs/forms.html#controlled-components) æ¥å¤„ç†è¡¨å•æ•°æ®ã€‚åœ¨ä¸€ä¸ªå—æ§ç»„ä»¶ä¸­ï¼Œè¡¨å•æ•°æ®æ˜¯ç”± React ç»„ä»¶æ¥ç®¡ç†çš„ã€‚å¦ä¸€ç§æ›¿ä»£æ–¹æ¡ˆæ˜¯ä½¿ç”¨éå—æ§ç»„ä»¶ï¼Œè¿™æ—¶è¡¨å•æ•°æ®å°†äº¤ç”± DOM èŠ‚ç‚¹æ¥å¤„ç†ã€‚

è¦ç¼–å†™ä¸€ä¸ªéå—æ§ç»„ä»¶ï¼Œè€Œä¸æ˜¯ä¸ºæ¯ä¸ªçŠ¶æ€æ›´æ–°éƒ½ç¼–å†™æ•°æ®å¤„ç†å‡½æ•°ï¼Œä½ å¯ä»¥ [ä½¿ç”¨ ref](https://zh-hans.reactjs.org/docs/refs-and-the-dom.html) æ¥ä» DOM èŠ‚ç‚¹ä¸­è·å–è¡¨å•æ•°æ®ã€‚

ä¾‹å¦‚ï¼Œä¸‹é¢çš„ä»£ç ä½¿ç”¨éå—æ§ç»„ä»¶æ¥å—ä¸€ä¸ªè¡¨å•çš„å€¼ï¼š

```javascript
class NameForm extends React.Component {
  constructor(props) {
    super(props);
    this.handleSubmit = this.handleSubmit.bind(this);
    this.input = React.createRef();
  }

  handleSubmit(event) {
    alert('A name was submitted: ' + this.input.current.value);
    event.preventDefault();
  }

  render() {
    return (
      <form onSubmit={this.handleSubmit}>
        <label>
          Name:
          <input type="text" ref={this.input} />
        </label>
        <input type="submit" value="Submit" />
      </form>
    );
  }
}
```

å› ä¸ºéå—æ§ç»„ä»¶å°†çœŸå®æ•°æ®å‚¨å­˜åœ¨ DOM èŠ‚ç‚¹ä¸­ï¼Œæ‰€ä»¥åœ¨ä½¿ç”¨éå—æ§ç»„ä»¶æ—¶ï¼Œæœ‰æ—¶å€™åè€Œæ›´å®¹æ˜“åŒæ—¶é›†æˆ React å’Œé React ä»£ç ã€‚å¦‚æœä½ ä¸ä»‹æ„ä»£ç ç¾è§‚æ€§ï¼Œå¹¶ä¸”å¸Œæœ›å¿«é€Ÿç¼–å†™ä»£ç ï¼Œä½¿ç”¨éå—æ§ç»„ä»¶å¾€å¾€å¯ä»¥å‡å°‘ä½ çš„ä»£ç é‡ã€‚å¦åˆ™ï¼Œä½ åº”è¯¥ä½¿ç”¨å—æ§ç»„ä»¶ã€‚

#### é»˜è®¤å€¼

åœ¨ React æ¸²æŸ“ç”Ÿå‘½å‘¨æœŸæ—¶ï¼Œè¡¨å•å…ƒç´ ä¸Šçš„ `value` å°†ä¼šè¦†ç›– DOM èŠ‚ç‚¹ä¸­çš„å€¼ï¼Œåœ¨éå—æ§ç»„ä»¶ä¸­ï¼Œä½ ç»å¸¸å¸Œæœ› React èƒ½èµ‹äºˆç»„ä»¶ä¸€ä¸ªåˆå§‹å€¼ï¼Œä½†æ˜¯ä¸å»æ§åˆ¶åç»­çš„æ›´æ–°ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹, ä½ å¯ä»¥æŒ‡å®šä¸€ä¸ª `defaultValue` å±æ€§ï¼Œè€Œä¸æ˜¯ `value`ã€‚

```javascript
render() {
  return (
    <form onSubmit={this.handleSubmit}>
      <label>
        Name:
        <input
          defaultValue="Bob"
          type="text"
          ref={this.input} />
      </label>
      <input type="submit" value="Submit" />
    </form>
  );
}
```

åŒæ ·ï¼Œ`<input type="checkbox">` å’Œ `<input type="radio">` æ”¯æŒ `defaultChecked`ï¼Œ`<select>` å’Œ `<textarea>` æ”¯æŒ `defaultValue`ã€‚

#### æ–‡ä»¶è¾“å…¥

åœ¨ HTML ä¸­ï¼Œ`<input type="file">` å¯ä»¥è®©ç”¨æˆ·é€‰æ‹©ä¸€ä¸ªæˆ–å¤šä¸ªæ–‡ä»¶ä¸Šä¼ åˆ°æœåŠ¡å™¨ï¼Œæˆ–è€…é€šè¿‡ä½¿ç”¨ [File API](https://developer.mozilla.org/en-US/docs/Web/API/File/Using_files_from_web_applications) è¿›è¡Œæ“ä½œã€‚

åœ¨ React ä¸­ï¼Œ`<input type="file">` å§‹ç»ˆæ˜¯ä¸€ä¸ªéå—æ§ç»„ä»¶ï¼Œå› ä¸ºå®ƒçš„å€¼åªèƒ½ç”±ç”¨æˆ·è®¾ç½®ï¼Œè€Œä¸èƒ½é€šè¿‡ä»£ç æ§åˆ¶ã€‚

æ‚¨åº”è¯¥ä½¿ç”¨ File API ä¸æ–‡ä»¶è¿›è¡Œäº¤äº’ã€‚ä¸‹é¢çš„ä¾‹å­æ˜¾ç¤ºäº†å¦‚ä½•åˆ›å»ºä¸€ä¸ª [DOM èŠ‚ç‚¹çš„ ref](https://zh-hans.reactjs.org/docs/refs-and-the-dom.html) ä»è€Œåœ¨æäº¤è¡¨å•æ—¶è·å–æ–‡ä»¶çš„ä¿¡æ¯ã€‚

```javascript
class FileInput extends React.Component {
  constructor(props) {
    super(props);
    this.handleSubmit = this.handleSubmit.bind(this);
    this.fileInput = React.createRef();
  }
  handleSubmit(event) {
    event.preventDefault();
    alert(
      `Selected file - ${this.fileInput.current.files[0].name}`
    );
  }

  render() {
    return (
      <form onSubmit={this.handleSubmit}>
        <label>
          Upload file:
          <input type="file" ref={this.fileInput} />
        </label>
        <br />
        <button type="submit">Submit</button>
      </form>
    );
  }
}

ReactDOM.render(
  <FileInput />,
  document.getElementById('root')
);
```





















































