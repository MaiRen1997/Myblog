---
title: Go的数据类型
date: 2025-06-13 11:19:20
permalink: /pages/df0d9c/
categories:
  - golang
  - Golang基础
tags:
  - 
author: 
  name: Riverside Joy
  link: https://github.com/MaiRen1997
---
# Golang的数据类型

## 概述

1. Go 语言中数据类型分为：基本数据类型和复合数据类型
   1. 基本数据类型有：
      1. 整型
      2. 浮点型
      3. 布尔型
      4. 字符串
2. 复合数据类型有：
   1. 数组
   2. 切片
   3. 结构体
   4. 函数
   5. map
   6. 通道（channel）
   7. 接口

## 占位符print的输出类型

### 通用占位符

1. 分类

   | 占位符 | 说明                                                         |
   | ------ | ------------------------------------------------------------ |
   | %v     | 以默认的方式打印变量(万能占位符，如果不知道什么类型，使用这个，go语言会自动识别) |
   | %T     | 打印变量的类型                                               |
   | %%     | 字面上的百分号，并非值的占位符                               |

2. 补充

   1. %v:默认格式的值，当打印结构时，加号(%+v)会增加字段名

   2. %#v: 会以Go语法格式输出变量

   3. ```go
      package main
      
      import (
          "fmt"
      )
      
      type Person struct {
          Name string
          Age  int
      }
      
      func main() {
          p := Person{Name: "Alice", Age: 30}
          fmt.Printf("%+v\n", p) // 输出：{Name:Alice Age:30}
      }
      ```

   4. ```go
      package main
      
      import (
          "fmt"
      )
      
      type Person struct {
          Name string
          Age  int
      }
      
      func main() {
          p := Person{Name: "Alice", Age: 30}
          fmt.Printf("%#v\n", p) // 输出：main.Person{Name:"Alice", Age:30}
      ```

### 整型

| 占位符 | 说明                |
| ------ | ------------------- |
| %+d    | 带符号的整型        |
| %q     | 打印单引号          |
| %o     | 不带零的八进制      |
| %#o    | 带零的八进制        |
| %x     | 小写的十六进制      |
| %X     | 大写的十六进制      |
| %#x    | 带0x的十六进制      |
| %U     | 打印Unicode字符     |
| %#U    | 打印带字符的Unicode |
| %b     | 打印整型的二进制    |

### 长度的整形

| 占位符 | 说明                            |
| ------ | ------------------------------- |
| %5d    | 整型长度为5，右边对其，左边留白 |
| %-5d   | 左对齐，右边留白                |
| %05d   | 数字前面补零                    |

### 浮点数Float

| 占位符 | 说明                         |
| ------ | ---------------------------- |
| %f     | (=%.6f)6位小数点             |
| %e     | (=%.6e)6位小数点(科学计数法) |
| %g     | 用最少的数字来表示           |
| %.3g   | 最多三位数字来表示           |
| %.3f   | 最多3位小数来表示            |

### String字符串

| 占位符 | 说明                                                 |
| ------ | ---------------------------------------------------- |
| %s     | 正常输出字符串                                       |
| %q     | 字符串带双引号，字符串重的引号带转义符               |
| %#q    | 字符串带反引号，如果字符串内有反引号，就用双引号代替 |
| %x     | 将字符串转换为小写的16进制                           |
| %X     | 将字符串转换为大写的16进制                           |
| % x    | 带空格的16进制                                       |

### String width 指定长度的字符串(以5为例)

| 占位符 | 说明                               |
| ------ | ---------------------------------- |
| %5s    | 最小宽度为5                        |
| %-5s   | 最小宽度为5(左对齐)                |
| %.5s   | 最大宽度为5                        |
| %5.7s  | 最小宽度为5，最大宽度为7           |
| %-5.7s | 最小宽度为5，最大宽度为7(左对齐)   |
| %5.3s  | 如果宽度大于3，则截断              |
| %05s   | 如果宽度小于5，就会在字符串前面补0 |

### Struct结构体

| 占位符 | 说明                               |
| ------ | ---------------------------------- |
| %v     | 以默认的方式打印变量的值           |
| %+v    | 在打印结构体时，会添加字段名       |
| %#v    | 在打印结构体时，会添加字段名和包名 |

### Boolean布尔值

| 占位符 | 说明             |
| ------ | ---------------- |
| %t     | 打印true 或false |

### pointer指针

| 占位符 | 说明                                   |
| ------ | -------------------------------------- |
| %p     | 带0x的指针，指针值带有0x的十六进制前缀 |
| %#p    | 不带0x的指针                           |

## 整型

### 概述

1. 整型的类型有很多中，包括 int8，int16，int32，int64。我们可以根据具体的情况来进行定义

2. 如果我们直接写 int也是可以的，它在不同的操作系统中，int的大小是不一样的

3. 分类

   - 32位操作系统：int  -> int32

   - 64位操作系统：int -> int64
   - ![image-20200719084018801](./images/image-20200719084018801.png)

4. 可以通过unsafe.Sizeof 查看不同长度的整型，在内存里面的存储空间

   1. ```go
      var num2 = 12
      fmt.Println(unsafe.Sizeof(num2))
      ```

### 类型转换

1. 通过在变量前面添加指定类型，就可以进行强制类型转换

   ```go
   var a1 int16 = 10
   var a2 int32 = 12
   var a3 = int32(a1) + a2
   fmt.Println(a3)
   ```

2. 注意

   1. 高位转低位的时候，需要注意，会存在精度丢失，比如上述16转8位的时候，就丢失了

   2. ```go
      var n1 int16 = 130
      fmt.Println(int8(n1)) // 变成 -126

### 数字字面量语法

1. Go1.13版本之后，引入了数字字面量语法，这样便于开发者以二进制、八进制或十六进制浮点数的格式定义数字，例如：

   ```go
   v := 0b00101101  // 代表二进制的101101
   v：= Oo377       // 代表八进制的377
   ```

### 进制转换

1. 示例

   ```go
   var number = 17
   // 原样输出
   fmt.Printf("%v\n", number)
   // 十进制输出
   fmt.Printf("%d\n", number)
   // 以八进制输出
   fmt.Printf("%o\n", number)
   // 以二进制输出
   fmt.Printf("%b\n", number)
   // 以十六进制输出
   fmt.Printf("%x\n", number)
   ```

## 浮点型

1. Go语言支持两种浮点型数：float32和float64。这两种浮点型数据格式遵循IEEE754标准：

   1. float32的浮点数的最大范围约为3.4e38，可以使用常量定义：math.MaxFloat32。
   2. float64的浮点数的最大范围约为1.8e308，可以使用一个常量定义：math.MaxFloat64

2. 打印浮点数时，可以使用fmt包配合动词%f，代码如下：

   ```go
   var pi = math.Pi
   // 打印浮点类型，默认小数点6位
   fmt.Printf("%f\n", pi)
   // 打印浮点类型，打印小数点后2位
   fmt.Printf("%.2f\n", pi)
   ```

### Golang中精度丢失的问题

1. 几乎所有的编程语言都有精度丢失的问题，这是典型的二进制浮点数精度损失问题，在定长条件下，二进制小数和十进制小数互转可能有精度丢失

   ```go
   d := 1129.6
   fmt.Println(d*100) //输出112959.99999999
   ```

2. 解决方法，使用第三方包来解决精度损失的问题

   http://github.com/shopspring/decimal

## 布尔类型

1. 定义

   ```go
   var fl = false
   if f1 {
       fmt.Println("true")
   } else {
       fmt.Println("false")
   }
   ```

## 字符串类型

### 定义

1. 概述

   Go 语言中的字符串以原生数据类型出现，使用字符串就像使用其他原生数据类型（int、bool、float32、float64等）一样。

   Go语言里的字符串的内部实现使用UTF-8编码。

   字符串的值为双引号（"）中的内容，可以在Go语言的源码中直接添加非ASCll码字符

2. 定义单行

   ```go
   s1 := "hello"
   s1 := "你好"
   ```

3. 如果想要定义多行字符串，可以使用反引号

   ```go
   	var str = `第一行
   第二行`
   	fmt.Println(str)
   ```

### 字符串常见操作

1. len(str)：求长度

   1. ```go
      s := "hello"
      length := len(s) // length = 5
      ```

2. +或fmt.Sprintf：拼接字符串

   1. ```go
      s1 := "hello"
      s2 := "world"
      s3 := s1 + " " + s2 // s3 = "hello world"
      ```

   2. ```go
      result := fmt.Sprintf("Hello, %s", "world")
      fmt.Println(result) // 输出: Hello, world
      ```

   3. `fmt.Sprintf` 支持多种格式化选项

      1. `%d`：十进制整数
      2. `%x` 或 `%o`：十六进制或八进制数
      3. `%t`：布尔值
      4. `%f`：浮点数
      5. `%.2f`：浮点数，保留两位小数
      6. `%s`：字符串
      7. `%v`：根据值的默认格式表示

3. []:获取子串

   1. ```go
      s := "Hello, World"
      sub := s[7:12] // sub = "World"
      ```

4. strings.Index()，strings.LastIndex()：子串出现的位置

   ```go
   import "strings"
   
   s := "Hello, World"
   pos := strings.Index(s, "World") // pos = 7
   ```

5. replace替换字串

   ```go
   import "strings"
   
   s := "Hello, World"
   replaced := strings.Replace(s, "World", "Gophers", 1) // replaced = "Hello, Gophers" (只替换第一个匹配项)
   ```

6. strings.Split：分割

   ```go
   import "strings"
   
   s := "a,b,c,d,e"
   parts := strings.Split(s, ",") // parts = ["a", "b", "c", "d", "e"]
   ```

7. 大小写替换

   1. ```go
      import "strings"
      
      s := "Hello, World"
      upper := strings.ToUpper(s) // upper = "HELLO, WORLD"
      lower := strings.ToLower(s) // lower = "hello, world"
      ```

8. 去除字符串空格

   1. ```go
      import "strings"
      
      s := "  Hello, World  "
      trimmed := strings.TrimSpace(s) // trimmed = "Hello, World" (去除前后空格)
      ```

9. 去掉左、右指定字符

   1. ```go
      package main
      
      import (
          "fmt"
          "strings"
      )
      
      func main() {
          s3 := "@@@golang@@@"
          // 将字符左边指定的字符去掉
          s4 := strings.TrimLeft(s3,"@")
          // 将字符右边指定的字符去掉
          s5 := strings.TrimRight(s3,"@")
      
          fmt.Printf("s3 = [%s],s4 = [%s],s5 = [%s]\n", s3,s4,s5)
      
      }
      ```

10. strings.contains：判断是否包含

    1. 返回结果是布尔类型

    2. ```go
       package main
       
       import (
       	"fmt"
       	"strings"
       )
       
       func main() {
       	// 基础用法
       	str := "Hello, 世界!"
       	subStr := "世界"
       	contains := strings.Contains(str, subStr)
       	fmt.Printf("'%s'包含'%s'吗？ %t\n", str, subStr, contains)
       
       	// 空字符串处理
       	fmt.Printf("空字符串检查: %t\n", strings.Contains(str, ""))
       }
       //'Hello, 世界!'包含'世界'吗？ true
       //空字符串检查: true
       ```

11. strings.HasPrefix，strings.HasSuffix：前缀/后缀判断

    1. 返回类型为布尔类型

    2. ```go
       package main
       
       import (
           "fmt"
           "strings"
       )
       
       func main() {
           str := "hello world"
           if strings.HasPrefix(str, "hello") {
               fmt.Println("The string starts with 'hello'")
           } else {
               fmt.Println("The string does not start with 'hello'")
           }
       }
       ```

12. strings.Join()：join操作

    1. ```go
       fmt.Println(strings.Join([]string{"Hello", "World"}, ","))
           // Hello,World
       ```

### 额外实用操作

#### 修改字符串

1. **想要修改字符串，则需要将字符串转换为切片类型进行修改**

2. ```go
   package main
   
   import (
       "fmt"
   )
   
   func main() {
       s1 := "白萝卜"
   
       // 想要修改字符串，则需要将字符串转换为切片类型进行修改。
       s2 := []rune(s1)
       fmt.Println("修改前 --->: ", string(s2))
       s2[0] = '红'
       fmt.Println("修改后 --->: ", string(s2))
   
       // 实际上，s1这个变量压根就没有动过
       fmt.Println("s1 = ", s1)
   }
   ```

#### 遍历字符串

1. **利用for-range循环**

2. **字节切片"[]rune(string)"**

3. ```go
   package main
   
   import (
       "fmt"
   )
   
   func main() {
   
       s1 := "尹正杰2020"
   
       // 遍历字符串方式一: 利用for-range循环
       for index, value := range s1 {
           fmt.Printf("索引为: %d, 数据为: %c\n", index, value)
       }
   
       fmt.Println("---------- 分割线 ----------")
   
       // 遍历字符串方式二: 字节切片"[]rune(string)"
       data := []rune(s1)
   
       for index := 0; index < len(data); index++ {
           fmt.Printf("索引为: %d, 数据为: %c\n", index, data[index])
       }
   
   }
   ```

#### 字符串和整数相互转换

1. ```go
   package main
   
   import (
       "fmt"
       "strconv"
   )
   
   func main() {
   
       var (
           a string = "2030"
           b int    = 2020
       )
   
       // 将字符串转换为一个整数
       x, _ := strconv.Atoi(a)
   
       fmt.Printf("x的类型是: %T, x的值为: %d\n", x, x)
   
       // 整数转换为字符串
   
       y := strconv.Itoa(b)
   
       fmt.Printf("y的类型是: %T, y的值为: %s\n", y, y)
   
   }
   ```

#### 统计一个字符串有几个指定的子串

1. ```go
   package main
   
   import (
       "fmt"
       "strings"
   )
   
   func main() {
   
       source := "Google FaceBook"
       subStr := "oo"
   
       // 统计一个字符串有几个指定的子串
       count := strings.Count(source, subStr)
   
       fmt.Printf("[%s]中出现[%s]的次数是: %d\n", source, subStr, count)
   }
   ```

#### 字符串比较

1. ```go
   package main
   
   import (
       "fmt"
       "strings"
   )
   
   func main() {
   
       password := "HELLO"
   
       input := "hello"
   
       // 忽略大小写的字符串比较
       flag := strings.EqualFold(password, input)
   
       // 区分大小写比较
       flag2 := password == input
   
       fmt.Printf("忽略大小写比较: %s = %s ---> [%t]\n", password, input, flag)
   
       fmt.Printf("区分大小写比较: %s == %s ---> [%t]\n", password, input, flag2)
   
   }
   ```



## byte 和 rune类型

### 概述

1. 组成每个字符串的元素叫做 “字符”，可以通过遍历字符串元素获得字符。字符用单引号 '' 包裹起来

2. Go语言中的字符有以下两种类型

   - uint8类型：或者叫byte型，代表了ACII码的一个字符

   - rune类型：代表一个UTF-8字符

3. 当需要处理中文，日文或者其他复合字符时，则需要用到rune类型，rune类型实际上是一个int32

4. Go使用了特殊的rune类型来处理Unicode，让基于Unicode的文本处理更为方便，也可以使用byte型进行默认字符串处理，性能和扩展性都有照顾。

5. 需要注意的是，在go语言中，一个汉字占用3个字节（utf-8），一个字母占用1个字节

6. ```go
   package main
   import "fmt"
   
   func main() {
   	var a byte = 'a'
   	// 输出的是ASCII码值，也就是说当我们直接输出byte（字符）的时候，输出的是这个字符对应的码值
   	fmt.Println(a)
   	// 输出的是字符
   	fmt.Printf("%c", a)
   
   	// for循环打印字符串里面的字符
   	// 通过len来循环的，相当于打印的是ASCII码
   	s := "你好 golang"
   	for i := 0; i < len(s); i++ {
   		fmt.Printf("%v(%c)\t", s[i], s[i])
   	}
   
   	// 通过rune打印的是 utf-8字符
   	for index, v := range s {
   		fmt.Println(index, v)
   	}
   }
   ```

### 修改字符串

要修改字符串，需要先将其转换成[]rune 或 []byte类型，完成后在转换成string，无论哪种转换都会重新分配内存，并复制字节数组

转换为 []byte 类型

```go
// 字符串转换
s1 := "big"
byteS1 := []byte(s1)
byteS1[0] = 'p'
fmt.Println(string(byteS1))
```

转换为rune类型

```go
// rune类型
s2 := "你好golang"
byteS2 := []rune(s2)
byteS2[0] = '我'
fmt.Println(string(byteS2))
```

## 基本数据类型转换

### 数值类型转换

```go
// 整型和浮点型之间转换
var aa int8 = 20
var bb int16 = 40
fmt.Println(int16(aa) + bb)

// 建议整型转换成浮点型
var cc int8 = 20
var dd float32 = 40
fmt.Println(float32(cc) + dd)
```

建议从低位转换成高位，这样可以避免

### 转换成字符串类型

第一种方式，就是通过 fmt.Sprintf()来转换

```go
// 字符串类型转换
var i int = 20
var f float64 = 12.456
var t bool = true
var b byte = 'a'
str1 := fmt.Sprintf("%d", i)
fmt.Printf("类型：%v-%T \n", str1, str1)

str2 := fmt.Sprintf("%f", f)
fmt.Printf("类型：%v-%T \n", str2, str2)

str3 := fmt.Sprintf("%t", t)
fmt.Printf("类型：%v-%T \n", str3, str3)

str4 := fmt.Sprintf("%c", b)
fmt.Printf("类型：%v-%T \n", str4, str4)
```

第二种方法就是通过strconv包里面的集中转换方法进行转换

```go
// int类型转换str类型
var num1 int64 = 20
s1 := strconv.FormatInt(num1, 10)
fmt.Printf("转换：%v - %T", s1, s1)

// float类型转换成string类型
var num2 float64 = 3.1415926

/*
		参数1：要转换的值
		参数2：格式化类型 'f'表示float，'b'表示二进制，‘e’表示 十进制
		参数3：表示保留的小数点，-1表示不对小数点格式化
		参数4：格式化的类型，传入64位 或者 32位
	 */
s2 := strconv.FormatFloat(num2, 'f', -1, 64)
fmt.Printf("转换：%v-%T", s2, s2)
```

### 字符串转换成int 和 float类型

```go
str := "10"
// 第一个参数：需要转换的数，第二个参数：进制， 参数三：32位或64位
num,_ = strconv.ParseInt(str, 10, 64)

// 转换成float类型
str2 := "3.141592654"
num,_ = strconv.ParseFloat(str2, 10)
```

