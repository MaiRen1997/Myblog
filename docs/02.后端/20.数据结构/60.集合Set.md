---
title: 集合Set
date: 2024-02-20 10:29:01
permalink: /pages/7201b9/
author:
  name: Riverside Joy
  link: https://github.com/MaiRen1997
categories:
  - 后端
  - Python基础
tags:
  - 
---
## 概述

1. 集合是**无序的**，**不重复的**数据集合，它里面的元素是可哈希的(不可变类型)，
2. 但是集合本身是不可哈希（所以集合做不了字典的键）的。
3. 以下是集合最重要的两点：
   1. 去重，把一个列表变成集合，就自动去重了。

   2. 关系测试，测试两组数据之前的交集、差集、并集等关系

4. 集合应该满足以下特性：
   1. **无序性**：一个集合中，每个元素的地位都是相同的，元素之间是无序的。
   2. **互异性**：一个集合中，任何两个元素都是不相同的，即元素在集合中只能出现一次。
   3. **确定性**：给定一个集合和一个任意元素，该元素要么属这个集合，要么不属于这个集合，二者必居其一，不允许有模棱两可的情况出现。
5. 集合元素必须为不可变类型(`hashable`类型)
   1. 通常不可变类型都是`hashable`类型，如整数、浮点、字符串、元组等，
   2. 而可变类型都不是`hashable`类型，因为可变类型无法确定唯一的ID值，所以也就不能放到集合中

## 集合操作

### 创建

1. 在Python中，创建集合可以使用`{}`字面量语法，`{}`中需要至少有一个元素，因为没有元素的`{}`并不是空集合而是一个空字典

   - ```python
     # 创建集合的字面量语法(重复元素不会出现在集合中)
     set1 = {1, 2, 3, 3, 3, 2, 'test123'}
     print(set1)         # {1, 2, 3,'test123'}
     ```

2. 也可以使用内置函数`set`来创建一个集合，准确的说`set`并不是一个函数，而是创建集合对象的构造器

   - ```python
     # 创建集合的构造器语法(后面会讲到什么是构造器)
     set2 = set('hello')
     print(set2)         # {'h', 'l', 'o', 'e'}
     ```

3. 列表转换成集合

   - ```python
     # 将列表转换成集合(可以去掉列表中的重复元素)
     set3 = set([1, 2, 3, 3, 2, 1])
     print(set3)         # {1, 2, 3}
     ```

4. 生成式语法创建

   - ```python
     # 创建集合的生成式语法(将列表生成式的[]换成{})
     set4 = {num for num in range(1, 20) if num % 3 == 0 or num % 5 == 0}
     print(set4)         # {3, 5, 6, 9, 10, 12, 15, 18}
     ```

### 增

#### add

1. 说明

   1. 向集合中添加**单个元素**
   2. **参数是单个元素**（可以是任何可哈希的数据类型）
   3. 如果元素**已存在，则不会重复添加**

2. ```python
   set1 = {'alex','wusir','ritian','egon','barry'}
   set1.add('景女神')
   print(set1)
   ```

#### update

1. 说明
   1. 向集合中添加**多个元素**
   2. **参数是可迭代对象**（列表、元组、字符串、集合、字典等）
   3. **将可迭代对象中的每个元素添加到集合中**

```python
set1 = {'alex','wusir','ritian','egon','barry'}
#update：迭代着增加
set1.update('A')
print(set1)
set1.update('老师')
print(set1)
set1.update([1,2,3])
print(set1)
```

### 删

1. discard

   1. 通过discard方法删除指定元素

   2. ```python
      set1.discard(100)
      set1.discard(99)
      print(set1)    # {1, 10, 33, 55, 1000}
      ```

2. remove

   1. 通过remove方法删除指定元素，建议先做成员运算再删除,否则`元素如果不在集合中就会引发KeyError异常`

   2. ```python
     set1 = {'alex','wusir','ritian','egon','barry'}
     if 'alex' in set1:
     	set1.remove('alex')  # 删除一个元素
     print(set1)
     ```

3. pop

   - ```python
     set1.pop()  # 随机删除一个元素
     print(set1)
     ```

4. clear

   - ```python
     set1.clear()  # 清空集合
     print(set1)
     ```

5. del

   - ```python
     del set1  # 删除集合
     print(set1)
     ```

### 循环遍历

```python
# 集合元素的循环遍历
for elem in set4:
    print(elem)
```

## 交并差集操作

### 成员运算

1. 可以通过成员运算`in`和`not in `检查元素是否在集合中，代码如下所示。

2. ```python
   set1 = {11, 12, 13, 14, 15}
   print(10 in set1)        # False 
   print(15 in set1)        # True
   set2 = {'Python', 'Java', 'Go', 'Swift'}
   print('Ruby' in set2)    # False
   print('Java' in set2)    # True
   ```

### 交集

#### &符实现

```python
set1 = {1,2,3,4,5}
set2 = {4,5,6,7,8}
print(set1 & set2)  # {4, 5}
```

#### intersection关键字实现

```python
set1 = {1,2,3,4,5}
set2 = {4,5,6,7,8}
print(set1.intersection(set2))  # {4, 5}
```

#### 判断是否有交集(isdisjoint)

1. 如果要判断两个集合有没有相同的元素可以使用`isdisjoint`方法，没有相同元素返回`True`，否则返回`False`，代码如下所示

2. ```python
   set1 = {'Java', 'Python', 'Go', 'Kotlin'}
   set2 = {'Kotlin', 'Swift', 'Java', 'Objective-C', 'Dart'}
   set3 = {'HTML', 'CSS', 'JavaScript'}
   print(set1.isdisjoint(set2))    # False
   print(set1.isdisjoint(set3))    # True
   ```

### 并集

#### 使用 | 符号

```python
set1 = {1,2,3,4,5}
set2 = {4,5,6,7,8}
print(set1 | set2)  # {1, 2, 3, 4, 5, 6, 7,8}
```

#### 使用union符号

```python
set1 = {1,2,3,4,5}
set2 = {4,5,6,7,8}

print(set2.union(set1))  # {1, 2, 3, 4, 5, 6, 7,8}
```

### 差集

#### 使用 - 符号

```python
set1 = {1,2,3,4,5}
set2 = {4,5,6,7,8}
print(set1 - set2)  # {1, 2, 3}
```

#### 使用difference

```python
set1 = {1,2,3,4,5}
set2 = {4,5,6,7,8}
print(set1.difference(set2))  # {1, 2, 3}
```

### 反交集

1. ^ 或者 symmetric_difference

2. ```python
   set1 = {1,2,3,4,5}
   set2 = {4,5,6,7,8}
   print(set1 ^ set2)  # {1, 2, 3, 6, 7, 8}
   print(set1.symmetric_difference(set2))  # {1, 2, 3, 6, 7, 8}
   ```

### 判断是否相等

1. 两个集合可以用`==`和`!=`进行相等性判断，

2. 如果两个集合中的元素完全相同，那么`==`比较的结果就是`True`，否则就是`False`

3. ```python
   set1 = {1, 3, 5}
   set2 = {1, 2, 3, 4, 5}
   set3 = {1, 2, 3, 4, 5}
   set4 = set2
   print(set1 == set2) # false
   print(set3 == set2) # true
   print(set4 == set2) # true
   ```

4. 

### 子集与超集

#### 子集

1. 使用< 和issubset

2. ```python
   set1 = {1,2,3}
   set2 = {1,2,3,4,5,6}
   
   print(set1 < set2)
   print(set1.issubset(set2))  # 这两个相同，都是说明set1是set2子集。
   ```

#### 超集

1. 使用> 和issuperset

2. ```python
   set1 = {1,2,3}
   set2 = {1,2,3,4,5,6}
   
   print(set2 > set1)
   print(set2.issuperset(set1))  # 这两个相同，都是说明set2是set1超集。
   ```

### 对称差

#### 使用 ^ 运算符

```python
set1 = {1, 2, 3, 4, 5, 6, 7}
set2 = {2, 4, 6, 8, 10}
print(set1 ^ set2)                        # {1, 3, 5, 7, 8, 10}
```

#### 使用symmetric_difference方法

```python
set1 = {1, 2, 3, 4, 5, 6, 7}
set2 = {2, 4, 6, 8, 10}
print(set1.symmetric_difference(set2))    # {1, 3, 5, 7, 8, 10}
```

#### 对称差相当于两个集合的并集减去交集

```python
set1 = {1, 2, 3, 4, 5, 6, 7}
set2 = {2, 4, 6, 8, 10}
print((set1 | set2) - (set1 & set2))      # {1, 3, 5, 7, 8, 10}
```

### 不可变集合(frozenset)，让集合变成不可变类型。

```python
s = frozenset('barry')
print(s,type(s))  # frozenset({'a', 'y', 'b', 'r'}) <class 'frozenset'>
```











