---
title: 元组tuple
date: 2024-02-20 08:49:34
permalink: /pages/08a3b5/
author:
  name: Riverside Joy
  link: https://github.com/MaiRen1997
categories:
  - 后端
  - Python基础
tags:
  
---
## 说明

1. 对于容器型数据类型list，无论谁都可以对其增删改查，那么有一些重要的数据放在list中是不安全的，所以需要一种容器类的数据类型存放重要的数据，`创建之初只能查看而不能增删改`，这种数据类型就是元组

## 创建元组

### 定义

```python
tu1 = ('a', 'b', '太白', 3, 666)
```

### 注意:一元组的逗号

1. python中元组有一个特性，元组中，有几个元素，就是几元组，`一元组定义时要加逗号`**元组中如果只含有一个元素且没有逗号，则该元组不是元组，与该元素数据类型一致**，

2. 如果有逗号，那么它是元组。

3. 如`b = ('hello')`不是元组， `d = ('hello', )`是一元组

4. ```python
   tu = (1)
   print(tu,type(tu))  # 1 <class 'int'>
   tu1 = ('alex')
   print(tu1,type(tu1))  # 'alex' <class 'str'>
   tu2 = ([1, 2, 3])
   print(tu2,type(tu2))  # [1, 2, 3] <class 'list'>
   
   tu = (1,)
   print(tu,type(tu))  # (1,) <class 'tuple'>
   tu1 = ('alex',)
   print(tu1,type(tu1))  # ('alex',) <class 'tuple'>
   tu2 = ([1, 2, 3],)
   print(tu2,type(tu2))  # ([1, 2, 3],) <class 'tuple'>
   ```

## 索引切片

```python
tu1 = ('a', 'b', '太白', 3, 666)
print(tu1[0])  # 'a'
print(tu1[-1])  # 666
print(tu1[1:3])  # ('b', '太白')
print(tu1[:-1])  # ('a', 'b', '太白', 3)
print(tu1[::2])  # ('a', '太白', 666)
print(tu1[::-1])  # (666, 3, '太白', 'b', 'a')
```

## 元组的查询

### for循环查询

```python
tu1 = ('a', 'b', '太白', 3, 666)
for i in tu1:
    print(i)
```

### index

1. 通过元素找索引（可切片），找到第一个元素就返回，找不到该元素即报错

2. ```python
   tu = ('太白', [1, 2, 3, ], 'WuSir', '女神')
   print(tu.index('太白')) # 0
   ```

### count

1. 获取某元素在列表中出现的次数

2. ```python
   tu = ('太白', '太白', 'WuSir', '吴超')
   print(tu.count('太白')) # 2
   ```

### len

1. 获取元组长度

2. ```python
   tu1 = (1,2,3,4,84,5,2,8,2,11,88,2)
   print(len(tu1)) # 12
   ```

### 成员运算

```python
# 成员运算
print(100 in t1)    # False
print(40 in t2)     # True
```

### 拼接

```python
# 拼接
t3 = t1 + t2
print(t3)           # (30, 10, 55, '骆昊', 40, True, '四川成都')
```

## 元组应用场景

### 打包和解包操作

1. 当我们把多个用逗号分隔的值赋给一个变量时，多个值会打包成一个元组类型；

2. 当我们把一个元组赋值给多个变量时，元组会解包成多个值然后分别赋给对应的变量，如下面的代码所示：

   ```python
   # 打包
   a = 1, 10, 100
   print(type(a), a)    # <class 'tuple'> (1, 10, 100)
   # 解包
   i, j, k = a
   print(i, j, k)       # 1 10 100
   ```

3. 在解包时，如果解包出来的元素个数和变量个数不对应，会引发`ValueError`异常，错误信息为：`too many values to unpack`（解包的值太多）或`not enough values to unpack`（解包的值不足）。

   ```python
   a = 1, 10, 100, 1000
   # i, j, k = a             # ValueError: too many values to unpack (expected 3)
   # i, j, k, l, m, n = a    # ValueError: not enough values to unpack (expected 6, got 4)
   ```

4. `有一种解决变量个数少于元素的个数方法，就是使用星号表达式`，我们之前讲函数的可变参数时使用过星号表达式。有了星号表达式，我们就可以让一个变量接收多个值，代码如下所示。需要注意的是，用星号表达式修饰的变量会变成一个列表，列表中有0个或多个元素。还有在解包语法中，星号表达式只能出现一次。

   ```python
   a = 1, 10, 100, 1000
   i, j, *k = a
   print(i, j, k)          # 1 10 [100, 1000]
   i, *j, k = a
   print(i, j, k)          # 1 [10, 100] 1000
   *i, j, k = a
   print(i, j, k)          # [1, 10] 100 1000
   *i, j = a
   print(i, j)             # [1, 10, 100] 1000
   i, *j = a
   print(i, j)             # 1 [10, 100, 1000]
   i, j, k, *l = a
   print(i, j, k, l)       # 1 10 100 [1000]
   i, j, k, l, *m = a
   print(i, j, k, l, m)    # 1 10 100 1000 []
   ```

5. 需要说明一点，解包语法对所有的序列都成立，这就意味着对列表以及我们之前讲到的`range`函数返回的范围序列都可以使用解包语法。大家可以尝试运行下面的代码，看看会出现怎样的结果。

   ```python
   a, b, *c = range(1, 10)
   print(a, b, c)
   a, b, c = [1, 10, 100]
   print(a, b, c)
   a, *b, c = 'hello'
   print(a, b, c)
   ```

### 交换两个变量的值

1. 交换两个变量的值是编程语言中的一个经典案例，在很多编程语言中，交换两个变量的值都需要借助一个中间变量才能做到，如果不用中间变量就需要使用比较晦涩的位运算来实现。在Python中，交换两个变量`a`和`b`的值只需要使用如下所示的代码。

   ```python
   a, b = b, a
   ```

2. 同理，如果要将三个变量`a`、`b`、`c`的值互换，即`b`赋给`a`，`c`赋给`b`，`a`赋给`c`，也可以如法炮制。

   ```python
   a, b, c = b, c, a
   ```

3. 需要说明的是，上面并没有用到打包和解包语法，Python的字节码指令中有`ROT_TWO`和`ROT_THREE`这样的指令可以实现这个操作，效率是非常高的。但是如果有多于三个变量的值要依次互换，这个时候没有直接可用的字节码指令，执行的原理就是我们上面讲解的打包和解包操作。

## 元组和列表的比较

这里还有一个非常值得探讨的问题，Python中已经有了列表类型，为什么还需要元组这样的类型呢？这个问题对于初学者来说似乎有点困难，不过没有关系，我们先抛出观点，大家可以一边学习一边慢慢体会。

1. 元组是不可变类型，**不可变类型更适合多线程环境**，因为它降低了并发访问变量的同步化开销。关于这一点，我们会在后面讲解多线程的时候为大家详细论述。

2. 元组是不可变类型，通常**不可变类型在创建时间和占用空间上面都优于对应的可变类型**。我们可以使用`sys`模块的`getsizeof`函数来检查保存相同元素的元组和列表各自占用了多少内存空间。我们也可以使用`timeit`模块的`timeit`函数来看看创建保存相同元素的元组和列表各自花费的时间，代码如下所示。

   ```python
   import sys
   import timeit
   
   a = list(range(100000))
   b = tuple(range(100000))
   print(sys.getsizeof(a), sys.getsizeof(b))    # 900120 800056
   
   print(timeit.timeit('[1, 2, 3, 4, 5, 6, 7, 8, 9]'))
   print(timeit.timeit('(1, 2, 3, 4, 5, 6, 7, 8, 9)'))
   ```

3. Python中的元组和列表是可以相互转换的，我们可以通过下面的代码来做到

   ```python
   # 将元组转换成列表
   info = ('test1', 175, True, 'test2')
   print(list(info))       # ['test1', 175, True, 'test2']
   # 将列表转换成元组
   fruits = ['apple', 'banana', 'orange']
   print(tuple(fruits))    # ('apple', 'banana', 'orange')
   ```

   











































