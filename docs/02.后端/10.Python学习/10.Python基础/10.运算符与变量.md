---
title: 运算符与变量
date: 2024-01-13 13:25:51
permalink: /pages/2d957c/
author:
  name: Riverside Joy
  link: https://github.com/MaiRen1997
categories:
  - 后端
  - Python基础
tags:
  - python基础
---
## 变量、常量、注释

### 变量

1. 变量全部由数字、字母、下划线任意组合

2. 不能以数字开头

3. 不能使用python关键字

   | and   | as     | assert | break  | continue | def     |
   | ----- | ------ | ------ | ------ | -------- | ------- |
   | del   | elif   | else   | except | exec     | finally |
   | for   | from   | global | if     | import   | in      |
   | is    | lambda | not    | or     | pass     | print   |
   | raise | return | try    | while  | with     | yield   |

4. 要具有描述性，有实际意义

5. 不能使用中文

6. 不能过长

7. 推荐

   - 驼峰体： ShowMessage
   - 下划线：show_message

8. 额外说明

   :::tip

   在变量赋值的时候:

   1. 如果等号右边是简单类型，那么就赋值的值
   2. 如果等号右边是复杂类型，那么就赋值的地址

   :::

### 获取变量地址

```python
name = '测试'
print(id(name))  # 1585831283968
```

### 注释

1. 单行注释： # 被注释内容
2. 多行数值 
   - '''被注释内容'''
   - """被注释内容"""

### 常量

在Python中没有一个专门的语法代表常量，程序员约定俗成用变量名全部大写代表常量

```python
PI = 3.1415926
```

## 程序交互 (input)

1. 说明

   使用关键字`input`

   input所创建的变量，都是字符串类型

2. 示例代码

   ```python
   # 可以让用户输入多个信息，
   name = input("What is your name?")
   age = input("How old are you?")
   hometown = input("Where is your hometown?")
   
   print("Hello ",name , "your are ", age , "years old, you came from",hometown)
   ```

## 运算符

### 常用运算符

| 运算符                                                       | 描述                           |
| ------------------------------------------------------------ | ------------------------------ |
| `[]` `[:]`                                                   | 下标，切片                     |
| `**`                                                         | 指数                           |
| `~` `+` `-`                                                  | 按位取反, 正负号               |
| `*` `/` `%` `//`                                             | 乘，除，模，整除               |
| `+` `-`                                                      | 加，减                         |
| `>>` `<<`                                                    | 右移，左移                     |
| `&`                                                          | 按位与                         |
| `^` `\|`                                                     | 按位异或，按位或               |
| `<=` `<` `>` `>=`                                            | 小于等于，小于，大于，大于等于 |
| `==` `!=`                                                    | 等于，不等于                   |
| `is`、 `is not`                                              | 身份运算符                     |
| `in`、 `not in`                                              | 成员运算符                     |
| `not`、 `or`、 `and`                                         | 逻辑运算符                     |
| `=` `+=` `-=` `*=` `/=` `%=` `//=` `**=` `&=` `|=` `^=` `>>=` `<<=` | （复合）赋值运算符             |

### 算术运算符

| 运算符 | 描述                    | 示例 |
| ------ | ----------------------- | ---- |
| +      | 加                      |      |
| -      | 减                      |      |
| *      | 乘                      |      |
| /      | 除                      |      |
| %      | 取模-返回除法的余数     |      |
| **     | 幂-返回x的y次幂         |      |
| //     | 取整除-返回商的整数部分 |      |

### 比较运算符

1. 运算符列举

   | 运算符 | 描述       | 示例 |
   | ------ | ---------- | ---- |
   | ==     | 是否等于   |      |
   | !=     | 是否不等于 |      |
   | <>     | 不等于     |      |
   | >      | 大于       |      |
   | <      | 小于       |      |
   | >=     | 大于等于   |      |
   | <=     | 小于等于   |      |

2. 说明

   :::tip

   **== 是比较的两边的数值是否相等**

   **is 是比较的两边的内存地址是否相等**。 如果内存地址相等，那么这两边其实是指向同一个内存地址

   ```python
   temp1 = 1000
   temp2 = 1000
   print(temp1 == temp2) # true
   print(temp1 is temp2) # false
   ```

   :::

### 赋值运算符

以下假设变量：a=10，b=20

| 运算符 | 描述         | 示例                   |
| ------ | ------------ | ---------------------- |
| =      | 赋值         | c=a+b                  |
| +=     | 加后赋值     | c=+a   等效于c = c + a |
| -=     | 减后赋值     |                        |
| *=     | 乘后赋值     |                        |
| /=     | 除后赋值     |                        |
| %=     | 取模赋值     |                        |
| **=    | 幂运算后赋值 |                        |
| //=    | 取整除赋值   |                        |

### 逻辑运算符

| 运算符 | 描述   | 示例 |
| ------ | ------ | ---- |
| and    | 布尔与 |      |
| or     | 布尔或 |      |
| not    | 布尔非 |      |

### 成员运算符

判断子元素是否在原字符串（字典，列表，集合）中：

| 运算符 | 描述                                        | 示例 |
| ------ | ------------------------------------------- | ---- |
| in     | 如果在序列中找到值，返回True，否则返回False |      |
| not in | 如果在序列中找到值，返回False，否则返回True |      |

```python
print('y' not in 'ofkjdslaf')
```

### Python 运算符优先级

| 运算符                   | 描述                                                   |
| ------------------------ | ------------------------------------------------------ |
| **                       | 指数 (最高优先级)                                      |
| ~ + -                    | 按位翻转, 一元加号和减号 (最后两个的方法名为 +@ 和 -@) |
| * / % //                 | 乘，除，取模和取整除                                   |
| + -                      | 加法减法                                               |
| >> <<                    | 右移，左移运算符                                       |
| &                        | 位 'AND'                                               |
| ^ \|                     | 位运算符                                               |
| <= < > >=                | 比较运算符                                             |
| <> == !=                 | 等于运算符                                             |
| = %= /= //= -= += *= **= | 赋值运算符                                             |
| is is not                | 身份运算符                                             |
| in not in                | 成员运算符                                             |
| not and or               | 逻辑运算符                                             |

## 格式化输出

### 传统%格式化

1. `%s` - 字符串

2. `%d` - 十进制整数

3. `%f` - 浮点数

4. `%x` - 十六进制整数

5. `%o` - 八进制整数

6. `%e` - 科学计数法

7. `%g` - 自动选择 %f 或 %e

8. `%%` - 输出 % 字符

   ```python
   msg = "我是%s,年龄%d,"%('张三',18)
   ```

9. 注意

   :::tip

   如文字里面有%号，那么只需要再写一个%，进行转义即可

   ```python
   msg = "我是%s,年龄%d,目前学习进度为80%%"%('金鑫',18)
   print(msg)
   ```

   :::

### str.format()(python2.6+)

```python
# 位置参数
print("Name: {}, Age: {}, Height: {:.2f}".format(name, age, height))

# 关键字参数
print("Name: {n}, Age: {a}, Height: {h:.2f}".format(n=name, a=age, h=height))

# 索引
print("{0} is {1} years old. {0} is a programmer.".format(name, age))

# 格式化选项
print("Height: {:.2f}".format(height))      # 保留2位小数
print("Age: {:04d}".format(age))           # 宽度4，前导0
print("Price: {:,.2f}".format(1000000.5))  # 千位分隔符
```

### f-string()(python3.6+)

1. 具体见f-string的详细文档

## 类型总结

### 按存储空间的占用分(从低到高)

```
数字
字符串
集合：无序，即无序存索引相关信息
元组：有序，需要存索引相关信息，不可变
列表：有序，需要存索引相关信息，可变，需要处理数据的增删改
字典：有序，需要存key与value映射的相关信息，可变，需要处理数据的增删改（3.6之后有序）
```

### 按存值个数区分

| 标量/原子类型 | 数字，字符串     |
| ------------- | ---------------- |
| 容器类型      | 列表，元组，字典 |

### 按可变不可变区分

| 可变   | 列表，字典                 |
| ------ | -------------------------- |
| 不可变 | 数字，字符串，元组，布尔值 |

### 按访问顺序区分

| 直接访问            | 数字               |
| ------------------- | ------------------ |
| 顺序访问(序列类型)  | 字符串，列表，元组 |
| key值访问(映射类型) | 字典               |

## 代码块缓存机制

### 定义

Python程序是由代码块构造的。块是一个python程序的文本，他是作为一个单元执行的。

代码块：一个模块，一个函数，一个类，一个文件等都是一个代码块。

而`作为交互方式输入的每个命令都是一个代码块`。

什么叫交互方式？就是咱们在cmd中进入Python解释器里面，每一行代码都是一个代码块，例如：

![img](https://cdn.jsdelivr.net/gh/MaiRen1997/mdPic/vueImg/202402221530725.png)

而对于一个文件中的两个函数，也分别是两个不同的代码块：

![img](https://cdn.jsdelivr.net/gh/MaiRen1997/mdPic/vueImg/202402221530757.png)

### 代码块缓存机制

Python在执行同一个代码块的初始化对象的命令时，会检查是否其值是否已经存在，如果存在，会将其重用

会将初始化的这个变量与值存储在一个字典中，在遇到新的变量时，会先在字典中查询记录，如果有同样的记录那么它会重复使用这个字典中的之前的这个值。所以在你给出的例子中，文件执行时（同一个代码块）会把i1、i2两个变量指向同一个对象，`满足缓存机制则他们在内存中只存在一个，即：id相同。`

**适用对象**： int（float），str，bool。

#### 对象的具体细则:

　　int(float):任何数字在同一代码块下都会复用。

　　bool:True和False在字典中会以1，0方式存在，并且复用。

　　str：几乎所有的字符串都会符合缓存机制，具体规定如下（**了解即可！**）：

1. 非乘法得到的字符串都满足代码块的缓存机制：

   ```python
   s1 = '太白@！#*ewq'
   s2 = '太白@！#*ewq'
   print(s1 is s2)  # True
   ```

2. 乘法得到的字符串分两种情况：

   1. 乘数为1时，任何字符串满足代码块的缓存机制：

      ```python
      b1 = '太白@5847395QQ0743895*&^%$#((&_+(())' *1
      a1 = '太白@5847395QQ0743895*&^%$#((&_+(())' *1
      
      print(a1 is b1)  # True
      ```

   2. 乘数>=2时：仅含大小写字母，数字，下划线，总长度<=20，满足代码块的缓存机制：

      ```python
      s1 = 'old_' * 5
      s2 = 'old_' * 5
      print(s1 is s2)  # True
      ```

      **优点**：能够提高一些字符串，整数处理人物在时间和空间上的性能；需要值相同的字符串，整数的时候，直接从‘字典’中取出复用，避免频繁的创建和销毁，提升效率，节约内存。

      



























