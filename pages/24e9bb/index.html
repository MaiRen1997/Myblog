<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>vue3的使用 | 麦仁博客</title>
    <meta name="generator" content="VuePress 1.9.9">
    
    <meta name="description" content="记录前端知识、读书学习">
    
    <link rel="preload" href="/Myblog/assets/css/0.styles.6ca8d52e.css" as="style"><link rel="preload" href="/Myblog/assets/js/app.6243254d.js" as="script"><link rel="preload" href="/Myblog/assets/js/2.3c9f4522.js" as="script"><link rel="preload" href="/Myblog/assets/js/167.b180466f.js" as="script"><link rel="prefetch" href="/Myblog/assets/js/10.d298e064.js"><link rel="prefetch" href="/Myblog/assets/js/100.4bae90e1.js"><link rel="prefetch" href="/Myblog/assets/js/101.24979377.js"><link rel="prefetch" href="/Myblog/assets/js/102.750f22fb.js"><link rel="prefetch" href="/Myblog/assets/js/103.6db43e9b.js"><link rel="prefetch" href="/Myblog/assets/js/104.bf333645.js"><link rel="prefetch" href="/Myblog/assets/js/105.559724f1.js"><link rel="prefetch" href="/Myblog/assets/js/106.1d6a81fd.js"><link rel="prefetch" href="/Myblog/assets/js/107.be90c420.js"><link rel="prefetch" href="/Myblog/assets/js/108.6f352a20.js"><link rel="prefetch" href="/Myblog/assets/js/109.6d0fb7e7.js"><link rel="prefetch" href="/Myblog/assets/js/11.3d886a88.js"><link rel="prefetch" href="/Myblog/assets/js/110.c8f18719.js"><link rel="prefetch" href="/Myblog/assets/js/111.e6c34327.js"><link rel="prefetch" href="/Myblog/assets/js/112.efcf4b30.js"><link rel="prefetch" href="/Myblog/assets/js/113.5701d429.js"><link rel="prefetch" href="/Myblog/assets/js/114.ed90a5c4.js"><link rel="prefetch" href="/Myblog/assets/js/115.cc031d5e.js"><link rel="prefetch" href="/Myblog/assets/js/116.116c0282.js"><link rel="prefetch" href="/Myblog/assets/js/117.0a697cc9.js"><link rel="prefetch" href="/Myblog/assets/js/118.88df0fd9.js"><link rel="prefetch" href="/Myblog/assets/js/119.bb704fff.js"><link rel="prefetch" href="/Myblog/assets/js/12.6d6701a6.js"><link rel="prefetch" href="/Myblog/assets/js/120.e02f7cf2.js"><link rel="prefetch" href="/Myblog/assets/js/121.c3b717ef.js"><link rel="prefetch" href="/Myblog/assets/js/122.fc255960.js"><link rel="prefetch" href="/Myblog/assets/js/123.0647e453.js"><link rel="prefetch" href="/Myblog/assets/js/124.3a8fc832.js"><link rel="prefetch" href="/Myblog/assets/js/125.73a7df1a.js"><link rel="prefetch" href="/Myblog/assets/js/126.f5a4520d.js"><link rel="prefetch" href="/Myblog/assets/js/127.a5b1bb05.js"><link rel="prefetch" href="/Myblog/assets/js/128.f4fc3c51.js"><link rel="prefetch" href="/Myblog/assets/js/129.87883624.js"><link rel="prefetch" href="/Myblog/assets/js/13.15a6034f.js"><link rel="prefetch" href="/Myblog/assets/js/130.e6be86ed.js"><link rel="prefetch" href="/Myblog/assets/js/131.a10a3312.js"><link rel="prefetch" href="/Myblog/assets/js/132.a31dfdeb.js"><link rel="prefetch" href="/Myblog/assets/js/133.0063f791.js"><link rel="prefetch" href="/Myblog/assets/js/134.4883ebfe.js"><link rel="prefetch" href="/Myblog/assets/js/135.41d91097.js"><link rel="prefetch" href="/Myblog/assets/js/136.565ccdf6.js"><link rel="prefetch" href="/Myblog/assets/js/137.75ff80f3.js"><link rel="prefetch" href="/Myblog/assets/js/138.af009bbe.js"><link rel="prefetch" href="/Myblog/assets/js/139.cbf74b44.js"><link rel="prefetch" href="/Myblog/assets/js/14.8d08059a.js"><link rel="prefetch" href="/Myblog/assets/js/140.50686333.js"><link rel="prefetch" href="/Myblog/assets/js/141.ec20c299.js"><link rel="prefetch" href="/Myblog/assets/js/142.ac4595ce.js"><link rel="prefetch" href="/Myblog/assets/js/143.9645affd.js"><link rel="prefetch" href="/Myblog/assets/js/144.fb5e4c21.js"><link rel="prefetch" href="/Myblog/assets/js/145.13617be7.js"><link rel="prefetch" href="/Myblog/assets/js/146.f3d18b5e.js"><link rel="prefetch" href="/Myblog/assets/js/147.685cf699.js"><link rel="prefetch" href="/Myblog/assets/js/148.471f7518.js"><link rel="prefetch" href="/Myblog/assets/js/149.672aeb76.js"><link rel="prefetch" href="/Myblog/assets/js/15.5a60c15e.js"><link rel="prefetch" href="/Myblog/assets/js/150.e6d4c3fc.js"><link rel="prefetch" href="/Myblog/assets/js/151.27b6befb.js"><link rel="prefetch" href="/Myblog/assets/js/152.cc1e5078.js"><link rel="prefetch" href="/Myblog/assets/js/153.bc3e1575.js"><link rel="prefetch" href="/Myblog/assets/js/154.afdd09bb.js"><link rel="prefetch" href="/Myblog/assets/js/155.3f2b920c.js"><link rel="prefetch" href="/Myblog/assets/js/156.40acb896.js"><link rel="prefetch" href="/Myblog/assets/js/157.109be7d8.js"><link rel="prefetch" href="/Myblog/assets/js/158.7dd2bdc6.js"><link rel="prefetch" href="/Myblog/assets/js/159.463d79c5.js"><link rel="prefetch" href="/Myblog/assets/js/16.549fcf2d.js"><link rel="prefetch" href="/Myblog/assets/js/160.8cce01bb.js"><link rel="prefetch" href="/Myblog/assets/js/161.f98b5d73.js"><link rel="prefetch" href="/Myblog/assets/js/162.da211cc1.js"><link rel="prefetch" href="/Myblog/assets/js/163.872e8836.js"><link rel="prefetch" href="/Myblog/assets/js/164.504df6bd.js"><link rel="prefetch" href="/Myblog/assets/js/165.5d9d29f3.js"><link rel="prefetch" href="/Myblog/assets/js/166.7ba2739b.js"><link rel="prefetch" href="/Myblog/assets/js/168.5938d0c1.js"><link rel="prefetch" href="/Myblog/assets/js/169.f9cab6dd.js"><link rel="prefetch" href="/Myblog/assets/js/17.38ad1577.js"><link rel="prefetch" href="/Myblog/assets/js/170.aaababfe.js"><link rel="prefetch" href="/Myblog/assets/js/171.6409e980.js"><link rel="prefetch" href="/Myblog/assets/js/172.b5020285.js"><link rel="prefetch" href="/Myblog/assets/js/173.309b7f8b.js"><link rel="prefetch" href="/Myblog/assets/js/174.af2e8624.js"><link rel="prefetch" href="/Myblog/assets/js/175.770a9d5f.js"><link rel="prefetch" href="/Myblog/assets/js/176.c0cf047c.js"><link rel="prefetch" href="/Myblog/assets/js/177.76712619.js"><link rel="prefetch" href="/Myblog/assets/js/178.976e0cf3.js"><link rel="prefetch" href="/Myblog/assets/js/179.3ae55f58.js"><link rel="prefetch" href="/Myblog/assets/js/18.47f2d741.js"><link rel="prefetch" href="/Myblog/assets/js/180.5ea80801.js"><link rel="prefetch" href="/Myblog/assets/js/181.961067b1.js"><link rel="prefetch" href="/Myblog/assets/js/182.ba78f232.js"><link rel="prefetch" href="/Myblog/assets/js/183.a09ad48d.js"><link rel="prefetch" href="/Myblog/assets/js/184.398916dd.js"><link rel="prefetch" href="/Myblog/assets/js/185.44c6b505.js"><link rel="prefetch" href="/Myblog/assets/js/186.1bfcfe92.js"><link rel="prefetch" href="/Myblog/assets/js/187.06d866e5.js"><link rel="prefetch" href="/Myblog/assets/js/188.3fe55b3e.js"><link rel="prefetch" href="/Myblog/assets/js/189.d8d5aacf.js"><link rel="prefetch" href="/Myblog/assets/js/19.c88be38e.js"><link rel="prefetch" href="/Myblog/assets/js/190.6eedd6a1.js"><link rel="prefetch" href="/Myblog/assets/js/191.8f13a16b.js"><link rel="prefetch" href="/Myblog/assets/js/192.4ca2da64.js"><link rel="prefetch" href="/Myblog/assets/js/193.3a77564d.js"><link rel="prefetch" href="/Myblog/assets/js/194.ff1be5a9.js"><link rel="prefetch" href="/Myblog/assets/js/195.d4c3ec31.js"><link rel="prefetch" href="/Myblog/assets/js/196.64347363.js"><link rel="prefetch" href="/Myblog/assets/js/197.f510de99.js"><link rel="prefetch" href="/Myblog/assets/js/198.4c1ab562.js"><link rel="prefetch" href="/Myblog/assets/js/199.6a26473a.js"><link rel="prefetch" href="/Myblog/assets/js/20.f9152f96.js"><link rel="prefetch" href="/Myblog/assets/js/200.973becbc.js"><link rel="prefetch" href="/Myblog/assets/js/201.b75a44e8.js"><link rel="prefetch" href="/Myblog/assets/js/202.190bc9f1.js"><link rel="prefetch" href="/Myblog/assets/js/203.e219c4e2.js"><link rel="prefetch" href="/Myblog/assets/js/204.fce29c59.js"><link rel="prefetch" href="/Myblog/assets/js/205.decdcc52.js"><link rel="prefetch" href="/Myblog/assets/js/206.ce8fed41.js"><link rel="prefetch" href="/Myblog/assets/js/207.446ce6af.js"><link rel="prefetch" href="/Myblog/assets/js/208.1369a2bc.js"><link rel="prefetch" href="/Myblog/assets/js/209.97fa3ae9.js"><link rel="prefetch" href="/Myblog/assets/js/21.451bffe0.js"><link rel="prefetch" href="/Myblog/assets/js/210.bd6c4985.js"><link rel="prefetch" href="/Myblog/assets/js/211.7a52ae30.js"><link rel="prefetch" href="/Myblog/assets/js/212.0dd785b1.js"><link rel="prefetch" href="/Myblog/assets/js/213.50cd97ce.js"><link rel="prefetch" href="/Myblog/assets/js/214.c0c76751.js"><link rel="prefetch" href="/Myblog/assets/js/215.2ab59558.js"><link rel="prefetch" href="/Myblog/assets/js/216.f048e743.js"><link rel="prefetch" href="/Myblog/assets/js/217.8aba429f.js"><link rel="prefetch" href="/Myblog/assets/js/218.9c67084f.js"><link rel="prefetch" href="/Myblog/assets/js/219.86650ef5.js"><link rel="prefetch" href="/Myblog/assets/js/22.f6172ca2.js"><link rel="prefetch" href="/Myblog/assets/js/220.bc0c127c.js"><link rel="prefetch" href="/Myblog/assets/js/221.39123aa6.js"><link rel="prefetch" href="/Myblog/assets/js/222.7d8c8ee5.js"><link rel="prefetch" href="/Myblog/assets/js/223.df30f680.js"><link rel="prefetch" href="/Myblog/assets/js/224.09f5b64d.js"><link rel="prefetch" href="/Myblog/assets/js/225.c0fae4aa.js"><link rel="prefetch" href="/Myblog/assets/js/226.dd61899a.js"><link rel="prefetch" href="/Myblog/assets/js/227.3b593c00.js"><link rel="prefetch" href="/Myblog/assets/js/228.68ef7511.js"><link rel="prefetch" href="/Myblog/assets/js/229.21c6e4b5.js"><link rel="prefetch" href="/Myblog/assets/js/23.6599163d.js"><link rel="prefetch" href="/Myblog/assets/js/230.fd63d013.js"><link rel="prefetch" href="/Myblog/assets/js/231.d9acdaeb.js"><link rel="prefetch" href="/Myblog/assets/js/232.c580bf2b.js"><link rel="prefetch" href="/Myblog/assets/js/233.fecf45f8.js"><link rel="prefetch" href="/Myblog/assets/js/234.35893743.js"><link rel="prefetch" href="/Myblog/assets/js/235.1885b204.js"><link rel="prefetch" href="/Myblog/assets/js/236.f247adb6.js"><link rel="prefetch" href="/Myblog/assets/js/237.6a43b36d.js"><link rel="prefetch" href="/Myblog/assets/js/238.17a7b66d.js"><link rel="prefetch" href="/Myblog/assets/js/239.0ce09ded.js"><link rel="prefetch" href="/Myblog/assets/js/24.a3c3ac64.js"><link rel="prefetch" href="/Myblog/assets/js/240.bb0ba77e.js"><link rel="prefetch" href="/Myblog/assets/js/241.a7748992.js"><link rel="prefetch" href="/Myblog/assets/js/242.9ec08a0f.js"><link rel="prefetch" href="/Myblog/assets/js/243.65f201bd.js"><link rel="prefetch" href="/Myblog/assets/js/244.1245f98e.js"><link rel="prefetch" href="/Myblog/assets/js/245.7cee496a.js"><link rel="prefetch" href="/Myblog/assets/js/246.dba35ae0.js"><link rel="prefetch" href="/Myblog/assets/js/247.71d7faca.js"><link rel="prefetch" href="/Myblog/assets/js/248.ccd3506f.js"><link rel="prefetch" href="/Myblog/assets/js/249.e7d4ad1f.js"><link rel="prefetch" href="/Myblog/assets/js/25.d0a864bb.js"><link rel="prefetch" href="/Myblog/assets/js/250.94dcf29e.js"><link rel="prefetch" href="/Myblog/assets/js/251.6229fb22.js"><link rel="prefetch" href="/Myblog/assets/js/252.0c52ff15.js"><link rel="prefetch" href="/Myblog/assets/js/253.afebbe55.js"><link rel="prefetch" href="/Myblog/assets/js/254.c26edb20.js"><link rel="prefetch" href="/Myblog/assets/js/255.0a3da330.js"><link rel="prefetch" href="/Myblog/assets/js/256.fe7485cd.js"><link rel="prefetch" href="/Myblog/assets/js/257.6b8f5325.js"><link rel="prefetch" href="/Myblog/assets/js/258.1d645aa5.js"><link rel="prefetch" href="/Myblog/assets/js/259.8f6aaeab.js"><link rel="prefetch" href="/Myblog/assets/js/26.902a246c.js"><link rel="prefetch" href="/Myblog/assets/js/260.354fc022.js"><link rel="prefetch" href="/Myblog/assets/js/261.55b0ae07.js"><link rel="prefetch" href="/Myblog/assets/js/262.837d9e1b.js"><link rel="prefetch" href="/Myblog/assets/js/263.973cc83b.js"><link rel="prefetch" href="/Myblog/assets/js/264.7969ac52.js"><link rel="prefetch" href="/Myblog/assets/js/265.d50a6411.js"><link rel="prefetch" href="/Myblog/assets/js/266.5770d6ad.js"><link rel="prefetch" href="/Myblog/assets/js/267.ce290de3.js"><link rel="prefetch" href="/Myblog/assets/js/268.8bdd44b1.js"><link rel="prefetch" href="/Myblog/assets/js/269.85c48d26.js"><link rel="prefetch" href="/Myblog/assets/js/27.c16908d4.js"><link rel="prefetch" href="/Myblog/assets/js/270.a29a974a.js"><link rel="prefetch" href="/Myblog/assets/js/271.a7b013ee.js"><link rel="prefetch" href="/Myblog/assets/js/272.04e65590.js"><link rel="prefetch" href="/Myblog/assets/js/273.9e124ddc.js"><link rel="prefetch" href="/Myblog/assets/js/274.8374300a.js"><link rel="prefetch" href="/Myblog/assets/js/275.74e75405.js"><link rel="prefetch" href="/Myblog/assets/js/276.66a40e69.js"><link rel="prefetch" href="/Myblog/assets/js/277.982dae81.js"><link rel="prefetch" href="/Myblog/assets/js/278.46b4d55b.js"><link rel="prefetch" href="/Myblog/assets/js/279.42ce0181.js"><link rel="prefetch" href="/Myblog/assets/js/28.8ebf9353.js"><link rel="prefetch" href="/Myblog/assets/js/280.0d2455a3.js"><link rel="prefetch" href="/Myblog/assets/js/281.f8332e4b.js"><link rel="prefetch" href="/Myblog/assets/js/282.fdcd78ac.js"><link rel="prefetch" href="/Myblog/assets/js/283.7c88d847.js"><link rel="prefetch" href="/Myblog/assets/js/284.b832d75e.js"><link rel="prefetch" href="/Myblog/assets/js/285.abd4ebe4.js"><link rel="prefetch" href="/Myblog/assets/js/286.c4630f66.js"><link rel="prefetch" href="/Myblog/assets/js/287.6b4fc9ee.js"><link rel="prefetch" href="/Myblog/assets/js/288.0bbe4b3b.js"><link rel="prefetch" href="/Myblog/assets/js/289.52903b05.js"><link rel="prefetch" href="/Myblog/assets/js/29.d15c600a.js"><link rel="prefetch" href="/Myblog/assets/js/290.c1a864d1.js"><link rel="prefetch" href="/Myblog/assets/js/291.d11e4fef.js"><link rel="prefetch" href="/Myblog/assets/js/292.5e01e730.js"><link rel="prefetch" href="/Myblog/assets/js/293.64b27fc1.js"><link rel="prefetch" href="/Myblog/assets/js/294.ac282a98.js"><link rel="prefetch" href="/Myblog/assets/js/295.0d560d34.js"><link rel="prefetch" href="/Myblog/assets/js/296.67b3daaf.js"><link rel="prefetch" href="/Myblog/assets/js/297.f98148e6.js"><link rel="prefetch" href="/Myblog/assets/js/298.e4b4525c.js"><link rel="prefetch" href="/Myblog/assets/js/299.695ada80.js"><link rel="prefetch" href="/Myblog/assets/js/3.210b7d8b.js"><link rel="prefetch" href="/Myblog/assets/js/30.59a16f35.js"><link rel="prefetch" href="/Myblog/assets/js/300.265029f3.js"><link rel="prefetch" href="/Myblog/assets/js/301.4fe1b29f.js"><link rel="prefetch" href="/Myblog/assets/js/302.e85204a1.js"><link rel="prefetch" href="/Myblog/assets/js/303.6f9a6e61.js"><link rel="prefetch" href="/Myblog/assets/js/304.293e699c.js"><link rel="prefetch" href="/Myblog/assets/js/305.289d4efd.js"><link rel="prefetch" href="/Myblog/assets/js/306.f6af7b8e.js"><link rel="prefetch" href="/Myblog/assets/js/307.d976d971.js"><link rel="prefetch" href="/Myblog/assets/js/308.24354d49.js"><link rel="prefetch" href="/Myblog/assets/js/309.e6f6e58e.js"><link rel="prefetch" href="/Myblog/assets/js/31.096e3947.js"><link rel="prefetch" href="/Myblog/assets/js/310.67808320.js"><link rel="prefetch" href="/Myblog/assets/js/311.919b9f10.js"><link rel="prefetch" href="/Myblog/assets/js/312.62fdaed2.js"><link rel="prefetch" href="/Myblog/assets/js/313.eb8f6145.js"><link rel="prefetch" href="/Myblog/assets/js/314.338a8ef3.js"><link rel="prefetch" href="/Myblog/assets/js/315.8a023ec3.js"><link rel="prefetch" href="/Myblog/assets/js/316.94fbd073.js"><link rel="prefetch" href="/Myblog/assets/js/317.ca7d39d1.js"><link rel="prefetch" href="/Myblog/assets/js/318.c12c4864.js"><link rel="prefetch" href="/Myblog/assets/js/319.c6af326e.js"><link rel="prefetch" href="/Myblog/assets/js/32.f43463fb.js"><link rel="prefetch" href="/Myblog/assets/js/320.919b93c8.js"><link rel="prefetch" href="/Myblog/assets/js/321.1f67c4f2.js"><link rel="prefetch" href="/Myblog/assets/js/322.88a666aa.js"><link rel="prefetch" href="/Myblog/assets/js/323.b1de013b.js"><link rel="prefetch" href="/Myblog/assets/js/324.ae9b5f1d.js"><link rel="prefetch" href="/Myblog/assets/js/325.abca48d6.js"><link rel="prefetch" href="/Myblog/assets/js/326.dc2dba7d.js"><link rel="prefetch" href="/Myblog/assets/js/327.deb0495c.js"><link rel="prefetch" href="/Myblog/assets/js/328.45d07683.js"><link rel="prefetch" href="/Myblog/assets/js/329.f8e6b67a.js"><link rel="prefetch" href="/Myblog/assets/js/33.87d15412.js"><link rel="prefetch" href="/Myblog/assets/js/330.89d54873.js"><link rel="prefetch" href="/Myblog/assets/js/331.fd261bcf.js"><link rel="prefetch" href="/Myblog/assets/js/332.c5714c45.js"><link rel="prefetch" href="/Myblog/assets/js/333.e3eaa5bd.js"><link rel="prefetch" href="/Myblog/assets/js/334.5de7f91e.js"><link rel="prefetch" href="/Myblog/assets/js/335.048166bc.js"><link rel="prefetch" href="/Myblog/assets/js/336.e19ee0cf.js"><link rel="prefetch" href="/Myblog/assets/js/337.cce253b2.js"><link rel="prefetch" href="/Myblog/assets/js/338.5bd2fc29.js"><link rel="prefetch" href="/Myblog/assets/js/339.e2699e1b.js"><link rel="prefetch" href="/Myblog/assets/js/34.e54130eb.js"><link rel="prefetch" href="/Myblog/assets/js/340.8beec81e.js"><link rel="prefetch" href="/Myblog/assets/js/341.391b43e5.js"><link rel="prefetch" href="/Myblog/assets/js/342.1adc42ef.js"><link rel="prefetch" href="/Myblog/assets/js/343.de4831e9.js"><link rel="prefetch" href="/Myblog/assets/js/344.eb3c7d4f.js"><link rel="prefetch" href="/Myblog/assets/js/345.dd8c8f92.js"><link rel="prefetch" href="/Myblog/assets/js/346.c6e78090.js"><link rel="prefetch" href="/Myblog/assets/js/347.12c24983.js"><link rel="prefetch" href="/Myblog/assets/js/348.9b4718bd.js"><link rel="prefetch" href="/Myblog/assets/js/349.0a37aa7c.js"><link rel="prefetch" href="/Myblog/assets/js/35.f7054128.js"><link rel="prefetch" href="/Myblog/assets/js/350.460ca8f5.js"><link rel="prefetch" href="/Myblog/assets/js/351.e84e960a.js"><link rel="prefetch" href="/Myblog/assets/js/352.95f19ae4.js"><link rel="prefetch" href="/Myblog/assets/js/353.3c5a167b.js"><link rel="prefetch" href="/Myblog/assets/js/354.2bf9a41c.js"><link rel="prefetch" href="/Myblog/assets/js/355.514a3b08.js"><link rel="prefetch" href="/Myblog/assets/js/356.22d2711c.js"><link rel="prefetch" href="/Myblog/assets/js/357.198c3387.js"><link rel="prefetch" href="/Myblog/assets/js/358.566333ae.js"><link rel="prefetch" href="/Myblog/assets/js/359.43ae3beb.js"><link rel="prefetch" href="/Myblog/assets/js/36.69c96bf2.js"><link rel="prefetch" href="/Myblog/assets/js/360.c04575c4.js"><link rel="prefetch" href="/Myblog/assets/js/361.57d50653.js"><link rel="prefetch" href="/Myblog/assets/js/362.6abd3fe1.js"><link rel="prefetch" href="/Myblog/assets/js/363.058e8b80.js"><link rel="prefetch" href="/Myblog/assets/js/364.6d692775.js"><link rel="prefetch" href="/Myblog/assets/js/365.b7f814e3.js"><link rel="prefetch" href="/Myblog/assets/js/366.170108c5.js"><link rel="prefetch" href="/Myblog/assets/js/367.95ee315b.js"><link rel="prefetch" href="/Myblog/assets/js/368.92505ce8.js"><link rel="prefetch" href="/Myblog/assets/js/369.00874f8d.js"><link rel="prefetch" href="/Myblog/assets/js/37.d13463c1.js"><link rel="prefetch" href="/Myblog/assets/js/370.5ca3cfb3.js"><link rel="prefetch" href="/Myblog/assets/js/371.ed80b570.js"><link rel="prefetch" href="/Myblog/assets/js/372.bd9c5a79.js"><link rel="prefetch" href="/Myblog/assets/js/373.11cd7557.js"><link rel="prefetch" href="/Myblog/assets/js/374.24feaa93.js"><link rel="prefetch" href="/Myblog/assets/js/375.84f15871.js"><link rel="prefetch" href="/Myblog/assets/js/376.a1564b14.js"><link rel="prefetch" href="/Myblog/assets/js/377.f8e2f54b.js"><link rel="prefetch" href="/Myblog/assets/js/378.fdf03e93.js"><link rel="prefetch" href="/Myblog/assets/js/379.585832b4.js"><link rel="prefetch" href="/Myblog/assets/js/38.87661c2e.js"><link rel="prefetch" href="/Myblog/assets/js/380.a561204c.js"><link rel="prefetch" href="/Myblog/assets/js/381.af195a2f.js"><link rel="prefetch" href="/Myblog/assets/js/382.cc97d0dd.js"><link rel="prefetch" href="/Myblog/assets/js/383.ec4788f4.js"><link rel="prefetch" href="/Myblog/assets/js/384.746832f1.js"><link rel="prefetch" href="/Myblog/assets/js/385.85bfbb07.js"><link rel="prefetch" href="/Myblog/assets/js/386.ba10a73f.js"><link rel="prefetch" href="/Myblog/assets/js/387.c5f1865c.js"><link rel="prefetch" href="/Myblog/assets/js/388.814b0430.js"><link rel="prefetch" href="/Myblog/assets/js/389.cd328aa7.js"><link rel="prefetch" href="/Myblog/assets/js/39.9f4731ee.js"><link rel="prefetch" href="/Myblog/assets/js/390.977d72d0.js"><link rel="prefetch" href="/Myblog/assets/js/391.8385ea27.js"><link rel="prefetch" href="/Myblog/assets/js/392.2e7eaed1.js"><link rel="prefetch" href="/Myblog/assets/js/393.e2ea12e9.js"><link rel="prefetch" href="/Myblog/assets/js/394.bbb2df2a.js"><link rel="prefetch" href="/Myblog/assets/js/395.2d4bb24d.js"><link rel="prefetch" href="/Myblog/assets/js/396.f0000e02.js"><link rel="prefetch" href="/Myblog/assets/js/397.b5bc709b.js"><link rel="prefetch" href="/Myblog/assets/js/398.b07c0720.js"><link rel="prefetch" href="/Myblog/assets/js/399.0f9cc8f7.js"><link rel="prefetch" href="/Myblog/assets/js/4.79e4b590.js"><link rel="prefetch" href="/Myblog/assets/js/40.7694f1fd.js"><link rel="prefetch" href="/Myblog/assets/js/400.229b16d3.js"><link rel="prefetch" href="/Myblog/assets/js/401.bc1045cb.js"><link rel="prefetch" href="/Myblog/assets/js/402.54572bbd.js"><link rel="prefetch" href="/Myblog/assets/js/403.8650b7b9.js"><link rel="prefetch" href="/Myblog/assets/js/404.51dffdfb.js"><link rel="prefetch" href="/Myblog/assets/js/405.c4f69ed6.js"><link rel="prefetch" href="/Myblog/assets/js/406.2291480b.js"><link rel="prefetch" href="/Myblog/assets/js/407.6782d0c9.js"><link rel="prefetch" href="/Myblog/assets/js/408.230482a8.js"><link rel="prefetch" href="/Myblog/assets/js/409.4709068b.js"><link rel="prefetch" href="/Myblog/assets/js/41.400adabc.js"><link rel="prefetch" href="/Myblog/assets/js/42.71b18a86.js"><link rel="prefetch" href="/Myblog/assets/js/43.71bc9750.js"><link rel="prefetch" href="/Myblog/assets/js/44.c8afa388.js"><link rel="prefetch" href="/Myblog/assets/js/45.e82b4e2c.js"><link rel="prefetch" href="/Myblog/assets/js/46.844093df.js"><link rel="prefetch" href="/Myblog/assets/js/47.a085916e.js"><link rel="prefetch" href="/Myblog/assets/js/48.b17e5eeb.js"><link rel="prefetch" href="/Myblog/assets/js/49.896dcd5d.js"><link rel="prefetch" href="/Myblog/assets/js/5.f2ca73e6.js"><link rel="prefetch" href="/Myblog/assets/js/50.0846aa04.js"><link rel="prefetch" href="/Myblog/assets/js/51.6fe2e359.js"><link rel="prefetch" href="/Myblog/assets/js/52.bcb95c56.js"><link rel="prefetch" href="/Myblog/assets/js/53.34272460.js"><link rel="prefetch" href="/Myblog/assets/js/54.3db04a0d.js"><link rel="prefetch" href="/Myblog/assets/js/55.3ccc0e24.js"><link rel="prefetch" href="/Myblog/assets/js/56.13087f42.js"><link rel="prefetch" href="/Myblog/assets/js/57.33828d1d.js"><link rel="prefetch" href="/Myblog/assets/js/58.b4667f10.js"><link rel="prefetch" href="/Myblog/assets/js/59.92d0b6ea.js"><link rel="prefetch" href="/Myblog/assets/js/6.c35e0249.js"><link rel="prefetch" href="/Myblog/assets/js/60.7ce218a2.js"><link rel="prefetch" href="/Myblog/assets/js/61.29dd4856.js"><link rel="prefetch" href="/Myblog/assets/js/62.18b319d3.js"><link rel="prefetch" href="/Myblog/assets/js/63.f70c8eaa.js"><link rel="prefetch" href="/Myblog/assets/js/64.1591852e.js"><link rel="prefetch" href="/Myblog/assets/js/65.a3efc63d.js"><link rel="prefetch" href="/Myblog/assets/js/66.0b7315b7.js"><link rel="prefetch" href="/Myblog/assets/js/67.b3fadfd9.js"><link rel="prefetch" href="/Myblog/assets/js/68.35ce280b.js"><link rel="prefetch" href="/Myblog/assets/js/69.db401d1a.js"><link rel="prefetch" href="/Myblog/assets/js/7.a8d42946.js"><link rel="prefetch" href="/Myblog/assets/js/70.62ed3dd3.js"><link rel="prefetch" href="/Myblog/assets/js/71.106db0c6.js"><link rel="prefetch" href="/Myblog/assets/js/72.f8431f33.js"><link rel="prefetch" href="/Myblog/assets/js/73.78bf9eca.js"><link rel="prefetch" href="/Myblog/assets/js/74.f5c2c9dc.js"><link rel="prefetch" href="/Myblog/assets/js/75.0bb2ab6d.js"><link rel="prefetch" href="/Myblog/assets/js/76.1a056743.js"><link rel="prefetch" href="/Myblog/assets/js/77.408df0b2.js"><link rel="prefetch" href="/Myblog/assets/js/78.98e33938.js"><link rel="prefetch" href="/Myblog/assets/js/79.2c61dc38.js"><link rel="prefetch" href="/Myblog/assets/js/8.bccca1af.js"><link rel="prefetch" href="/Myblog/assets/js/80.74d73c69.js"><link rel="prefetch" href="/Myblog/assets/js/81.6fb27426.js"><link rel="prefetch" href="/Myblog/assets/js/82.4b00456b.js"><link rel="prefetch" href="/Myblog/assets/js/83.278b7808.js"><link rel="prefetch" href="/Myblog/assets/js/84.32f83870.js"><link rel="prefetch" href="/Myblog/assets/js/85.70da821b.js"><link rel="prefetch" href="/Myblog/assets/js/86.c5c84550.js"><link rel="prefetch" href="/Myblog/assets/js/87.5ad10b1a.js"><link rel="prefetch" href="/Myblog/assets/js/88.389fbf45.js"><link rel="prefetch" href="/Myblog/assets/js/89.ecfa05d8.js"><link rel="prefetch" href="/Myblog/assets/js/9.ba3e371a.js"><link rel="prefetch" href="/Myblog/assets/js/90.27b0779a.js"><link rel="prefetch" href="/Myblog/assets/js/91.23ee067e.js"><link rel="prefetch" href="/Myblog/assets/js/92.bf54270b.js"><link rel="prefetch" href="/Myblog/assets/js/93.a8753835.js"><link rel="prefetch" href="/Myblog/assets/js/94.b29c3231.js"><link rel="prefetch" href="/Myblog/assets/js/95.06da4940.js"><link rel="prefetch" href="/Myblog/assets/js/96.97a3b73b.js"><link rel="prefetch" href="/Myblog/assets/js/97.85608e51.js"><link rel="prefetch" href="/Myblog/assets/js/98.29ce847a.js"><link rel="prefetch" href="/Myblog/assets/js/99.52f5970b.js">
    <link rel="stylesheet" href="/Myblog/assets/css/0.styles.6ca8d52e.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/Myblog/" class="home-link router-link-active"><!----> <span class="site-name">麦仁博客</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/Myblog/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><a href="/Myblog/web/" class="link-title">前端</a> <span class="title" style="display:none;">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>javaScript笔记精选</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Myblog/pages/03dd97/" class="nav-link">JS常用案例</a></li></ul></li><li class="dropdown-item"><h4>vue学习精选</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Myblog/pages/0082e9/" class="nav-link">《vue基本知识点》</a></li><li class="dropdown-subitem"><a href="/Myblog/pages/24e9bb/" aria-current="page" class="nav-link router-link-exact-active router-link-active">《vue3的使用》</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/Myblog/backEnd/" class="nav-link">后端</a></div><div class="nav-item"><a href="/Myblog/englishLife/" class="nav-link">英语</a></div><div class="nav-item"><a href="/Myblog/bookLife/" class="nav-link">读书</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="页面" class="dropdown-title"><a href="/Myblog/ui/" class="link-title">页面</a> <span class="title" style="display:none;">页面</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Myblog/pages/8309a5b876fc95e3/" class="nav-link">HTML</a></li><li class="dropdown-item"><!----> <a href="/Myblog/pages/0a83b083bdf257cb/" class="nav-link">CSS</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="技术" class="dropdown-title"><a href="/Myblog/technology/" class="link-title">技术</a> <span class="title" style="display:none;">技术</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Myblog/pages/9a7ee40fc232253e/" class="nav-link">技术文档</a></li><li class="dropdown-item"><!----> <a href="/Myblog/pages/4c778760be26d8b3/" class="nav-link">GitHub技巧</a></li><li class="dropdown-item"><!----> <a href="/Myblog/pages/117708e0af7f0bd9/" class="nav-link">Nodejs</a></li><li class="dropdown-item"><!----> <a href="/Myblog/pages/41f87d890d0a02af/" class="nav-link">博客搭建</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><a href="/Myblog/more/" class="link-title">更多</a> <span class="title" style="display:none;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Myblog/pages/f2a556/" class="nav-link">学习</a></li><li class="dropdown-item"><!----> <a href="/Myblog/pages/aea6571b7a8bae86/" class="nav-link">面试</a></li><li class="dropdown-item"><!----> <a href="/Myblog/pages/2d615df9a36a98ed/" class="nav-link">心情杂货</a></li><li class="dropdown-item"><!----> <a href="/Myblog/pages/baaa02/" class="nav-link">实用技巧</a></li><li class="dropdown-item"><!----> <a href="/Myblog/friends/" class="nav-link">友情链接</a></li></ul></div></div><div class="nav-item"><a href="/Myblog/about/" class="nav-link">关于</a></div><div class="nav-item"><a href="/Myblog/pages/beb6c0bd8a66cea6/" class="nav-link">收藏</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/Myblog/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Myblog/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/Myblog/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/Myblog/archives/" class="nav-link">归档</a></li></ul></div></div> <a href="https://github.com/MaiRen1997/Myblog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><!----> <nav class="nav-links"><div class="nav-item"><a href="/Myblog/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><a href="/Myblog/web/" class="link-title">前端</a> <span class="title" style="display:none;">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>javaScript笔记精选</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Myblog/pages/03dd97/" class="nav-link">JS常用案例</a></li></ul></li><li class="dropdown-item"><h4>vue学习精选</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Myblog/pages/0082e9/" class="nav-link">《vue基本知识点》</a></li><li class="dropdown-subitem"><a href="/Myblog/pages/24e9bb/" aria-current="page" class="nav-link router-link-exact-active router-link-active">《vue3的使用》</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/Myblog/backEnd/" class="nav-link">后端</a></div><div class="nav-item"><a href="/Myblog/englishLife/" class="nav-link">英语</a></div><div class="nav-item"><a href="/Myblog/bookLife/" class="nav-link">读书</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="页面" class="dropdown-title"><a href="/Myblog/ui/" class="link-title">页面</a> <span class="title" style="display:none;">页面</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Myblog/pages/8309a5b876fc95e3/" class="nav-link">HTML</a></li><li class="dropdown-item"><!----> <a href="/Myblog/pages/0a83b083bdf257cb/" class="nav-link">CSS</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="技术" class="dropdown-title"><a href="/Myblog/technology/" class="link-title">技术</a> <span class="title" style="display:none;">技术</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Myblog/pages/9a7ee40fc232253e/" class="nav-link">技术文档</a></li><li class="dropdown-item"><!----> <a href="/Myblog/pages/4c778760be26d8b3/" class="nav-link">GitHub技巧</a></li><li class="dropdown-item"><!----> <a href="/Myblog/pages/117708e0af7f0bd9/" class="nav-link">Nodejs</a></li><li class="dropdown-item"><!----> <a href="/Myblog/pages/41f87d890d0a02af/" class="nav-link">博客搭建</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><a href="/Myblog/more/" class="link-title">更多</a> <span class="title" style="display:none;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Myblog/pages/f2a556/" class="nav-link">学习</a></li><li class="dropdown-item"><!----> <a href="/Myblog/pages/aea6571b7a8bae86/" class="nav-link">面试</a></li><li class="dropdown-item"><!----> <a href="/Myblog/pages/2d615df9a36a98ed/" class="nav-link">心情杂货</a></li><li class="dropdown-item"><!----> <a href="/Myblog/pages/baaa02/" class="nav-link">实用技巧</a></li><li class="dropdown-item"><!----> <a href="/Myblog/friends/" class="nav-link">友情链接</a></li></ul></div></div><div class="nav-item"><a href="/Myblog/about/" class="nav-link">关于</a></div><div class="nav-item"><a href="/Myblog/pages/beb6c0bd8a66cea6/" class="nav-link">收藏</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/Myblog/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Myblog/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/Myblog/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/Myblog/archives/" class="nav-link">归档</a></li></ul></div></div> <a href="https://github.com/MaiRen1997/Myblog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>HTML的使用</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>javaScript基础</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>javaScript扩展</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>CSS基础</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>git的使用</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>vue框架</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Myblog/pages/0082e9/" class="sidebar-link">vue基本知识点</a></li><li><a href="/Myblog/pages/24e9bb/" aria-current="page" class="active sidebar-link">vue3的使用</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/Myblog/pages/24e9bb/#组合与选项api" class="sidebar-link">组合与选项Api</a></li><li class="sidebar-sub-header level2"><a href="/Myblog/pages/24e9bb/#setup的使用" class="sidebar-link">setup的使用</a></li><li class="sidebar-sub-header level2"><a href="/Myblog/pages/24e9bb/#响应式的使用" class="sidebar-link">响应式的使用</a></li><li class="sidebar-sub-header level2"><a href="/Myblog/pages/24e9bb/#setup中获取元素" class="sidebar-link">setup中获取元素</a></li><li class="sidebar-sub-header level2"><a href="/Myblog/pages/24e9bb/#computed" class="sidebar-link">computed</a></li><li class="sidebar-sub-header level2"><a href="/Myblog/pages/24e9bb/#watcheffect" class="sidebar-link">watchEffect</a></li><li class="sidebar-sub-header level2"><a href="/Myblog/pages/24e9bb/#watch" class="sidebar-link">watch</a></li><li class="sidebar-sub-header level2"><a href="/Myblog/pages/24e9bb/#生命周期" class="sidebar-link">生命周期</a></li><li class="sidebar-sub-header level2"><a href="/Myblog/pages/24e9bb/#provide、inject函数" class="sidebar-link">provide、inject函数</a></li><li class="sidebar-sub-header level2"><a href="/Myblog/pages/24e9bb/#自定义hooks" class="sidebar-link">自定义hooks</a></li><li class="sidebar-sub-header level2"><a href="/Myblog/pages/24e9bb/#标签中的setup" class="sidebar-link">标签中的setup</a></li><li class="sidebar-sub-header level2"><a href="/Myblog/pages/24e9bb/#render函数" class="sidebar-link">render函数</a></li><li class="sidebar-sub-header level2"><a href="/Myblog/pages/24e9bb/#jsx的使用" class="sidebar-link">jsx的使用</a></li><li class="sidebar-sub-header level2"><a href="/Myblog/pages/24e9bb/#自定义指令" class="sidebar-link">自定义指令</a></li><li class="sidebar-sub-header level2"><a href="/Myblog/pages/24e9bb/#teleport" class="sidebar-link">teleport</a></li><li class="sidebar-sub-header level2"><a href="/Myblog/pages/24e9bb/#vue插件" class="sidebar-link">vue插件</a></li></ul></li><li><a href="/Myblog/pages/7f3d50/" class="sidebar-link">vue-router</a></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Vuex</span> <span class="arrow right"></span></p> <!----></section></li><li><a href="/Myblog/pages/22700e/" class="sidebar-link">TypeScript</a></li><li><a href="/Myblog/pages/2473d4/" class="sidebar-link">项目搭建</a></li><li><a href="/Myblog/pages/f46fac/" class="sidebar-link">项目实战</a></li><li><a href="/Myblog/pages/0c20a6/" class="sidebar-link">pinia的使用</a></li><li><a href="/Myblog/pages/f40683/" class="sidebar-link">创建vue3项目</a></li><li><a href="/Myblog/pages/8bb318/" class="sidebar-link">vue2升级vue3过程</a></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>vue常用案例</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>ElementUI的使用</span> <span class="arrow right"></span></p> <!----></section></li><li><a href="/Myblog/pages/57ef94/" class="sidebar-link">vant的安装与使用</a></li><li><a href="/Myblog/pages/ed235f/" class="sidebar-link">vue使用tips</a></li><li><a href="/Myblog/pages/0d221f/" class="sidebar-link">vue-i18n国际化</a></li><li><a href="/Myblog/pages/ccb031/" class="sidebar-link">webSocket的使用</a></li><li><a href="/Myblog/pages/4686e5/" class="sidebar-link">vue3中Svg的使用</a></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Cordova打包</span> <span class="arrow right"></span></p> <!----></section></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>React框架</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>封装组件并上传到npm</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>服务端配置</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>webpack的使用</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Vite的使用</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>正则表达式</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>node的使用</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Nuxt</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>tailWindCss</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>前端性能优化</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>postman与自动化测试</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Interview</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>填坑笔记</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><ul class="breadcrumbs" data-v-06225672><li data-v-06225672><a href="/Myblog/" title="首页" class="iconfont icon-home router-link-active" data-v-06225672></a></li> <li data-v-06225672><a href="/Myblog/web/#前端" data-v-06225672>前端</a></li><li data-v-06225672><a href="/Myblog/web/#vue框架" data-v-06225672>vue框架</a></li></ul> <div class="info" data-v-06225672><div title="作者" class="author iconfont icon-touxiang" data-v-06225672><a href="https://github.com/MaiRen1997" target="_blank" title="作者" class="beLink" data-v-06225672>Riverside Joy</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2023-12-19</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABGpJREFUSA3tVVtoXFUU3fvOI53UlmCaKIFmwEhsE7QK0ipFEdHEKpXaZGrp15SINsXUWvBDpBgQRKi0+KKoFeJHfZA+ED9KKoIU2gYD9UejTW4rVIzm0VSTziPzuNu1z507dibTTjL4U/DAzLn3nL3X2o91ziX6f9wMFdh6Jvbm9nNSV0msViVO6tN1Rm7NMu2OpeJ9lWBUTDxrJbYTS0hInuwciu9eLHlFxCLCZEk3MegsJmZ5K/JD6t7FkFdEvGUo1g7qJoG3MHImqRIn8/nzY1K9UPKKiJmtnUqHVE3Gbuay6vJE/N2FEmuxFjW2nUuE0yQXRRxLiTUAzs36zhZvOXJPdX850EVnnLZkB8prodQoM5JGj7Xk2mvC7JB8tG04Ef5PiXtG0UtxupRQSfTnBoCy554x18yJHI6I+G5Eru4LHmPJZEQsrvPUbMiA8G/WgMK7w7I+ez7++o2ANfbrjvaOl1tFMs+htG3IrZH9/hDX1Pr8Tc0UvH8tcX29KzAgIGcEkINyW5BF9x891hw6VYqgJHEk0huccS7vh3C6gTiODL+26huuBtbct8eZnqLML8PkxGYpuPZBqtqwkSjgc4mB5gbgig5i+y0UDK35LMxXisn9xQtK+nd26gTIHsHe/oblK/b29fUmN/8Y+9jAQrnBp56m1LcDlDp9irKTExSKduXJVWSqdBMA08pEJnEIOB3FPPMybu/oeV8zFeYN3xx576Q6RH+VmplE4ncQV5v+5rzSoyOU7PuEAg8g803PwBJ0CExno/jcMbN8tONYeOmHiuUNryvm3fRUy4tMPVLdAGkUhNWuggGrJcXPv+ouCjz0MKUHz1J2/E8IC9nqTabcxgaBYM0hPhD5Y65FsbxRQKxCQrDjDctW7PUM3HuZunFyifSAqEfuzCp48Il24luWUWZoyJCaPR82jE0+kFA643wRFVni4RYSq3ohJO2pZ7B5dO4xkDWbEpossJPLSrPjYID8rS2UHTlvyNxqIGsg674XJJ7vnh5L7PNwC4hh2sjCI96mzszOTpxLF0T7l88Yz7lAuK6OnL8gXLOnTvpzSb22YG8W7us3jSebFHeeqnXRG1vt+MoUM84LQIBmMsCTAcOauTh0T0l0neQK7m2bLMt2mGxU3HYssS0J2cdv5wljlPsrIuZLAG/2DOZIXgCYT8uMGZN+e2kSirfxZOPCsC0f24nTZzspnVn9VePS1Z5vubmAGGXG8ZFno9Hel0yfA5ZPhF7Dh972BQJ2qCpgH67lmWtBYbvk6sz02wjky2vXyz0XErP/kFB619js1BtwfOV4OPRqOQBjy3Qbk18vigUPPSD5ceHnwck7W9bhAqZdd7SuG7w4/P2F/GaJh8c7e9qgow+Q7cGBo+98WsLkuktFqiZabtXuQTu/Y5ETbR0v7tNSFnvrmu6pjdoan2KjMu8q/Hmj1EfCO2ZGfEIbIXKUlw8qaX9/b2oeSJmFksSeT/Fn0V3nSypChh4Gjh74ybO9aeZ/AN2dwciu2/MhAAAAAElFTkSuQmCC">vue3的使用<!----></h1> <!----> <div class="theme-vdoing-content content__default"><h2 id="组合与选项api"><a href="#组合与选项api" class="header-anchor">#</a> 组合与选项Api</h2> <h3 id="说明"><a href="#说明" class="header-anchor">#</a> 说明</h3> <ol><li>使用Composition Api ,就不需要使用选项Api 中的data， methods，computed等一些属性了</li></ol> <h3 id="options-api的弊端"><a href="#options-api的弊端" class="header-anchor">#</a> options Api的弊端</h3> <ol><li>实现功能时，对应的代码被拆分到各个属性</li> <li>组件变大变复杂时，逻辑关注点列表会增长，同一个功能的逻辑被拆分的很散</li> <li>后期代码维护非常麻烦</li></ol> <h3 id="setup的注意点"><a href="#setup的注意点" class="header-anchor">#</a> setup的注意点</h3> <ol><li><p><code>setup中不可以使用this</code>,也就是<code>setup中的this并不是指向当前实例</code></p></li> <li><p><code>setup被调用之前</code>，<code>data，computed，methods等都没有被解析</code></p></li> <li><p>无法在setup中获取this</p></li> <li><p>如何和vue2一样，通过ref获取dom元素呢</p> <ol><li><p>在dom中定义元素，使用ref属性(与vue2相同)</p></li> <li><p>在setup中，通过ref定义一个空指针</p></li> <li><p>将定义的空指针return出来，vue就自动和dom中的ref进行绑定，如此就可以获得dom了</p> <p>tips: <code>ref的名称要相同</code></p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>value<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>input<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
	<span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
    <span class="token keyword">export</span> <span class="token keyword">default</span>  <span class="token punctuation">{</span>
        <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">const</span> input  <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span>
            <span class="token function">onMounted</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>input<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token keyword">return</span> <span class="token punctuation">{</span>
                input
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div></li></ol></li></ol> <h2 id="setup的使用"><a href="#setup的使用" class="header-anchor">#</a> setup的使用</h2> <h3 id="说明-2"><a href="#说明-2" class="header-anchor">#</a> 说明</h3> <ol><li><code>在setup中无法使用this</code></li></ol> <h3 id="setup写法"><a href="#setup写法" class="header-anchor">#</a> setup写法</h3> <ol><li><p>如果在script标签中，加入setup属性，就不需要在使用options Api去引入组件和props</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>否则就得使用</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
 <span class="token keyword">import</span> MyComponent <span class="token keyword">from</span> <span class="token string">'./myComponent'</span>
	<span class="token keyword">export</span> <span class="token keyword">default</span><span class="token punctuation">{</span>
     <span class="token literal-property property">props</span><span class="token operator">:</span><span class="token punctuation">{</span>
         <span class="token literal-property property">name</span><span class="token operator">:</span> String<span class="token punctuation">,</span>
         <span class="token literal-property property">required</span><span class="token operator">:</span> <span class="token boolean">true</span>
     <span class="token punctuation">}</span><span class="token punctuation">,</span>
     <span class="token literal-property property">component</span><span class="token operator">:</span><span class="token punctuation">{</span>
         MyComponent
     <span class="token punctuation">}</span>
 <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div></li></ol> <h3 id="函数的参数"><a href="#函数的参数" class="header-anchor">#</a> 函数的参数</h3> <h4 id="props参数"><a href="#props参数" class="header-anchor">#</a> props参数</h4> <ol><li><p>props： 父组件传递过来的属性，若需要，直接通过props进行获取</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
	<span class="token keyword">export</span> <span class="token keyword">default</span><span class="token punctuation">{</span>
     <span class="token function">setup</span><span class="token punctuation">(</span><span class="token parameter">props<span class="token punctuation">,</span> context</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
         console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>props<span class="token punctuation">.</span>name<span class="token punctuation">)</span>
     <span class="token punctuation">}</span>
 <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></li></ol> <h4 id="context参数"><a href="#context参数" class="header-anchor">#</a> context参数</h4> <ol><li><p>context也称为<code>SetupContext</code>,里面包含三个属性</p> <ol><li><p>attrs： 所有非props的attribute</p></li> <li><p>slots： 父组件传递过来的插槽</p></li> <li><p>emit： 组件内部需要发出事件时会用到</p></li> <li><div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
	<span class="token keyword">export</span> <span class="token keyword">default</span><span class="token punctuation">{</span>
        <span class="token function">setup</span><span class="token punctuation">(</span><span class="token parameter">props<span class="token punctuation">,</span> context</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span>attrs<span class="token punctuation">.</span>title<span class="token punctuation">)</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span>slots<span class="token punctuation">)</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span>emit<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token comment">// 可以直接解构</span>
        <span class="token function">setup</span><span class="token punctuation">(</span><span class="token parameter">props<span class="token punctuation">,</span> <span class="token punctuation">{</span>attrs<span class="token punctuation">,</span> slots<span class="token punctuation">,</span> emit<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div></li></ol></li></ol> <h3 id="函数的返回值"><a href="#函数的返回值" class="header-anchor">#</a> 函数的返回值</h3> <ol><li><p>如果setup和data中有同样的属性，那么会优先从setup中取值</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
	<span class="token keyword">export</span> <span class="token keyword">default</span><span class="token punctuation">{</span>
     <span class="token function">setup</span><span class="token punctuation">(</span><span class="token parameter">props<span class="token punctuation">,</span> context</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
         <span class="token keyword">let</span> name <span class="token operator">=</span> props<span class="token punctuation">.</span>name
         <span class="token keyword">let</span> message <span class="token operator">=</span> props<span class="token punctuation">.</span>otherKey
         <span class="token keyword">return</span> <span class="token punctuation">{</span>
            name<span class="token punctuation">,</span>
            message
         <span class="token punctuation">}</span>
     <span class="token punctuation">}</span>
 <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div></li></ol> <h3 id="模板绑定方法"><a href="#模板绑定方法" class="header-anchor">#</a> 模板绑定方法</h3> <ol><li><p>定义按钮并绑定方法</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>temppate</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>increment<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>增加<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>temppate</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li> <li><p>然后在setup中定义方法即可</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span><span class="token punctuation">{</span>
     <span class="token function">setup</span><span class="token punctuation">(</span><span class="token parameter">props<span class="token punctuation">,</span> context</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
         <span class="token keyword">const</span> <span class="token function-variable function">increment</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
             console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'123'</span><span class="token punctuation">)</span>
         <span class="token punctuation">}</span>
         <span class="token keyword">let</span> name <span class="token operator">=</span> props<span class="token punctuation">.</span>name
         <span class="token keyword">let</span> message <span class="token operator">=</span> props<span class="token punctuation">.</span>otherKey
         <span class="token keyword">return</span> <span class="token punctuation">{</span>
            name<span class="token punctuation">,</span>
            message<span class="token punctuation">,</span>
            increment
         <span class="token punctuation">}</span>
     <span class="token punctuation">}</span>
 <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div></li></ol> <h2 id="响应式的使用"><a href="#响应式的使用" class="header-anchor">#</a> 响应式的使用</h2> <h3 id="reacitve-api"><a href="#reacitve-api" class="header-anchor">#</a> reacitve Api</h3> <h4 id="使用"><a href="#使用" class="header-anchor">#</a> 使用</h4> <ol><li><p><code>reactive Api</code>要求<code>必须传入一个对象或者数组类型</code></p></li> <li><p>对于<code>基本类型，String， Number， Boolean会报一个警告</code></p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
	<span class="token keyword">import</span> <span class="token punctuation">{</span>reactive<span class="token punctuation">}</span> <span class="token keyword">from</span> 'vue
    <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 1.使用reactive创建响应式数据</span>
        <span class="token keyword">const</span> state <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token literal-property property">counter</span><span class="token operator">:</span> <span class="token number">100</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token comment">// 2.对响应式数据进行修改</span>
        <span class="token keyword">const</span> <span class="token function-variable function">increment</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            state<span class="token punctuation">.</span>counter <span class="token operator">++</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>state<span class="token punctuation">.</span>counter<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// 3.返回响应式数据</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span>
            state<span class="token punctuation">,</span>
            increment
        <span class="token punctuation">}</span>
        <span class="token comment">// 4.显示的时候，使用state.count</span>
    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div></li></ol> <h4 id="局限性"><a href="#局限性" class="header-anchor">#</a> 局限性：</h4> <ol><li>只能用于对象类型数据 (对象、数组和如 Map、Set 这样的集合类型)，不能用于 string、number 或 boolean 这样的值类型数据</li> <li>替换整个对象会丢失响应式（Vue 的响应式跟踪是通过属性访问实现的），所以只能通过修改属性来修改 reactive() 创建的响应式变量。</li> <li>解构会丢失响应式</li></ol> <h3 id="ref-api"><a href="#ref-api" class="header-anchor">#</a> ref Api</h3> <h4 id="作用"><a href="#作用" class="header-anchor">#</a> 作用</h4> <ol><li><p>ref可以将数据变成一个可响应式的引用</p></li> <li><p>tips:</p> <ol><li><p><code>ref返回的是一个ref对象，对于mustache语法，可以自动解构，获取到对象里的value，所以可以写成</code></p></li> <li><p>但是<code>在setup内部，ref并不会进行自动解构</code>，所以<code>如果需要对数据进行操作，就需要使用.value方法，如counter.value++</code></p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
	<span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> 'vue
<span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 1.使用ref创建响应式数据,将数据变成一个可响应式的引用</span>
  <span class="token keyword">let</span> counter <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span>
  <span class="token comment">// 2.对响应式数据进行修改</span>
  <span class="token keyword">const</span> <span class="token function-variable function">increment</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      counter<span class="token punctuation">.</span>value <span class="token operator">++</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>counter<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 3.返回响应式数据</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
      counter<span class="token punctuation">,</span>
      increment
  <span class="token punctuation">}</span>
  <span class="token comment">// 4.显示的时候，直接使用counter即可</span>
  <span class="token comment">//{{counter}}, 而不需要{{counter.value}}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div></li></ol></li> <li><p>TS写法</p></li></ol> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token punctuation">{</span> Ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>

<span class="token keyword">interface</span> <span class="token class-name">userInfo</span> <span class="token punctuation">{</span>
  id<span class="token operator">:</span> <span class="token builtin">number</span>
  name<span class="token operator">:</span> String
<span class="token punctuation">}</span>

<span class="token keyword">const</span> userList<span class="token operator">:</span> Ref<span class="token operator">&lt;</span>userInfo<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><ol start="4"><li>ref 对象在作为响应式对象的属性被访问或修改时会自动解包。</li></ol> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">const</span> countRef <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>

<span class="token comment">// reactive 的用法详见下文</span>
<span class="token keyword">const</span> state <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  count<span class="token operator">:</span>countRef 
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>state<span class="token punctuation">.</span>count<span class="token punctuation">)</span> <span class="token comment">// 0 ,无需写成 state.count.value</span>

state<span class="token punctuation">.</span>count <span class="token operator">=</span> <span class="token number">1</span> <span class="token comment">// 无需写成 state.count.value</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>countRef<span class="token punctuation">.</span>value<span class="token punctuation">)</span> <span class="token comment">// 1</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="readonly-的使用"><a href="#readonly-的使用" class="header-anchor">#</a> readonly 的使用</h3> <h4 id="注意"><a href="#注意" class="header-anchor">#</a> 注意</h4> <ol><li><code>reactive或者ref</code>可以获取到一个响应式的对象，经过reactive和ref处理的数据，<code>可以响应式，也可以被修改</code></li> <li>如果<code>不想被修改</code>，可以<code>使用readonly</code></li> <li><code>readonly会返回原生对象的只读代理</code>, 它<code>依然是一个Proxy</code>，这是一个<code>proxy的set方法被劫持</code>,并且<code>不能对其进行修改</code></li></ol> <h4 id="readonly可传入的参数"><a href="#readonly可传入的参数" class="header-anchor">#</a> readonly可传入的参数</h4> <ol><li><p>普通对象</p></li> <li><p>reactive返回的对象</p></li> <li><p>ref对象</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> a <span class="token operator">=</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'张三'</span><span class="token punctuation">}</span>
<span class="token keyword">const</span> aProxy <span class="token operator">=</span> <span class="token function">readonly</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>
<span class="token comment">//把aProxy传递到子组件，即可实现参数不可修改</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li></ol> <h3 id="reactive-判断的api"><a href="#reactive-判断的api" class="header-anchor">#</a> reactive 判断的Api</h3> <ol><li><p>isProxy</p> <p>检查对象是否由reactive或readonly创建的proxy</p></li> <li><p>isReactive</p> <ol><li><p>检查对象<code>是否由reactive创建的响应式代理</code>，如果<code>是reactive或者readonly创建的，返回false</code></p></li> <li><p>如果代理是<code>由readonly创建</code>的，但是<code>包裹了由reactive</code>创建的另一个代理，它也会返回true</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> info <span class="token operator">=</span> <span class="token function">readonly</span><span class="token punctuation">(</span><span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'zhangsan'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token function">isReactive</span><span class="token punctuation">(</span>info<span class="token punctuation">)</span> <span class="token comment">// 结果返回true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li></ol></li> <li><p>isReadonly</p> <p>检查对象是否是由readonly创建的只读代理</p></li> <li><p>toRaw</p> <p>返回reactive或readonly代理的原始对象（很少使用）</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> info <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'zhangsan'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token function">toRaw</span><span class="token punctuation">(</span>info<span class="token punctuation">)</span> <span class="token comment">// 结果{name: 'zhangsan'}</span>
<span class="token comment">// 很少使用，如果想达到目的，使用下面方法</span>
<span class="token keyword">const</span> info <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'zhangsan'</span><span class="token punctuation">}</span>
<span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span>info<span class="token punctuation">)</span> 
<span class="token comment">// 使用上面代码后，既可以有原始数据，又有响应式数据</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li> <li><p>shallowReactive</p> <p>创建一个响应式代理，它跟踪其自身property的响应式，但不执行嵌套对象的深层响应式转换(深层还是原生对象)</p></li> <li><p>shallowReadonly</p> <p>创建一个proxy，使其自身的property为只读，但不执行嵌套对象的深度只读转换(深层还是可读可写)</p></li></ol> <h3 id="toref"><a href="#toref" class="header-anchor">#</a> toRef</h3> <ol><li><p>基于响应式对象上的属性，创建 ref (与源属性保持同步)</p> <ul><li><p>第一个参数为 响应式对象（reactive 创建）</p></li> <li><p>第二个参数为 属性名</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> state <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">foo</span><span class="token operator">:</span> <span class="token number">1</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 基于响应式对象 state 上的属性 foo ，创建 ref</span>
<span class="token keyword">const</span> fooRef <span class="token operator">=</span> <span class="token function">toRef</span><span class="token punctuation">(</span>state<span class="token punctuation">,</span> <span class="token string">'foo'</span><span class="token punctuation">)</span>

<span class="token comment">// 更改该 ref 会更新源属性</span>
fooRef<span class="token punctuation">.</span>value<span class="token operator">++</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>state<span class="token punctuation">.</span>foo<span class="token punctuation">)</span> <span class="token comment">// 2</span>

<span class="token comment">// 更改源属性也会更新该 ref</span>
state<span class="token punctuation">.</span>foo<span class="token operator">++</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>fooRef<span class="token punctuation">.</span>value<span class="token punctuation">)</span> <span class="token comment">// 3</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div></li></ul></li></ol> <h3 id="torefs"><a href="#torefs" class="header-anchor">#</a> toRefs</h3> <ol><li><p>针对<code>数据从reactive对象中解构后</code>，<code>不再是响应式了</code></p></li> <li><p>使用toRefs解决，<code>let {name,age} = toRefs(info)</code></p></li> <li><p>解构出来的name和age都<code>是一个ref对象</code>,因此<code>在setup中，使用ref对象，要通过.value获取</code>，</p></li> <li><p><code>在mustache语法中，直接使用不用.value</code></p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>reactive<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token punctuation">;</span>
<span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">const</span> info <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'zhangsan'</span><span class="token punctuation">,</span> <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token keyword">let</span> <span class="token punctuation">{</span>name<span class="token punctuation">,</span> age<span class="token punctuation">}</span> <span class="token operator">=</span> info<span class="token comment">//这时，更改name和age，并不会响应式</span>
		<span class="token comment">// 如果需要响应式，可以使用toRefs</span>
  <span class="token keyword">let</span> <span class="token punctuation">{</span>name<span class="token punctuation">,</span>age<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">toRefs</span><span class="token punctuation">(</span>info<span class="token punctuation">)</span> <span class="token comment">// 解构出来的name和age都是一个ref对象</span>
  <span class="token comment">// 因此在setup中，使用ref对象，要通过.value获取，在mustache语法中，直接使用不用.value</span>

  <span class="token comment">// 使用toRef, 注意，这里就不需要解构了</span>
  <span class="token keyword">let</span> age <span class="token operator">=</span> <span class="token function">toRef</span><span class="token punctuation">(</span>info<span class="token punctuation">,</span> <span class="token string">'age'</span><span class="token punctuation">)</span>
  <span class="token keyword">function</span> <span class="token function">changeAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      age <span class="token operator">++</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span><span class="token punctuation">{</span>
      name<span class="token punctuation">,</span>
      age<span class="token punctuation">,</span>
      changeAge
  <span class="token punctuation">}</span>
  <span class="token comment">// 也可以return { ...toRefs(info) } 直接return出一整个响应式对象</span>
<span class="token punctuation">}</span> 
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div></li></ol> <h3 id="torefs与toref"><a href="#torefs与toref" class="header-anchor">#</a> toRefs与toRef</h3> <ul><li><p>toRefs：将reactive对象中的所有属性都转化成ref，建立连接</p></li> <li><p>toRef：将其中一个属性进行转换ref，建立连接</p></li></ul> <h3 id="ref其他的api"><a href="#ref其他的api" class="header-anchor">#</a> ref其他的Api</h3> <ol><li><p>unref</p> <p>获取ref引用中的value，可以通过unref方法，<code>相当于对ref进行解包，直接获取到value</code></p> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
	<span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">const</span> name <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">'why'</span><span class="token punctuation">)</span>
       	<span class="token function">showMsg</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span>
        <span class="token function">showMsg</span><span class="token punctuation">(</span>name<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
        <span class="token comment">// 针对函数传参，并不确定用户传入ref对象，还是直接传入value</span>
        <span class="token comment">// 这是可以使用unref进行使用</span>
        <span class="token comment">//unref是   val = isRef(val) ? val.value : val的语法糖</span>
        <span class="token keyword">function</span> <span class="token function">showMsg</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div></li> <li><p>isRef</p> <p><code>isRef()用于判断是否是ref对象</code></p></li> <li><p>shallowRef</p> <p>创建一个浅层的ref对象</p> <p>如果ref传入的是一个对象，那么深层的这些属性并不是响应式的</p></li> <li><p>triggerRef</p> <p>手动触发和shallowRef相关联的副作用(<code>shallowRef并不会让深层进行响应式，通过triggerRef可以让深层进行响应式</code>)</p></li></ol> <h3 id="自定义ref-customref"><a href="#自定义ref-customref" class="header-anchor">#</a> 自定义ref(customRef)</h3> <ol><li><p>前提</p> <ol><li><p>需要<code>一个工厂函数</code>，该<code>函数接受track和trigger作为参数</code></p></li> <li><p>并且应该<code>返回一个带有get和set的对象</code></p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> customRef <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token comment">// 自定义ref</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
 <span class="token keyword">let</span> timer <span class="token operator">=</span> <span class="token keyword">null</span>
 <span class="token keyword">return</span> <span class="token function">customRef</span><span class="token punctuation">(</span><span class="token parameter">track<span class="token punctuation">,</span> trigger</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
     <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
         <span class="token function">track</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">// 收集依赖</span>
       <span class="token keyword">return</span> value <span class="token comment">// 返回值</span>
     <span class="token punctuation">}</span><span class="token punctuation">,</span>
     <span class="token function">set</span><span class="token punctuation">(</span>newValue<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 当调用set的时候，会传进来一个新的值</span>
        <span class="token comment">// 普通响应式写法</span>
        value <span class="token operator">=</span> newValue <span class="token comment">// 一般情况下，直接把新值赋值出去返回即可</span>
        <span class="token function">trigger</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 触发对应的更新</span>
         <span class="token comment">// 防抖节流代码</span>
         <span class="token function">clearTimeout</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span> <span class="token comment">// 取消上一次计时</span>
         timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token comment">// 使用计时器触发更新</span>
            value <span class="token operator">=</span> newValue
            <span class="token function">trigger</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
         <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>
     <span class="token punctuation">}</span>
 <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div></li></ol></li></ol> <h2 id="setup中获取元素"><a href="#setup中获取元素" class="header-anchor">#</a> setup中获取元素</h2> <ol><li><p>vue2中使用this.$refs可以获取到某个具体的元素</p></li> <li><p>但是setup中没有this，相应的也没有$refs这个东西</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>titleRef<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
	<span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> titleRef <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
      titleRef
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div></li> <li><p><code>vue3.5 +</code></p> <p>可使用 useTemplateRef() 获取 DOM，将目标 DOM 的 ref 值作为参数传入即可。</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> useTemplateRef<span class="token punctuation">,</span> onMounted <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>

<span class="token keyword">const</span> inputRef <span class="token operator">=</span> <span class="token function">useTemplateRef</span><span class="token punctuation">(</span><span class="token string">'input'</span><span class="token punctuation">)</span>

<span class="token function">onMounted</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  inputRef<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>input<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div></li> <li><p><code>vue3.2.25 +</code></p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref<span class="token punctuation">,</span> onMounted <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>

<span class="token keyword">const</span> list <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token comment">/* ... */</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> itemRefs <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token function">onMounted</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>itemRefs<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item in list<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>itemRefs<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      {{ item }}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div></li></ol> <h2 id="computed"><a href="#computed" class="header-anchor">#</a> computed</h2> <h3 id="计算属性中的get使用"><a href="#计算属性中的get使用" class="header-anchor">#</a> 计算属性中的get使用</h3> <ol><li><p>只使用get方法，实现响应式</p> <p>对于未使用ref等响应式方法定义的属性，在进行重新赋值时，无法实现响应式</p> <p>如果想要实现响应式，可以使用计算属性进行返回</p> <p>setup里的计算属性，返回的是一个ref对象，</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token keyword">import</span> <span class="token punctuation">{</span> ref<span class="token punctuation">,</span> computed <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
	<span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> firstname <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">'zhang'</span><span class="token punctuation">)</span>
        <span class="token keyword">const</span> lastname <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">'san'</span><span class="token punctuation">)</span>
        <span class="token keyword">const</span> fullname <span class="token operator">=</span> firstname<span class="token punctuation">.</span>value <span class="token operator">+</span> <span class="token string">' '</span> <span class="token operator">+</span> lastname<span class="token punctuation">.</span>value <span class="token comment">// 这种情况下，fullname不是响应式</span>
        <span class="token comment">// 可以使用计算属性达到响应式目的</span>
        <span class="token keyword">const</span> fullname2 <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> firstname<span class="token punctuation">.</span>value <span class="token operator">+</span> <span class="token string">' '</span> <span class="token operator">+</span> lastname<span class="token punctuation">.</span>value<span class="token punctuation">)</span> <span class="token comment">// computed返回的是一个ref对象</span>
    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div></li> <li><p>vue2中只使用get的写法</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
	<span class="token literal-property property">computed</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token function">fullName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 1.vue2中没有ref对象，因此也没有.value操作</span>
            <span class="token comment">// 2.vue2中字符串拼接后，还依然是响应式，因此一般不需要计算属性</span>
            <span class="token keyword">return</span> firstname <span class="token operator">+</span> <span class="token string">' '</span> <span class="token operator">+</span> lastname
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div></li></ol> <h3 id="计算属性中get和set使用"><a href="#计算属性中get和set使用" class="header-anchor">#</a> 计算属性中get和set使用</h3> <ol><li><p>使用计算属性的get和set方法</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
 <span class="token keyword">import</span> <span class="token punctuation">{</span> ref<span class="token punctuation">,</span> computed <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
	<span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token keyword">const</span> firstname <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">'zhang'</span><span class="token punctuation">)</span>
     <span class="token keyword">const</span> lastname <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">'san'</span><span class="token punctuation">)</span>
     <span class="token keyword">const</span> fullname <span class="token operator">=</span> firstname<span class="token punctuation">.</span>value <span class="token operator">+</span> <span class="token string">' '</span> <span class="token operator">+</span> lastname<span class="token punctuation">.</span>value <span class="token comment">// 这种情况下，fullname不是响应式</span>
     <span class="token comment">// 可以使用计算属性达到响应式目的</span>
     	<span class="token comment">// 只使用get</span>
     <span class="token keyword">const</span> fullname2 <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> firstname<span class="token punctuation">.</span>value <span class="token operator">+</span> <span class="token string">' '</span> <span class="token operator">+</span> lastname<span class="token punctuation">.</span>value<span class="token punctuation">)</span> <span class="token comment">// computed返回的是一个ref对象</span>
     	<span class="token comment">// 使用get和setter</span>
     <span class="token keyword">const</span> fullname3 <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
         <span class="token function-variable function">get</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> firstname<span class="token punctuation">.</span>value <span class="token operator">+</span> lastname<span class="token punctuation">.</span>value
         <span class="token function">set</span><span class="token punctuation">(</span>newValue<span class="token punctuation">)</span> <span class="token punctuation">{</span>
         	<span class="token keyword">const</span> name <span class="token operator">=</span> newValue<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">' '</span><span class="token punctuation">)</span>
             firstname<span class="token punctuation">.</span>value <span class="token operator">=</span> name<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
         	lastname<span class="token punctuation">.</span>value <span class="token operator">=</span> name<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
     	<span class="token punctuation">}</span>
     <span class="token punctuation">}</span><span class="token punctuation">)</span>
 <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div></li> <li><p>vue2中的写法</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
	<span class="token literal-property property">computed</span><span class="token operator">:</span> <span class="token punctuation">{</span>
     <span class="token literal-property property">fullName</span><span class="token operator">:</span> <span class="token punctuation">{</span>
         <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
             <span class="token keyword">return</span> firstname <span class="token operator">+</span> <span class="token string">' '</span> <span class="token operator">+</span> lastname
         <span class="token punctuation">}</span><span class="token punctuation">,</span>
         <span class="token function">set</span><span class="token punctuation">(</span>newValue<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">let</span> names <span class="token operator">=</span> newValue<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">' '</span><span class="token punctuation">)</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>firstName <span class="token operator">=</span> names<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>lastName <span class="token operator">=</span> names<span class="token punctuation">[</span>names<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span>
         <span class="token punctuation">}</span>
     <span class="token punctuation">}</span>
 <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div></li></ol> <h2 id="watcheffect"><a href="#watcheffect" class="header-anchor">#</a> watchEffect</h2> <h3 id="基础描述"><a href="#基础描述" class="header-anchor">#</a> 基础描述</h3> <ol><li><p>在options Api中，可以使用watch来侦听data或者props数据变化</p></li> <li><p>在Composition Api,可以使用watchEffect和watch来完成响应式数据的监听</p> <ul><li>watchEffect用于自动收集响应式数据的依赖</li> <li>watch需要手动指定侦听器的数据源</li></ul></li> <li><p>注意</p> <ul><li>watch 不会立即执行，除非设置 immediate: true</li> <li>watchEffect 会立即执行，会自动收集可响应式的依赖</li></ul></li></ol> <h3 id="watcheffect的使用"><a href="#watcheffect的使用" class="header-anchor">#</a> watchEffect的使用</h3> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
 <span class="token keyword">import</span> <span class="token punctuation">{</span> watchEffect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
	<span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token keyword">const</span> name <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">'why'</span><span class="token punctuation">)</span>
     <span class="token keyword">const</span> age <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">18</span><span class="token punctuation">)</span>
     <span class="token function">watchEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
         console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'watchEffect执行了'</span><span class="token punctuation">,</span> name<span class="token punctuation">.</span>value<span class="token punctuation">,</span> age<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
     <span class="token punctuation">}</span><span class="token punctuation">)</span>
     <span class="token keyword">return</span> <span class="token punctuation">{</span>
         name<span class="token punctuation">,</span>
         age
     <span class="token punctuation">}</span>
 <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="watcheffect可以使用第二个参数"><a href="#watcheffect可以使用第二个参数" class="header-anchor">#</a> watchEffect可以使用第二个参数</h3> <ol><li><p>第二个参数是对象，参数包括</p> <ol><li><p>flash: pre|post|sync,</p> <ul><li>pre是默认值，表示提前执行，</li> <li>post,表示等dom挂载完执行</li> <li>sync，在特殊情况下，当依赖发生改变时(强制同步)，立即触发侦听器(需要谨慎使用，因为如果多个属性同时更新，会导致一些性能和数据一致性问题)</li></ul></li> <li><p>onTrack： 值是一个回调函数</p></li> <li><p>onTrigger: 值是一个回调函数</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token keyword">import</span> <span class="token punctuation">{</span> watchEffect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
	<span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> name <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">'why'</span><span class="token punctuation">)</span>
        <span class="token keyword">const</span> age <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">18</span><span class="token punctuation">)</span>
        <span class="token function">watchEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'watchEffect执行了'</span><span class="token punctuation">,</span> name<span class="token punctuation">.</span>value<span class="token punctuation">,</span> age<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
            <span class="token literal-property property">flush</span><span class="token operator">:</span> <span class="token string">'post'</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span>
            name<span class="token punctuation">,</span>
            age
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div></li></ol></li></ol> <h3 id="停止侦听"><a href="#停止侦听" class="header-anchor">#</a> 停止侦听</h3> <ol><li><p>watchEffect 会自动调用一个自己的停止函数，如果需要停止，只需要执行一下对应的停止函数即可</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
 <span class="token keyword">import</span> <span class="token punctuation">{</span> watchEffect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
	<span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token keyword">const</span> name <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">'why'</span><span class="token punctuation">)</span>
     <span class="token keyword">const</span> age <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">18</span><span class="token punctuation">)</span>
     <span class="token keyword">const</span> stop <span class="token operator">=</span> <span class="token function">watchEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
         console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'watchEffect执行了'</span><span class="token punctuation">,</span> name<span class="token punctuation">.</span>value<span class="token punctuation">,</span> age<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
     <span class="token punctuation">}</span><span class="token punctuation">)</span>
     <span class="token keyword">function</span> <span class="token function">addAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
         age<span class="token punctuation">.</span>value <span class="token operator">++</span>
         <span class="token keyword">if</span><span class="token punctuation">(</span>age<span class="token punctuation">.</span>value <span class="token operator">&gt;</span><span class="token number">25</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
             <span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
         <span class="token punctuation">}</span>
     <span class="token punctuation">}</span>
     <span class="token keyword">return</span> <span class="token punctuation">{</span>
         name<span class="token punctuation">,</span>
         age<span class="token punctuation">,</span>
         addAge
     <span class="token punctuation">}</span>
 <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div></li></ol> <h3 id="清除副作用"><a href="#清除副作用" class="header-anchor">#</a> 清除副作用</h3> <ol><li><p>副作用定义</p> <ul><li>如果watch和网络请求绑定，在发送网络请求过程中，突然发现，参数发生改变，需要对请求进行取消并重新发送，对上次需要清除的请求，称之为副作用</li></ul></li> <li><p>解决方法</p> <ul><li>使用onInvalidate进行清除副作用，<code>这是个函数，清除副作用在这个函数的回调里</code>，<code>这是个形参，取任何名字都可以</code></li></ul></li> <li><p>示例代码</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token keyword">import</span> <span class="token punctuation">{</span> watchEffect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
	<span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> name <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">'why'</span><span class="token punctuation">)</span>
        <span class="token keyword">const</span> age <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">18</span><span class="token punctuation">)</span>
        <span class="token function">watchEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">onInvalidate</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token function">onInvalidate</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token comment">// 在这个函数中，清除额外的副作用</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'watchEffect执行了'</span><span class="token punctuation">,</span> name<span class="token punctuation">.</span>value<span class="token punctuation">,</span> age<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        
        <span class="token keyword">return</span> <span class="token punctuation">{</span>
            name<span class="token punctuation">,</span>
            age
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div></li></ol> <h2 id="watch"><a href="#watch" class="header-anchor">#</a> watch</h2> <h3 id="基础特性"><a href="#基础特性" class="header-anchor">#</a> 基础特性</h3> <ol><li><p>setup中的watch和选项api中的watch使用方法一样</p> <ul><li><p>watch需要侦听特定的数据源，并在回调函数中执行副作用</p></li> <li><p>默认情况下他是惰性的，只有当被侦听的源发生变化时，才会执行回调</p></li></ul></li> <li><p>与watchEffect相比较，watch允许我们：</p> <ul><li><p>懒执行副作用(第一次不会直接执行)</p></li> <li><p>更具体的说明，当哪些状态发生变化时，触发侦听器的执行</p></li> <li><p>访问侦听状态变化前后的值</p></li></ul></li></ol> <h3 id="侦听单个数据源"><a href="#侦听单个数据源" class="header-anchor">#</a> 侦听单个数据源</h3> <h4 id="基础特性-2"><a href="#基础特性-2" class="header-anchor">#</a> 基础特性</h4> <ul><li><p>watch第一个参数是需要侦听的数据源，第二个参数是回调函数</p></li> <li><p>watch可以侦听<code>reactive</code>和<code>ref</code>两种类型的响应式参数(比较常用的是ref，如果使用reactive，需要进行某种转换)</p></li></ul> <h4 id="侦听ref对象"><a href="#侦听ref对象" class="header-anchor">#</a> 侦听ref对象</h4> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
	<span class="token keyword">import</span> <span class="token punctuation">{</span> watch <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
    <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 侦听ref对象</span>
        <span class="token keyword">const</span> name <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">'张三'</span><span class="token punctuation">)</span>
       <span class="token function">watch</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">newValue<span class="token punctuation">,</span> oldValue</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token comment">// watch第一个参数指明要侦听的数据源，第二个参数是回调函数</span>
           console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'newValue'</span><span class="token punctuation">,</span> newValue<span class="token punctuation">)</span>
       <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h4 id="侦听reactive里的某个属性"><a href="#侦听reactive里的某个属性" class="header-anchor">#</a> 侦听reactive里的某个属性</h4> <ol><li><p>侦听时，可以传入一个get函数</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
	<span class="token keyword">import</span> <span class="token punctuation">{</span> watch <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
    <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 侦听reactive里的某个属性</span>
       <span class="token keyword">const</span> info <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'zhangsan'</span><span class="token punctuation">,</span> <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
       <span class="token function">watch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> info<span class="token punctuation">.</span>name<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">newValue<span class="token punctuation">,</span> oldValue</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
           console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newValue<span class="token punctuation">,</span> oldValue<span class="token punctuation">)</span>
       <span class="token punctuation">}</span><span class="token punctuation">)</span>
       <span class="token keyword">return</span> <span class="token punctuation">{</span>

       <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div></li> <li><p>可以传入一个响应式对象</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
	<span class="token keyword">import</span> <span class="token punctuation">{</span> watch <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
    <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 侦听reactive里的某个属性</span>
       <span class="token keyword">const</span> info <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'zhangsan'</span><span class="token punctuation">,</span> <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
       <span class="token function">watch</span><span class="token punctuation">(</span>info<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">newValue<span class="token punctuation">,</span> oldValue</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
           <span class="token comment">// 这种情况下的newValue和oldValue是一个reactive对象</span>
           console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newValue<span class="token punctuation">,</span> oldValue<span class="token punctuation">)</span>
       <span class="token punctuation">}</span><span class="token punctuation">)</span>
       <span class="token keyword">return</span> <span class="token punctuation">{</span>

       <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div></li> <li><p>如果希望newValue和oldValue是一个普通对象,可以使用解构</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
	<span class="token keyword">import</span> <span class="token punctuation">{</span> watch <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
    <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 使用解构，改变newValue和oldValue的值</span>
       <span class="token keyword">const</span> info <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'zhangsan'</span><span class="token punctuation">,</span> <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
       <span class="token function">watch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token operator">...</span>info<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">newValue<span class="token punctuation">,</span> oldValue</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
           console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newValue<span class="token punctuation">,</span> oldValue<span class="token punctuation">)</span>
       <span class="token punctuation">}</span><span class="token punctuation">)</span>
       <span class="token keyword">return</span> <span class="token punctuation">{</span>

       <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div></li></ol> <h3 id="侦听多个数据源"><a href="#侦听多个数据源" class="header-anchor">#</a> 侦听多个数据源</h3> <ol><li><p>示例代码</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
	<span class="token keyword">import</span> <span class="token punctuation">{</span> watch <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
 <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token comment">// 侦听ref对象</span>
     <span class="token keyword">const</span> name <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">'张三'</span><span class="token punctuation">)</span>
     <span class="token keyword">const</span> age <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">18</span><span class="token punctuation">)</span>
     <span class="token keyword">const</span> persons <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'abc'</span><span class="token punctuation">,</span> <span class="token string">'cba'</span><span class="token punctuation">,</span> <span class="token string">'123'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token function">watch</span><span class="token punctuation">(</span><span class="token punctuation">[</span>name<span class="token punctuation">,</span> age<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">newValue<span class="token punctuation">,</span> oldValue</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// 返回的newValue和oldValue仍然是个数组，里面的类型和传入的类型相同</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'newValue'</span><span class="token punctuation">,</span> newValue<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token comment">// 侦听reactive复杂对象,使用解构</span>
    <span class="token function">watch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">[</span>name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> <span class="token operator">...</span>persons<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">newValue<span class="token punctuation">,</span> oldValue</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// 返回的newValue和oldValue仍然是个数组，里面的类型和传入的类型相同</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'newValue'</span><span class="token punctuation">,</span> newValue<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
 <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div></li></ol> <h3 id="深度侦听"><a href="#深度侦听" class="header-anchor">#</a> 深度侦听</h3> <ol><li><p>可以传入deep: true，进行深度侦听，</p></li> <li><p>也可以传入immediate: true进行立即执行</p></li> <li><p><code>如果传入的是reactive，默认是可以深度侦听的</code>， <code>但是如果使用了解构，就不能深度侦听了</code></p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
	<span class="token keyword">import</span> <span class="token punctuation">{</span> watch <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
 <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token keyword">const</span> name <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">'张三'</span><span class="token punctuation">)</span>
     <span class="token keyword">const</span> age <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">18</span><span class="token punctuation">)</span>
     <span class="token keyword">const</span> persons <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'abc'</span><span class="token punctuation">,</span> <span class="token string">'cba'</span><span class="token punctuation">,</span> <span class="token string">'123'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token function">watch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">[</span>name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> <span class="token operator">...</span>persons<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">newValue<span class="token punctuation">,</span> oldValue</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'newValue'</span><span class="token punctuation">,</span> newValue<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token literal-property property">deep</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token literal-property property">immediate</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
 <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div></li></ol> <h2 id="生命周期"><a href="#生命周期" class="header-anchor">#</a> 生命周期</h2> <ol><li><p>分类</p> <table><thead><tr><th>选项式API</th> <th>hook inside setup</th></tr></thead> <tbody><tr><td>beforeCreate</td> <td>Not Need</td></tr> <tr><td>created</td> <td>Not Need</td></tr> <tr><td>beforeMount</td> <td>onBeforeMount</td></tr> <tr><td>mounted</td> <td>onMounted</td></tr> <tr><td>beforeUpdate</td> <td>onBeforedUpdate</td></tr> <tr><td>updated</td> <td>onUpdated</td></tr> <tr><td>beforeUnmount</td> <td>onBeforeUnmounted</td></tr> <tr><td>unmounted</td> <td>onUnmounted</td></tr> <tr><td>activated</td> <td>onActivated</td></tr> <tr><td>deacitvated</td> <td>onDeactivated</td></tr></tbody></table></li> <li><p>注意</p> <ul><li>setup中的生命周期函数，<code>名字需要在原来的生命周期前，加on</code>，如onMounted，<code>使用时，需要从vue中解构出来</code></li> <li><code>对于beforeCreated 和 created没有相应的hook，可以放到setup中去执行，因为setup要比这两个函数执行的还要早</code></li></ul></li></ol> <h2 id="provide、inject函数"><a href="#provide、inject函数" class="header-anchor">#</a> provide、inject函数</h2> <h3 id="父组件写法"><a href="#父组件写法" class="header-anchor">#</a> 父组件写法</h3> <ol><li><p>setup中的provide和inject可以替代选项式provide和inject</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token keyword">import</span> <span class="token punctuation">{</span> provide<span class="token punctuation">,</span>ref<span class="token punctuation">,</span> reactive <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
	<span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> counter <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span>
        <span class="token keyword">let</span> info <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'zhangsan'</span><span class="token punctuation">,</span>
            <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">10</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token function">provide</span><span class="token punctuation">(</span><span class="token string">'counter'</span><span class="token punctuation">,</span> counter<span class="token punctuation">)</span>
        <span class="token function">provide</span><span class="token punctuation">(</span><span class="token string">'info'</span><span class="token punctuation">,</span> info<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div></li> <li><p>如果数据并不想让子组件进行修改，可以使用readonly</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token keyword">import</span> <span class="token punctuation">{</span> provide<span class="token punctuation">,</span> readonly<span class="token punctuation">,</span> ref<span class="token punctuation">,</span> reactive <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
	<span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> counter <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span>
        <span class="token keyword">let</span> info <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'zhangsan'</span><span class="token punctuation">,</span>
            <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">10</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token function">provide</span><span class="token punctuation">(</span><span class="token string">'counter'</span><span class="token punctuation">,</span> <span class="token function">readonly</span><span class="token punctuation">(</span>counter<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token function">provide</span><span class="token punctuation">(</span><span class="token string">'info'</span><span class="token punctuation">,</span> <span class="token function">readonly</span><span class="token punctuation">(</span>info<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div></li> <li><p>如果子组件需要改变父组件值，只需要在父组件定义一个改变值的方法，然后通过provide/inject进行传递和接收即可</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token keyword">import</span> <span class="token punctuation">{</span> provide<span class="token punctuation">,</span>ref<span class="token punctuation">,</span> reactive <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
	<span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> counter <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span>
        <span class="token keyword">let</span> info <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'zhangsan'</span><span class="token punctuation">,</span>
            <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">10</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token keyword">const</span> <span class="token function-variable function">updateLocation</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          info<span class="token punctuation">.</span>name<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">'wangwu'</span>
        <span class="token punctuation">}</span>
        <span class="token function">provide</span><span class="token punctuation">(</span><span class="token string">'counter'</span><span class="token punctuation">,</span> counter<span class="token punctuation">)</span>
        <span class="token function">provide</span><span class="token punctuation">(</span><span class="token string">'info'</span><span class="token punctuation">,</span> info<span class="token punctuation">)</span>
        <span class="token function">provide</span><span class="token punctuation">(</span><span class="token string">'updateLocation'</span><span class="token punctuation">,</span> updateLocation<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div></li></ol> <h3 id="子组件使用"><a href="#子组件使用" class="header-anchor">#</a> 子组件使用</h3> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token keyword">import</span> <span class="token punctuation">{</span> inject <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
    <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">const</span> counter <span class="token operator">=</span> <span class="token function">inject</span><span class="token punctuation">(</span><span class="token string">'counter'</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment">// 第一个是接收的参数，第二个是默认值，默认值可以不取</span>
        <span class="token keyword">const</span> info <span class="token operator">=</span> <span class="token function">inject</span><span class="token punctuation">(</span><span class="token string">'info'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token keyword">const</span> updateUserLocation <span class="token operator">=</span> <span class="token function">inject</span><span class="token punctuation">(</span><span class="token string">'updateLocation'</span><span class="token punctuation">)</span>
        <span class="token function">updateUserLocation</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h2 id="自定义hooks"><a href="#自定义hooks" class="header-anchor">#</a> 自定义hooks</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> ref<span class="token punctuation">,</span> watch <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> useTitle <span class="token operator">=</span> <span class="token punctuation">(</span>title <span class="token operator">=</span> <span class="token string">'默认值'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> titleRef <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span>title<span class="token punctuation">)</span>
    <span class="token function">watch</span><span class="token punctuation">(</span>titleRef<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">newValue</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        document<span class="token punctuation">.</span>title <span class="token operator">=</span> newValue
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">immediate</span><span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> titleRef
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token keyword">import</span> useTitle <span class="token keyword">from</span> <span class="token string">'./hooks/useTitle'</span>
    <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
        <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">const</span> titleRef <span class="token operator">=</span> <span class="token function">useTitle</span><span class="token punctuation">(</span><span class="token string">'这是网页标题'</span><span class="token punctuation">)</span>
            <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                titleRef<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">'改变了的标题'</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">3000</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h2 id="标签中的setup"><a href="#标签中的setup" class="header-anchor">#</a> 标签中的setup</h2> <h3 id="定义数据和方法"><a href="#定义数据和方法" class="header-anchor">#</a> 定义数据和方法</h3> <ol><li><p>可以在script标签上加setup属性，这样就可以不用写export defalut 和setup了</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token keyword">import</span> useTitle <span class="token keyword">from</span> <span class="token string">'./hooks/useTitle'</span>
    <span class="token keyword">const</span> titleRef <span class="token operator">=</span> <span class="token function">useTitle</span><span class="token punctuation">(</span><span class="token string">'这是网页标题'</span><span class="token punctuation">)</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        titleRef<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">'改变了的标题'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">3000</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></li></ol> <h3 id="定义props"><a href="#定义props" class="header-anchor">#</a> 定义props</h3> <ol><li><p>需要从vue中解构<code>defineProps</code></p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token keyword">import</span> <span class="token punctuation">{</span> defineProps <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
    <span class="token keyword">const</span> props <span class="token operator">=</span> <span class="token function">defineProps</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">type</span><span class="token operator">:</span> String<span class="token punctuation">,</span>
            <span class="token keyword">default</span><span class="token operator">:</span> <span class="token string">'哈哈哈'</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div></li></ol> <h3 id="defineemit"><a href="#defineemit" class="header-anchor">#</a> defineEmit</h3> <ol><li><p>先从vue中解构出defineEmit,然后通过defineEmit定义方法，定义时，可以传入数组，数组中包含需要定义的方法名</p></li> <li><p>最后使用emit进行方法的调用</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token keyword">import</span> <span class="token punctuation">{</span> defineEmit <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
    <span class="token keyword">const</span> emit <span class="token operator">=</span> <span class="token function">defineEmit</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'increment'</span><span class="token punctuation">,</span> <span class="token string">'decrement'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token comment">// 定义方法用来使用emit</span>
    <span class="token keyword">const</span> <span class="token function-variable function">emitEvent</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">'increment'</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></li></ol> <h2 id="render函数"><a href="#render函数" class="header-anchor">#</a> render函数</h2> <h3 id="背景"><a href="#背景" class="header-anchor">#</a> 背景</h3> <ol><li>我们在文件中写的html代码，首先会解析成对应的render函数，然后执行render函数，返回对应的虚拟dom，再由虚拟dom渲染成真实dom</li></ol> <h3 id="h函数-hyperscript-工具"><a href="#h函数-hyperscript-工具" class="header-anchor">#</a> h函数(hyperScript 工具)</h3> <ol><li><p>该工具是基于javaScript编写模板的工具</p></li> <li><p>该函数接收三个参数</p></li> <li><p>{String | Object | Function} tag</p> <ul><li><p>一个HTML标签名、一个组件、一个异步组件或一个函数组件</p></li> <li><p>必填参数</p></li> <li><p>例： ‘div’</p></li></ul></li> <li><p>{Object} props</p> <ul><li><p>与attribute、prop和事件相对应的对象</p></li> <li><p>可选参数</p></li> <li><p>例： {id: idName}</p></li></ul></li> <li><p>{String | Array | Object} children</p> <ul><li><p>子vnodes，使用h()构建，或使用字符串获取‘文本vnode’或者有插槽的对象</p> <p>可选参数</p></li> <li><p>例：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token punctuation">[</span>
    <span class="token string">'some info text'</span><span class="token punctuation">,</span>
    <span class="token function">h</span><span class="token punctuation">(</span>‘h1’<span class="token punctuation">,</span> ‘<span class="token constant">A</span> headline’<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">h</span><span class="token punctuation">(</span>Mycomponent<span class="token punctuation">,</span> 
    <span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">somePorp</span><span class="token operator">:</span> ‘foobar’<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li></ul></li> <li><p>注意</p> <ol><li>如果第二个参数不需要填写，可以使用null进行占位</li></ol></li></ol> <h3 id="h函数在render函数中的使用"><a href="#h函数在render函数中的使用" class="header-anchor">#</a> h函数在render函数中的使用</h3> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
	<span class="token keyword">import</span> <span class="token punctuation">{</span> h <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
    <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
        <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token function">h</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token keyword">class</span><span class="token operator">:</span> <span class="token string">'app'</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">'hello App'</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="h函数在setup函数中的使用"><a href="#h函数在setup函数中的使用" class="header-anchor">#</a> h函数在setup函数中的使用</h3> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
	<span class="token keyword">import</span> <span class="token punctuation">{</span> h <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
    <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
        <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">h</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token keyword">class</span><span class="token operator">:</span> <span class="token string">'app'</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">'hello App'</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="h函数实现计数器"><a href="#h函数实现计数器" class="header-anchor">#</a> h函数实现计数器</h3> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
	<span class="token keyword">import</span> <span class="token punctuation">{</span> h <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
    <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
        <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token punctuation">{</span>
                <span class="token literal-property property">counter</span><span class="token operator">:</span> <span class="token number">0</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token function">h</span><span class="token punctuation">(</span>
            <span class="token string">'div'</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span><span class="token keyword">class</span><span class="token operator">:</span> <span class="token string">'app'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">[</span>
                <span class="token function">h</span><span class="token punctuation">(</span><span class="token string">'h2'</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">当前计数:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>counter<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token function">h</span><span class="token punctuation">(</span><span class="token string">'button'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token function-variable function">onClick</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>counter <span class="token operator">++</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">'+1'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token function">h</span><span class="token punctuation">(</span><span class="token string">'button'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token function-variable function">onClick</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>counter <span class="token operator">--</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">'-1'</span><span class="token punctuation">)</span>
            <span class="token punctuation">]</span>
            <span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><h2 id="jsx的使用"><a href="#jsx的使用" class="header-anchor">#</a> jsx的使用</h2> <h3 id="jsx的babel配置"><a href="#jsx的babel配置" class="header-anchor">#</a> jsx的babel配置</h3> <ol><li><p>安装插件</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>npm install @vue<span class="token operator">/</span>babel<span class="token operator">-</span>plugin<span class="token operator">-</span>jsx <span class="token operator">-</span><span class="token constant">D</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>在babel.config.js配置文件中配置插件</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">presets</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">'@vue/cli-plugin-babel/preset'</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">'@vue/babel-plugin-jsx'</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></li></ol> <h3 id="jsx的使用-2"><a href="#jsx的使用-2" class="header-anchor">#</a> jsx的使用</h3> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
	<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
        <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token punctuation">(</span>
            	<span class="token operator">&lt;</span>div<span class="token operator">&gt;</span> hello jsx <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
            <span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="jsx的计数器"><a href="#jsx的计数器" class="header-anchor">#</a> jsx的计数器</h3> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
	<span class="token keyword">export</span> defalut <span class="token punctuation">{</span>
        <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> counter <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
            <span class="token keyword">const</span> <span class="token function-variable function">increment</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> counter<span class="token punctuation">.</span>value <span class="token operator">++</span>
            <span class="token keyword">const</span> <span class="token function-variable function">decrement</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> counter<span class="token punctuation">.</span>value <span class="token operator">--</span>
            <span class="token keyword">return</span> <span class="token punctuation">{</span>
                counter<span class="token punctuation">,</span>
                increment<span class="token punctuation">,</span>
                decrement
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token punctuation">(</span>
            	<span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
    				<span class="token operator">&lt;</span>h2<span class="token operator">&gt;</span>当前计数： <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>counter<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">&gt;</span>
        			<span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>increment<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">+</span><span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
        			<span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>decrement<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">-</span><span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
    			<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
            <span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><h2 id="自定义指令"><a href="#自定义指令" class="header-anchor">#</a> 自定义指令</h2> <h3 id="分类"><a href="#分类" class="header-anchor">#</a> 分类</h3> <p>自定义组件分为：<code>自定义局部指令、自定义全局指令</code></p> <ol><li><p>自定义局部指令</p> <p>组件中通过<code>directives选项</code>，只能在当前组件中使用</p></li> <li><p>自定义全局指令</p> <p>app的<code>directive方法</code>，可以在任意组件中被使用</p></li></ol> <h3 id="指令的使用"><a href="#指令的使用" class="header-anchor">#</a> 指令的使用</h3> <p>以自动获取input的焦点为例</p> <h4 id="局部指令"><a href="#局部指令" class="header-anchor">#</a> 局部指令</h4> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-focus</span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token keyword">export</span> <span class="token keyword">default</span>  <span class="token punctuation">{</span>
        <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token comment">// 局部定义自定义指令</span>
        <span class="token literal-property property">directives</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">focus</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> bindings<span class="token punctuation">,</span> vnode<span class="token punctuation">,</span> prevnode</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    el<span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h4 id="全局指令"><a href="#全局指令" class="header-anchor">#</a> 全局指令</h4> <ul><li><p>在main.js中使用</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">createApp</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span>
app<span class="token punctuation">.</span><span class="token function">directive</span><span class="token punctuation">(</span><span class="token string">'focus'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
	<span class="token function">mounted</span><span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> bindings<span class="token punctuation">,</span> vnode<span class="token punctuation">,</span> prevnode</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        el<span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li></ul> <h4 id="分组件全局指令"><a href="#分组件全局指令" class="header-anchor">#</a> 分组件全局指令</h4> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 自定义指令</span>
<span class="token keyword">export</span> <span class="token keyword">default</span><span class="token punctuation">(</span><span class="token parameter">app</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
   app<span class="token punctuation">.</span><span class="token function">directive</span><span class="token punctuation">(</span><span class="token string">'FFFocus'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
     <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token parameter">el</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        el<span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
     <span class="token punctuation">}</span>
   <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// 全局注册自定义指令</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> createApp <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">'./App.vue'</span>
<span class="token keyword">import</span> directive <span class="token keyword">from</span> <span class="token string">'./directive'</span>

<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">createApp</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span>
<span class="token function">directive</span><span class="token punctuation">(</span>app<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h3 id="指令的生命周期"><a href="#指令的生命周期" class="header-anchor">#</a> 指令的生命周期</h3> <table><thead><tr><th>名称</th> <th>描述</th></tr></thead> <tbody><tr><td>created</td> <td>在绑定元素的attribute或事件监听器被应用之前调用</td></tr> <tr><td>beforeMount</td> <td>当指令第一次绑定到元素并且在挂载父组件之前调用</td></tr> <tr><td>mounted</td> <td>在绑定元素的父组件被挂载后调用</td></tr> <tr><td>beforeUpdate</td> <td>在更新包含组件的VNode之前调用</td></tr> <tr><td>updated</td> <td>在包含组件的VNode及其子组件的VNode更新之后调用</td></tr> <tr><td>beforeUnmounted</td> <td>在卸载绑定元素的父组件之前调用</td></tr> <tr><td>unmounted</td> <td>当指令与元素解除绑定并且父组件已经卸载时，只调用一次</td></tr></tbody></table> <h3 id="指令的参数和修饰符"><a href="#指令的参数和修饰符" class="header-anchor">#</a> 指令的参数和修饰符</h3> <p>每个生命周期，都可传四个参数</p> <ol><li><p>el</p> <p>指令绑定到的元素，这可用于直接操作DOM</p></li> <li><p>binding， 一个对象，包含以下属性</p> <ul><li>value: 传递给指令的值。如： v-focus=“1 + 1” ,那么值就是2</li> <li>oldValue: 之前的值，仅在beforeUpdate和updated中可用，无论值是否更改，它都可用</li> <li>arg：传递给指令的参数，如果有的话，如： v-focus：foo,参数就是‘foo’</li> <li>modifiers：一个包含修饰符的对象，如： v-focus.foo.bar,修饰符的对象就是{foo: true, bar: true}</li> <li>instance: 使用该指令的组件实例</li> <li>dir：指令的定义对象</li></ul></li> <li><p>vnode：代表绑定元素的底层VNode</p></li> <li><p>prevNode： 之前的渲染中代表指令所绑定元素的VNode，仅在beforeUpdate和updated钩子中可用</p> <p><code>自定义指令也可动态绑定参数</code></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>div v<span class="token operator">-</span>example<span class="token operator">:</span><span class="token punctuation">[</span>arg<span class="token punctuation">]</span><span class="token operator">=</span><span class="token string">&quot;value&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ol> <h2 id="teleport"><a href="#teleport" class="header-anchor">#</a> teleport</h2> <h3 id="背景-2"><a href="#背景-2" class="header-anchor">#</a> 背景</h3> <ol><li><p>普通情况下，如果封装的A组件，在B组件中使用，A会被挂载到B中的template的位置</p></li> <li><p>如果<code>想挂载到其他位置</code>，比如body里，或者其他的div#app之外的元素上，<code>可以使用teleport来完成</code></p></li></ol> <h3 id="teleport-2"><a href="#teleport-2" class="header-anchor">#</a> teleport</h3> <ol><li><p>teleport类似于react的Protals</p></li> <li><p>属性</p> <ol><li><p>to：指定将其中的内容移动到的目标元素，可以使用选择器</p></li> <li><p>disabled： 是否禁用teleport功能</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>my-app<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>teleport</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>body<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span>hello world<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
    	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>teleport</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></li></ol></li></ol> <h2 id="vue插件"><a href="#vue插件" class="header-anchor">#</a> vue插件</h2> <h3 id="插件的分类"><a href="#插件的分类" class="header-anchor">#</a> 插件的分类</h3> <ol><li><p>向vue全局添加一些功能的时候，会采用插件的模式，有两种编写方式</p> <ol><li><p><code>对象类型</code>：一个<code>对象</code>，但是<code>必须包含一个install函数</code>，<code>该函数会在安装插件时执行</code></p></li> <li><p><code>函数类型</code>：一个<code>function</code>，这个函数会<code>在安装插件时自动执行</code></p></li></ol></li></ol> <h3 id="使用方式"><a href="#使用方式" class="header-anchor">#</a> 使用方式</h3> <ol><li><p>对象类型</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'why'</span><span class="token punctuation">,</span>
    <span class="token function">install</span><span class="token punctuation">(</span><span class="token parameter">app<span class="token punctuation">,</span> options</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'插件被安装在'</span><span class="token punctuation">,</span> app<span class="token punctuation">,</span> options<span class="token punctuation">)</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></li> <li><p>函数类型</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">app<span class="token punctuation">,</span> options</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'插件被安装在'</span><span class="token punctuation">,</span> app<span class="token punctuation">,</span> options<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li> <li><p>使用方式</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createApp <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> pliginObject <span class="token keyword">from</span> <span class="token string">'./pligins/plugin_object'</span>

<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">createApp</span><span class="token punctuation">(</span>app<span class="token punctuation">)</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>pluginObject<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li></ol> <h3 id="插件的功能"><a href="#插件的功能" class="header-anchor">#</a> 插件的功能</h3> <ul><li><p>添加全局方法或者property,通过把它们添加到config.globalProperties上实现</p></li> <li><p>添加全局资源：指令/过滤器/过渡等</p></li> <li><p>通过全局mixin添加一些组件选项</p></li> <li><p>一个库，提供自己的Api，同时提供上面提到的一个或者多个功能</p></li></ul> <p>​</p></div></div> <!----> <div class="page-edit"><div class="edit-link"><a href="https://github.com/MaiRen1997/Myblog/edit/master/docs/01.前端/20.vue框架/03.vue3的使用.md" target="_blank" rel="noopener noreferrer">编辑</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----> <div class="last-updated"><span class="prefix">最后更新时间:</span> <span class="time">4/25/2025, 2:18:33 AM</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/Myblog/pages/0082e9/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">vue基本知识点</div></a> <a href="/Myblog/pages/7f3d50/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">vue-router</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/Myblog/pages/0082e9/" class="prev">vue基本知识点</a></span> <span class="next"><a href="/Myblog/pages/7f3d50/">vue-router</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/Myblog/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/Myblog/pages/27f4f1/"><div>
            多账号配置SSH
            <!----></div></a> <span class="date">04-25</span></dt></dl><dl><dd>02</dd> <dt><a href="/Myblog/pages/cbf926/"><div>
            vue2组件的封装与上传
            <!----></div></a> <span class="date">04-25</span></dt></dl><dl><dd>03</dd> <dt><a href="/Myblog/pages/31d140/"><div>
            学习计划
            <!----></div></a> <span class="date">04-25</span></dt></dl> <dl><dd></dd> <dt><a href="/Myblog/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><!----> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> <!----></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"></div></div>
    <script src="/Myblog/assets/js/app.6243254d.js" defer></script><script src="/Myblog/assets/js/2.3c9f4522.js" defer></script><script src="/Myblog/assets/js/167.b180466f.js" defer></script>
  </body>
</html>
